"use strict";

exports.__esModule = true;
exports["default"] = exports.primitiveRender = void 0;

var _react = _interopRequireDefault(require("react"));

var _reactFormattedInput = _interopRequireDefault(require("@opuscapita/react-formatted-input"));

var _formatUtils = require("@opuscapita/format-utils");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var primitiveRender = function primitiveRender(formattedInputProps) {
  return _react["default"].createElement(_reactFormattedInput["default"], formattedInputProps);
};

exports.primitiveRender = primitiveRender;
var _default = {
  // primitiveNumberValueRender
  numberValRender: function numberValRender(col, rowIndex, thousandSeparator, decimalSeparator, valueRender) {
    var decimals = col.componentType === 'number' ? 0 : 2;
    return valueRender(rowIndex, function (v) {
      return (0, _formatUtils.formatNumber)(v, {
        decimals: col.valueOptions && col.valueOptions.decimals || decimals,
        thousandSeparator: col.valueOptions && col.valueOptions.thousandSeparator || thousandSeparator,
        decimalSeparator: col.valueOptions && col.valueOptions.decimalSeparator || decimalSeparator
      });
    });
  },
  // primitiveCellEdit
  cellEdit: function cellEdit(col, column, rowIndex, tabIndex, gridId, editValueParser, formControlType, functions, getComponentDisabledState) {
    var cellName = 'edit';

    var primitiveProps = _extends({
      tabIndex: tabIndex,
      className: 'form-control',
      inputProps: {
        disabled: getComponentDisabledState(rowIndex, col, cellName),
        id: "ocDatagridEditInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        onFocus: functions.onCellFocus(cellName, col.componentType, rowIndex, column.columnKey),
        onKeyDown: functions.onCellKeyDown(rowIndex, col),
        ref: functions.handleCellRef(rowIndex, col),
        style: column.style,
        type: formControlType
      },
      value: functions.getItemValue(rowIndex, col),
      onBlur: functions.onCellBlur(rowIndex, col),
      onChange: functions.onCellValueChange(rowIndex, col, editValueParser)
    }, col.editComponentProps);

    return primitiveRender(_extends({}, primitiveProps));
  },
  // primitiveCellCreate
  cellCreate: function cellCreate(col, column, rowIndex, tabIndex, gridId, createValueParser, formControlType, functions, getComponentDisabledState) {
    var cellName = 'create';

    var primitiveProps = _extends({
      tabIndex: tabIndex,
      className: 'form-control',
      inputProps: {
        disabled: getComponentDisabledState(rowIndex, col, cellName),
        id: "ocDatagridCreateInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        onFocus: functions.onCellFocus(cellName, col.componentType, rowIndex, column.columnKey),
        onKeyDown: functions.onCellKeyDown(rowIndex, col, false),
        ref: functions.handleCellRef(rowIndex, col),
        style: column.style,
        type: formControlType || col.componentType
      },
      value: functions.getItemValue(rowIndex, col),
      onBlur: functions.onCellBlur(rowIndex, col),
      onChange: functions.onCellValueChange(rowIndex, col, createValueParser)
    }, col.createComponentProps);

    return primitiveRender(_extends({}, primitiveProps));
  },
  // primitiveCellFilter
  cellFilter: function cellFilter(col, column, tabIndex, gridId, filterValueParser, formControlType, functions) {
    var primitiveProps = _extends({
      tabIndex: tabIndex,
      className: 'form-control',
      inputProps: {
        id: "ocDatagridFilterInput-" + gridId + "-" + column.columnKey,
        style: column.style,
        type: formControlType
      },
      value: functions.getItemValue(col),
      onChange: functions.onCellValueChange(col, filterValueParser)
    }, col.filterComponentProps);

    return primitiveRender(_extends({}, primitiveProps));
  }
};
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9kYXRhZ3JpZC9jb2x1bW4tc2VydmljZS9jb2x1bW4tdHlwZXMvcHJpbWl0aXZlLXJlbmRlcmVycy5qc3giXSwibmFtZXMiOlsicHJpbWl0aXZlUmVuZGVyIiwiZm9ybWF0dGVkSW5wdXRQcm9wcyIsIm51bWJlclZhbFJlbmRlciIsImNvbCIsInJvd0luZGV4IiwidGhvdXNhbmRTZXBhcmF0b3IiLCJkZWNpbWFsU2VwYXJhdG9yIiwidmFsdWVSZW5kZXIiLCJkZWNpbWFscyIsImNvbXBvbmVudFR5cGUiLCJ2IiwidmFsdWVPcHRpb25zIiwiY2VsbEVkaXQiLCJjb2x1bW4iLCJ0YWJJbmRleCIsImdyaWRJZCIsImVkaXRWYWx1ZVBhcnNlciIsImZvcm1Db250cm9sVHlwZSIsImZ1bmN0aW9ucyIsImdldENvbXBvbmVudERpc2FibGVkU3RhdGUiLCJjZWxsTmFtZSIsInByaW1pdGl2ZVByb3BzIiwiY2xhc3NOYW1lIiwiaW5wdXRQcm9wcyIsImRpc2FibGVkIiwiaWQiLCJjb2x1bW5LZXkiLCJvbkZvY3VzIiwib25DZWxsRm9jdXMiLCJvbktleURvd24iLCJvbkNlbGxLZXlEb3duIiwicmVmIiwiaGFuZGxlQ2VsbFJlZiIsInN0eWxlIiwidHlwZSIsInZhbHVlIiwiZ2V0SXRlbVZhbHVlIiwib25CbHVyIiwib25DZWxsQmx1ciIsIm9uQ2hhbmdlIiwib25DZWxsVmFsdWVDaGFuZ2UiLCJlZGl0Q29tcG9uZW50UHJvcHMiLCJjZWxsQ3JlYXRlIiwiY3JlYXRlVmFsdWVQYXJzZXIiLCJjcmVhdGVDb21wb25lbnRQcm9wcyIsImNlbGxGaWx0ZXIiLCJmaWx0ZXJWYWx1ZVBhcnNlciIsImZpbHRlckNvbXBvbmVudFByb3BzIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBOztBQUNBOztBQUNBOzs7Ozs7QUFFTyxJQUFNQSxlQUFlLEdBQUcsU0FBbEJBLGVBQWtCLENBQUFDLG1CQUFtQjtBQUFBLFNBQ2hELGdDQUFDLCtCQUFELEVBQW9C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QkFmVyxDQUFwQjs7QUFpQkEsV0FBTzVDLGVBQWUsY0FBTXFCLGNBQU4sRUFBdEI7QUFDRCxHQTVFWTtBQTZFYjtBQUNBd0IsRUFBQUEsVUE5RWEsc0JBOEVGMUMsR0E5RUUsRUE4RUdVLE1BOUVILEVBOEVXQyxRQTlFWCxFQThFcUJDLE1BOUVyQixFQThFNkIrQixpQkE5RTdCLEVBOEVnRDdCLGVBOUVoRCxFQThFaUVDLFNBOUVqRSxFQThFNEU7QUFDdkYsUUFBTUcsY0FBYztBQUNsQlAsTUFBQUEsUUFBUSxFQUFSQSxRQURrQjtBQUVsQlEsTUFBQUEsU0FBUyxFQUFFLGNBRk87QUFHbEJDLE1BQUFBLFVBQVUsRUFBRTtBQUNWRSxRQUFBQSxFQUFFLDZCQUEyQlYsTUFBM0IsU0FBcUNGLE1BQU0sQ0FBQ2EsU0FEcEM7QUFFVk8sUUFBQUEsS0FBSyxFQUFFcEIsTUFBTSxDQUFDb0IsS0FGSjtBQUdWQyxRQUFBQSxJQUFJLEVBQUVqQjtBQUhJLE9BSE07QUFRbEJrQixNQUFBQSxLQUFLLEVBQUVqQixTQUFTLENBQUNrQixZQUFWLENBQXVCakMsR0FBdkIsQ0FSVztBQVNsQm9DLE1BQUFBLFFBQVEsRUFBRXJCLFNBQVMsQ0FBQ3NCLGlCQUFWLENBQTRCckMsR0FBNUIsRUFBaUMyQyxpQkFBakM7QUFUUSxPQVVmM0MsR0FBRyxDQUFDNEMsb0JBVlcsQ0FBcEI7O0FBWUEsV0FBTy9DLGVBQWUsY0FBTXFCLGNBQU4sRUFBdEI7QUFDRDtBQTVGWSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBGb3JtYXR0ZWRJbnB1dCBmcm9tICdAb3B1c2NhcGl0YS9yZWFjdC1mb3JtYXR0ZWQtaW5wdXQnO1xuaW1wb3J0IHsgZm9ybWF0TnVtYmVyIH0gZnJvbSAnQG9wdXNjYXBpdGEvZm9ybWF0LXV0aWxzJztcblxuZXhwb3J0IGNvbnN0IHByaW1pdGl2ZVJlbmRlciA9IGZvcm1hdHRlZElucHV0UHJvcHMgPT4gKFxuICA8Rm9ybWF0dGVkSW5wdXQgey4uLmZvcm1hdHRlZElucHV0UHJvcHN9IC8+XG4pO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8vIHByaW1pdGl2ZU51bWJlclZhbHVlUmVuZGVyXG4gIG51bWJlclZhbFJlbmRlcihjb2wsIHJvd0luZGV4LCB0aG91c2FuZFNlcGFyYXRvciwgZGVjaW1hbFNlcGFyYXRvciwgdmFsdWVSZW5kZXIpIHtcbiAgICBjb25zdCBkZWNpbWFscyA9IGNvbC5jb21wb25lbnRUeXBlID09PSAnbnVtYmVyJyA/IDAgOiAyO1xuICAgIHJldHVybiB2YWx1ZVJlbmRlcihyb3dJbmRleCwgdiA9PiBmb3JtYXROdW1iZXIodiwge1xuICAgICAgZGVjaW1hbHM6IChjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMuZGVjaW1hbHMpIHx8IGRlY2ltYWxzLFxuICAgICAgdGhvdXNhbmRTZXBhcmF0b3I6XG4gICAgICAgICAgKGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy50aG91c2FuZFNlcGFyYXRvcikgfHwgdGhvdXNhbmRTZXBhcmF0b3IsXG4gICAgICBkZWNpbWFsU2VwYXJhdG9yOlxuICAgICAgICAgIChjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMuZGVjaW1hbFNlcGFyYXRvcikgfHwgZGVjaW1hbFNlcGFyYXRvcixcbiAgICB9KSk7XG4gIH0sXG4gIC8vIHByaW1pdGl2ZUNlbGxFZGl0XG4gIGNlbGxFZGl0KFxuICAgIGNvbCxcbiAgICBjb2x1bW4sXG4gICAgcm93SW5kZXgsXG4gICAgdGFiSW5kZXgsXG4gICAgZ3JpZElkLFxuICAgIGVkaXRWYWx1ZVBhcnNlcixcbiAgICBmb3JtQ29udHJvbFR5cGUsXG4gICAgZnVuY3Rpb25zLFxuICAgIGdldENvbXBvbmVudERpc2FibGVkU3RhdGUsXG4gICkge1xuICAgIGNvbnN0IGNlbGxOYW1lID0gJ2VkaXQnO1xuICAgIGNvbnN0IHByaW1pdGl2ZVByb3BzID0ge1xuICAgICAgdGFiSW5kZXgsXG4gICAgICBjbGFzc05hbWU6ICdmb3JtLWNvbnRyb2wnLFxuICAgICAgaW5wdXRQcm9wczoge1xuICAgICAgICBkaXNhYmxlZDogZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZShyb3dJbmRleCwgY29sLCBjZWxsTmFtZSksXG4gICAgICAgIGlkOiBgb2NEYXRhZ3JpZEVkaXRJbnB1dC0ke2dyaWRJZH0tJHtjb2x1bW4uY29sdW1uS2V5fS0ke3Jvd0luZGV4fWAsXG4gICAgICAgIG9uRm9jdXM6IGZ1bmN0aW9ucy5vbkNlbGxGb2N1cyhjZWxsTmFtZSwgY29sLmNvbXBvbmVudFR5cGUsIHJvd0luZGV4LCBjb2x1bW4uY29sdW1uS2V5KSxcbiAgICAgICAgb25LZXlEb3duOiBmdW5jdGlvbnMub25DZWxsS2V5RG93bihyb3dJbmRleCwgY29sKSxcbiAgICAgICAgcmVmOiBmdW5jdGlvbnMuaGFuZGxlQ2VsbFJlZihyb3dJbmRleCwgY29sKSxcbiAgICAgICAgc3R5bGU6IGNvbHVtbi5zdHlsZSxcbiAgICAgICAgdHlwZTogZm9ybUNvbnRyb2xUeXBlLFxuICAgICAgfSxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbnMuZ2V0SXRlbVZhbHVlKHJvd0luZGV4LCBjb2wpLFxuICAgICAgb25CbHVyOiBmdW5jdGlvbnMub25DZWxsQmx1cihyb3dJbmRleCwgY29sKSxcbiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbnMub25DZWxsVmFsdWVDaGFuZ2Uocm93SW5kZXgsIGNvbCwgZWRpdFZhbHVlUGFyc2VyKSxcbiAgICAgIC4uLmNvbC5lZGl0Q29tcG9uZW50UHJvcHMsXG4gICAgfTtcblxuICAgIHJldHVybiBwcmltaXRpdmVSZW5kZXIoeyAuLi5wcmltaXRpdmVQcm9wcyB9KTtcbiAgfSxcbiAgLy8gcHJpbWl0aXZlQ2VsbENyZWF0ZVxuICBjZWxsQ3JlYXRlKFxuICAgIGNvbCxcbiAgICBjb2x1bW4sXG4gICAgcm93SW5kZXgsXG4gICAgdGFiSW5kZXgsXG4gICAgZ3JpZElkLFxuICAgIGNyZWF0ZVZhbHVlUGFyc2VyLFxuICAgIGZvcm1Db250cm9sVHlwZSxcbiAgICBmdW5jdGlvbnMsXG4gICAgZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZSxcbiAgKSB7XG4gICAgY29uc3QgY2VsbE5hbWUgPSAnY3JlYXRlJztcbiAgICBjb25zdCBwcmltaXRpdmVQcm9wcyA9IHtcbiAgICAgIHRhYkluZGV4LFxuICAgICAgY2xhc3NOYW1lOiAnZm9ybS1jb250cm9sJyxcbiAgICAgIGlucHV0UHJvcHM6IHtcbiAgICAgICAgZGlzYWJsZWQ6IGdldENvbXBvbmVudERpc2FibGVkU3RhdGUocm93SW5kZXgsIGNvbCwgY2VsbE5hbWUpLFxuICAgICAgICBpZDogYG9jRGF0YWdyaWRDcmVhdGVJbnB1dC0ke2dyaWRJZH0tJHtjb2x1bW4uY29sdW1uS2V5fS0ke3Jvd0luZGV4fWAsXG4gICAgICAgIG9uRm9jdXM6IGZ1bmN0aW9ucy5vbkNlbGxGb2N1cyhjZWxsTmFtZSwgY29sLmNvbXBvbmVudFR5cGUsIHJvd0luZGV4LCBjb2x1bW4uY29sdW1uS2V5KSxcbiAgICAgICAgb25LZXlEb3duOiBmdW5jdGlvbnMub25DZWxsS2V5RG93bihyb3dJbmRleCwgY29sLCBmYWxzZSksXG4gICAgICAgIHJlZjogZnVuY3Rpb25zLmhhbmRsZUNlbGxSZWYocm93SW5kZXgsIGNvbCksXG4gICAgICAgIHN0eWxlOiBjb2x1bW4uc3R5bGUsXG4gICAgICAgIHR5cGU6IGZvcm1Db250cm9sVHlwZSB8fCBjb2wuY29tcG9uZW50VHlwZSxcbiAgICAgIH0sXG4gICAgICB2YWx1ZTogZnVuY3Rpb25zLmdldEl0ZW1WYWx1ZShyb3dJbmRleCwgY29sKSxcbiAgICAgIG9uQmx1cjogZnVuY3Rpb25zLm9uQ2VsbEJsdXIocm93SW5kZXgsIGNvbCksXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb25zLm9uQ2VsbFZhbHVlQ2hhbmdlKHJvd0luZGV4LCBjb2wsIGNyZWF0ZVZhbHVlUGFyc2VyKSxcbiAgICAgIC4uLmNvbC5jcmVhdGVDb21wb25lbnRQcm9wcyxcbiAgICB9O1xuICAgIHJldHVybiBwcmltaXRpdmVSZW5kZXIoeyAuLi5wcmltaXRpdmVQcm9wcyB9KTtcbiAgfSxcbiAgLy8gcHJpbWl0aXZlQ2VsbEZpbHRlclxuICBjZWxsRmlsdGVyKGNvbCwgY29sdW1uLCB0YWJJbmRleCwgZ3JpZElkLCBmaWx0ZXJWYWx1ZVBhcnNlciwgZm9ybUNvbnRyb2xUeXBlLCBmdW5jdGlvbnMpIHtcbiAgICBjb25zdCBwcmltaXRpdmVQcm9wcyA9IHtcbiAgICAgIHRhYkluZGV4LFxuICAgICAgY2xhc3NOYW1lOiAnZm9ybS1jb250cm9sJyxcbiAgICAgIGlucHV0UHJvcHM6IHtcbiAgICAgICAgaWQ6IGBvY0RhdGFncmlkRmlsdGVySW5wdXQtJHtncmlkSWR9LSR7Y29sdW1uLmNvbHVtbktleX1gLFxuICAgICAgICBzdHlsZTogY29sdW1uLnN0eWxlLFxuICAgICAgICB0eXBlOiBmb3JtQ29udHJvbFR5cGUsXG4gICAgICB9LFxuICAgICAgdmFsdWU6IGZ1bmN0aW9ucy5nZXRJdGVtVmFsdWUoY29sKSxcbiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbnMub25DZWxsVmFsdWVDaGFuZ2UoY29sLCBmaWx0ZXJWYWx1ZVBhcnNlciksXG4gICAgICAuLi5jb2wuZmlsdGVyQ29tcG9uZW50UHJvcHMsXG4gICAgfTtcbiAgICByZXR1cm4gcHJpbWl0aXZlUmVuZGVyKHsgLi4ucHJpbWl0aXZlUHJvcHMgfSk7XG4gIH0sXG59O1xuIl19