"use strict";

exports.__esModule = true;
exports["default"] = exports.primitiveRender = void 0;

var _react = _interopRequireDefault(require("react"));

var _reactBootstrap = require("react-bootstrap");

var _formatUtils = require("@opuscapita/format-utils");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var primitiveRender = function primitiveRender(primitiveProps) {
  return _react["default"].createElement(_reactBootstrap.FormControl, primitiveProps);
};

exports.primitiveRender = primitiveRender;
var _default = {
  // primitiveNumberValueRender
  numberValRender: function numberValRender(col, rowIndex, thousandSeparator, decimalSeparator, valueRender) {
    var decimals = col.componentType === 'number' ? 0 : 2;
    return valueRender(rowIndex, function (v) {
      return (0, _formatUtils.formatNumber)(v, {
        decimals: col.valueOptions && col.valueOptions.decimals || decimals,
        thousandSeparator: col.valueOptions && col.valueOptions.thousandSeparator || thousandSeparator,
        decimalSeparator: col.valueOptions && col.valueOptions.decimalSeparator || decimalSeparator
      });
    });
  },
  // primitiveCellEdit
  cellEdit: function cellEdit(col, column, rowIndex, tabIndex, gridId, editValueParser, formControlType, functions, getComponentDisabledState) {
    var cellName = 'edit';

    var primitiveProps = _extends({
      id: "ocDatagridEditInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
      style: column.style,
      tabIndex: tabIndex,
      type: formControlType,
      value: functions.getItemValue(rowIndex, col),
      onBlur: functions.onCellBlur(rowIndex, col),
      onKeyDown: functions.onCellKeyDown(rowIndex, col),
      inputRef: functions.handleCellRef(rowIndex, col),
      disabled: getComponentDisabledState(rowIndex, col, cellName),
      onChange: functions.onCellValueChange(rowIndex, col, editValueParser),
      onFocus: functions.onCellFocus(cellName, col.componentType, rowIndex, column.columnKey)
    }, col.editComponentProps);

    return primitiveRender(_extends({}, primitiveProps));
  },
  // primitiveCellCreate
  cellCreate: function cellCreate(col, column, rowIndex, tabIndex, gridId, createValueParser, formControlType, functions, getComponentDisabledState) {
    var cellName = 'create';

    var primitiveProps = _extends({
      id: "ocDatagridCreateInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
      style: column.style,
      tabIndex: tabIndex,
      type: formControlType || col.componentType,
      value: functions.getItemValue(rowIndex, col),
      onBlur: functions.onCellBlur(rowIndex, col),
      onKeyDown: functions.onCellKeyDown(rowIndex, col, false),
      inputRef: functions.handleCellRef(rowIndex, col),
      disabled: getComponentDisabledState(rowIndex, col, cellName),
      onChange: functions.onCellValueChange(rowIndex, col, createValueParser),
      onFocus: functions.onCellFocus(cellName, col.componentType, rowIndex, column.columnKey)
    }, col.createComponentProps);

    return primitiveRender(_extends({}, primitiveProps));
  },
  // primitiveCellFilter
  cellFilter: function cellFilter(col, column, tabIndex, gridId, filterValueParser, formControlType, functions) {
    var primitiveProps = _extends({
      id: "ocDatagridFilterInput-" + gridId + "-" + column.columnKey,
      style: column.style,
      tabIndex: tabIndex,
      type: formControlType,
      value: functions.getItemValue(col),
      onChange: functions.onCellValueChange(col, filterValueParser)
    }, col.filterComponentProps);

    return primitiveRender(_extends({}, primitiveProps));
  }
};
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9kYXRhZ3JpZC9jb2x1bW4tc2VydmljZS9jb2x1bW4tdHlwZXMvcHJpbWl0aXZlLXJlbmRlcmVycy5qc3giXSwibmFtZXMiOlsicHJpbWl0aXZlUmVuZGVyIiwicHJpbWl0aXZlUHJvcHMiLCJudW1iZXJWYWxSZW5kZXIiLCJjb2wiLCJyb3dJbmRleCIsInRob3VzYW5kU2VwYXJhdG9yIiwiZGVjaW1hbFNlcGFyYXRvciIsInZhbHVlUmVuZGVyIiwiZGVjaW1hbHMiLCJjb21wb25lbnRUeXBlIiwidiIsInZhbHVlT3B0aW9ucyIsImNlbGxFZGl0IiwiY29sdW1uIiwidGFiSW5kZXgiLCJncmlkSWQiLCJlZGl0VmFsdWVQYXJzZXIiLCJmb3JtQ29udHJvbFR5cGUiLCJmdW5jdGlvbnMiLCJnZXRDb21wb25lbnREaXNhYmxlZFN0YXRlIiwiY2VsbE5hbWUiLCJpZCIsImNvbHVtbktleSIsInN0eWxlIiwidHlwZSIsInZhbHVlIiwiZ2V0SXRlbVZhbHVlIiwib25CbHVyIiwib25DZWxsQmx1ciIsIm9uS2V5RG93biIsIm9uQ2VsbEtleURvd24iLCJpbnB1dFJlZiIsImhhbmRsZUNlbGxSZWYiLCJkaXNhYmxlZCIsIm9uQ2hhbmdlIiwib25DZWxsVmFsdWVDaGFuZ2UiLCJvbkZvY3VzIiwib25DZWxsRm9jdXMiLCJlZGl0Q29tcG9uZW50UHJvcHMiLCJjZWxsQ3JlYXRlIiwiY3JlYXRlVmFsdWVQYXJzZXIiLCJjcmVhdGVDb21wb25lbnRQcm9wcyIsImNlbGxGaWx0ZXIiLCJmaWx0ZXJWYWx1ZVBhcnNlciIsImZpbHRlckNvbXBvbmVudFByb3BzIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBOztBQUNBOztBQUNBOzs7Ozs7QUFFTyxJQUFNQSxlQUFlLEdBQUcsU0FBbEJBLGVBQWtCLENBQUFDLGNBQWM7QUFBQSxTQUFJLGdDQUFDLDJCQUFELEVBQWlCQSxjQUFqQixDQUFKO0FBQUEsQ0FBdEM7OztlQUVRO0FBQ2I7QUFDQUMsRUFB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RTdCLEVBdUVnRDFCLGVBdkVoRCxFQXVFaUVDLFNBdkVqRSxFQXVFNEU7QUFDdkYsUUFBTWpCLGNBQWM7QUFDbEJvQixNQUFBQSxFQUFFLDZCQUEyQk4sTUFBM0IsU0FBcUNGLE1BQU0sQ0FBQ1MsU0FENUI7QUFFbEJDLE1BQUFBLEtBQUssRUFBRVYsTUFBTSxDQUFDVSxLQUZJO0FBR2xCVCxNQUFBQSxRQUFRLEVBQVJBLFFBSGtCO0FBSWxCVSxNQUFBQSxJQUFJLEVBQUVQLGVBSlk7QUFLbEJRLE1BQUFBLEtBQUssRUFBRVAsU0FBUyxDQUFDUSxZQUFWLENBQXVCdkIsR0FBdkIsQ0FMVztBQU1sQitCLE1BQUFBLFFBQVEsRUFBRWhCLFNBQVMsQ0FBQ2lCLGlCQUFWLENBQTRCaEMsR0FBNUIsRUFBaUN3QyxpQkFBakM7QUFOUSxPQU9meEMsR0FBRyxDQUFDeUMsb0JBUFcsQ0FBcEI7O0FBU0EsV0FBTzVDLGVBQWUsY0FBTUMsY0FBTixFQUF0QjtBQUNEO0FBbEZZLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRm9ybUNvbnRyb2wgfSBmcm9tICdyZWFjdC1ib290c3RyYXAnO1xuaW1wb3J0IHsgZm9ybWF0TnVtYmVyIH0gZnJvbSAnQG9wdXNjYXBpdGEvZm9ybWF0LXV0aWxzJztcblxuZXhwb3J0IGNvbnN0IHByaW1pdGl2ZVJlbmRlciA9IHByaW1pdGl2ZVByb3BzID0+IDxGb3JtQ29udHJvbCB7Li4ucHJpbWl0aXZlUHJvcHN9IC8+O1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8vIHByaW1pdGl2ZU51bWJlclZhbHVlUmVuZGVyXG4gIG51bWJlclZhbFJlbmRlcihjb2wsIHJvd0luZGV4LCB0aG91c2FuZFNlcGFyYXRvciwgZGVjaW1hbFNlcGFyYXRvciwgdmFsdWVSZW5kZXIpIHtcbiAgICBjb25zdCBkZWNpbWFscyA9IGNvbC5jb21wb25lbnRUeXBlID09PSAnbnVtYmVyJyA/IDAgOiAyO1xuICAgIHJldHVybiB2YWx1ZVJlbmRlcihyb3dJbmRleCwgdiA9PiBmb3JtYXROdW1iZXIodiwge1xuICAgICAgZGVjaW1hbHM6IChjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMuZGVjaW1hbHMpIHx8IGRlY2ltYWxzLFxuICAgICAgdGhvdXNhbmRTZXBhcmF0b3I6XG4gICAgICAgICAgKGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy50aG91c2FuZFNlcGFyYXRvcikgfHwgdGhvdXNhbmRTZXBhcmF0b3IsXG4gICAgICBkZWNpbWFsU2VwYXJhdG9yOlxuICAgICAgICAgIChjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMuZGVjaW1hbFNlcGFyYXRvcikgfHwgZGVjaW1hbFNlcGFyYXRvcixcbiAgICB9KSk7XG4gIH0sXG4gIC8vIHByaW1pdGl2ZUNlbGxFZGl0XG4gIGNlbGxFZGl0KFxuICAgIGNvbCxcbiAgICBjb2x1bW4sXG4gICAgcm93SW5kZXgsXG4gICAgdGFiSW5kZXgsXG4gICAgZ3JpZElkLFxuICAgIGVkaXRWYWx1ZVBhcnNlcixcbiAgICBmb3JtQ29udHJvbFR5cGUsXG4gICAgZnVuY3Rpb25zLFxuICAgIGdldENvbXBvbmVudERpc2FibGVkU3RhdGUsXG4gICkge1xuICAgIGNvbnN0IGNlbGxOYW1lID0gJ2VkaXQnO1xuICAgIGNvbnN0IHByaW1pdGl2ZVByb3BzID0ge1xuICAgICAgaWQ6IGBvY0RhdGFncmlkRWRpdElucHV0LSR7Z3JpZElkfS0ke2NvbHVtbi5jb2x1bW5LZXl9LSR7cm93SW5kZXh9YCxcbiAgICAgIHN0eWxlOiBjb2x1bW4uc3R5bGUsXG4gICAgICB0YWJJbmRleCxcbiAgICAgIHR5cGU6IGZvcm1Db250cm9sVHlwZSxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbnMuZ2V0SXRlbVZhbHVlKHJvd0luZGV4LCBjb2wpLFxuICAgICAgb25CbHVyOiBmdW5jdGlvbnMub25DZWxsQmx1cihyb3dJbmRleCwgY29sKSxcbiAgICAgIG9uS2V5RG93bjogZnVuY3Rpb25zLm9uQ2VsbEtleURvd24ocm93SW5kZXgsIGNvbCksXG4gICAgICBpbnB1dFJlZjogZnVuY3Rpb25zLmhhbmRsZUNlbGxSZWYocm93SW5kZXgsIGNvbCksXG4gICAgICBkaXNhYmxlZDogZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZShyb3dJbmRleCwgY29sLCBjZWxsTmFtZSksXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb25zLm9uQ2VsbFZhbHVlQ2hhbmdlKHJvd0luZGV4LCBjb2wsIGVkaXRWYWx1ZVBhcnNlciksXG4gICAgICBvbkZvY3VzOiBmdW5jdGlvbnMub25DZWxsRm9jdXMoY2VsbE5hbWUsIGNvbC5jb21wb25lbnRUeXBlLCByb3dJbmRleCwgY29sdW1uLmNvbHVtbktleSksXG4gICAgICAuLi5jb2wuZWRpdENvbXBvbmVudFByb3BzLFxuICAgIH07XG4gICAgcmV0dXJuIHByaW1pdGl2ZVJlbmRlcih7IC4uLnByaW1pdGl2ZVByb3BzIH0pO1xuICB9LFxuICAvLyBwcmltaXRpdmVDZWxsQ3JlYXRlXG4gIGNlbGxDcmVhdGUoXG4gICAgY29sLFxuICAgIGNvbHVtbixcbiAgICByb3dJbmRleCxcbiAgICB0YWJJbmRleCxcbiAgICBncmlkSWQsXG4gICAgY3JlYXRlVmFsdWVQYXJzZXIsXG4gICAgZm9ybUNvbnRyb2xUeXBlLFxuICAgIGZ1bmN0aW9ucyxcbiAgICBnZXRDb21wb25lbnREaXNhYmxlZFN0YXRlLFxuICApIHtcbiAgICBjb25zdCBjZWxsTmFtZSA9ICdjcmVhdGUnO1xuICAgIGNvbnN0IHByaW1pdGl2ZVByb3BzID0ge1xuICAgICAgaWQ6IGBvY0RhdGFncmlkQ3JlYXRlSW5wdXQtJHtncmlkSWR9LSR7Y29sdW1uLmNvbHVtbktleX0tJHtyb3dJbmRleH1gLFxuICAgICAgc3R5bGU6IGNvbHVtbi5zdHlsZSxcbiAgICAgIHRhYkluZGV4LFxuICAgICAgdHlwZTogZm9ybUNvbnRyb2xUeXBlIHx8IGNvbC5jb21wb25lbnRUeXBlLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9ucy5nZXRJdGVtVmFsdWUocm93SW5kZXgsIGNvbCksXG4gICAgICBvbkJsdXI6IGZ1bmN0aW9ucy5vbkNlbGxCbHVyKHJvd0luZGV4LCBjb2wpLFxuICAgICAgb25LZXlEb3duOiBmdW5jdGlvbnMub25DZWxsS2V5RG93bihyb3dJbmRleCwgY29sLCBmYWxzZSksXG4gICAgICBpbnB1dFJlZjogZnVuY3Rpb25zLmhhbmRsZUNlbGxSZWYocm93SW5kZXgsIGNvbCksXG4gICAgICBkaXNhYmxlZDogZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZShyb3dJbmRleCwgY29sLCBjZWxsTmFtZSksXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb25zLm9uQ2VsbFZhbHVlQ2hhbmdlKHJvd0luZGV4LCBjb2wsIGNyZWF0ZVZhbHVlUGFyc2VyKSxcbiAgICAgIG9uRm9jdXM6IGZ1bmN0aW9ucy5vbkNlbGxGb2N1cyhjZWxsTmFtZSwgY29sLmNvbXBvbmVudFR5cGUsIHJvd0luZGV4LCBjb2x1bW4uY29sdW1uS2V5KSxcbiAgICAgIC4uLmNvbC5jcmVhdGVDb21wb25lbnRQcm9wcyxcbiAgICB9O1xuICAgIHJldHVybiBwcmltaXRpdmVSZW5kZXIoeyAuLi5wcmltaXRpdmVQcm9wcyB9KTtcbiAgfSxcbiAgLy8gcHJpbWl0aXZlQ2VsbEZpbHRlclxuICBjZWxsRmlsdGVyKGNvbCwgY29sdW1uLCB0YWJJbmRleCwgZ3JpZElkLCBmaWx0ZXJWYWx1ZVBhcnNlciwgZm9ybUNvbnRyb2xUeXBlLCBmdW5jdGlvbnMpIHtcbiAgICBjb25zdCBwcmltaXRpdmVQcm9wcyA9IHtcbiAgICAgIGlkOiBgb2NEYXRhZ3JpZEZpbHRlcklucHV0LSR7Z3JpZElkfS0ke2NvbHVtbi5jb2x1bW5LZXl9YCxcbiAgICAgIHN0eWxlOiBjb2x1bW4uc3R5bGUsXG4gICAgICB0YWJJbmRleCxcbiAgICAgIHR5cGU6IGZvcm1Db250cm9sVHlwZSxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbnMuZ2V0SXRlbVZhbHVlKGNvbCksXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb25zLm9uQ2VsbFZhbHVlQ2hhbmdlKGNvbCwgZmlsdGVyVmFsdWVQYXJzZXIpLFxuICAgICAgLi4uY29sLmZpbHRlckNvbXBvbmVudFByb3BzLFxuICAgIH07XG4gICAgcmV0dXJuIHByaW1pdGl2ZVJlbmRlcih7IC4uLnByaW1pdGl2ZVByb3BzIH0pO1xuICB9LFxufTtcbiJdfQ==