"use strict";

exports.__esModule = true;
exports["default"] = exports.primitiveRender = void 0;

var _react = _interopRequireDefault(require("react"));

var _reactFormattedInput = _interopRequireDefault(require("@opuscapita/react-formatted-input"));

var _formatUtils = require("@opuscapita/format-utils");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

var primitiveRender = function primitiveRender(formattedInputProps) {
  return _react["default"].createElement(_reactFormattedInput["default"], formattedInputProps);
};

exports.primitiveRender = primitiveRender;
var _default = {
  // primitiveNumberValueRender
  numberValRender: function numberValRender(col, rowIndex, thousandSeparator, decimalSeparator, valueRender) {
    var decimals = col.componentType === 'number' ? 0 : 2;
    return valueRender(rowIndex, function (v) {
      return (0, _formatUtils.formatNumber)(v, {
        decimals: col.valueOptions && col.valueOptions.decimals || decimals,
        thousandSeparator: col.valueOptions && col.valueOptions.thousandSeparator || thousandSeparator,
        decimalSeparator: col.valueOptions && col.valueOptions.decimalSeparator || decimalSeparator
      });
    });
  },
  // primitiveCellEdit
  cellEdit: function cellEdit(col, column, rowIndex, tabIndex, gridId, editValueParser, formControlType, functions, getComponentDisabledState) {
    var cellName = 'edit';

    var primitiveProps = _extends({
      className: 'form-control',
      inputProps: {
        tabIndex: tabIndex,
        disabled: getComponentDisabledState(rowIndex, col, cellName),
        id: "ocDatagridEditInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        onFocus: functions.onCellFocus(cellName, col.componentType, rowIndex, column.columnKey),
        onKeyDown: functions.onCellKeyDown(rowIndex, col),
        ref: functions.handleCellRef(rowIndex, col),
        style: column.style,
        type: formControlType
      },
      value: functions.getItemValue(rowIndex, col),
      onBlur: functions.onCellBlur(rowIndex, col),
      editFormatter: editValueParser,
      onChange: functions.onCellValueChange(rowIndex, col, editValueParser)
    }, col.editComponentProps);

    return primitiveRender(_extends({}, primitiveProps));
  },
  // primitiveCellCreate
  cellCreate: function cellCreate(col, column, rowIndex, tabIndex, gridId, createValueParser, formControlType, functions, getComponentDisabledState) {
    var cellName = 'create';

    var primitiveProps = _extends({
      className: 'form-control',
      inputProps: {
        tabIndex: tabIndex,
        disabled: getComponentDisabledState(rowIndex, col, cellName),
        id: "ocDatagridCreateInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        onFocus: functions.onCellFocus(cellName, col.componentType, rowIndex, column.columnKey),
        onKeyDown: functions.onCellKeyDown(rowIndex, col, false),
        ref: functions.handleCellRef(rowIndex, col),
        style: column.style,
        type: formControlType || col.componentType
      },
      value: functions.getItemValue(rowIndex, col),
      onBlur: functions.onCellBlur(rowIndex, col),
      onChange: functions.onCellValueChange(rowIndex, col, createValueParser)
    }, col.createComponentProps);

    return primitiveRender(_extends({}, primitiveProps));
  },
  // primitiveCellFilter
  cellFilter: function cellFilter(col, column, tabIndex, gridId, filterValueParser, formControlType, functions) {
    var primitiveProps = _extends({
      className: 'form-control',
      inputProps: {
        tabIndex: tabIndex,
        id: "ocDatagridFilterInput-" + gridId + "-" + column.columnKey,
        style: column.style,
        type: formControlType
      },
      value: functions.getItemValue(col),
      onChange: functions.onCellValueChange(col, filterValueParser)
    }, col.filterComponentProps);

    return primitiveRender(_extends({}, primitiveProps));
  }
};
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9kYXRhZ3JpZC9jb2x1bW4tc2VydmljZS9jb2x1bW4tdHlwZXMvcHJpbWl0aXZlLXJlbmRlcmVycy5qc3giXSwibmFtZXMiOlsicHJpbWl0aXZlUmVuZGVyIiwiZm9ybWF0dGVkSW5wdXRQcm9wcyIsIm51bWJlclZhbFJlbmRlciIsImNvbCIsInJvd0luZGV4IiwidGhvdXNhbmRTZXBhcmF0b3IiLCJkZWNpbWFsU2VwYXJhdG9yIiwidmFsdWVSZW5kZXIiLCJkZWNpbWFscyIsImNvbXBvbmVudFR5cGUiLCJ2IiwidmFsdWVPcHRpb25zIiwiY2VsbEVkaXQiLCJjb2x1bW4iLCJ0YWJJbmRleCIsImdyaWRJZCIsImVkaXRWYWx1ZVBhcnNlciIsImZvcm1Db250cm9sVHlwZSIsImZ1bmN0aW9ucyIsImdldENvbXBvbmVudERpc2FibGVkU3RhdGUiLCJjZWxsTmFtZSIsInByaW1pdGl2ZVByb3BzIiwiY2xhc3NOYW1lIiwiaW5wdXRQcm9wcyIsImRpc2FibGVkIiwiaWQiLCJjb2x1bW5LZXkiLCJvbkZvY3VzIiwib25DZWxsRm9jdXMiLCJvbktleURvd24iLCJvbkNlbGxLZXlEb3duIiwicmVmIiwiaGFuZGxlQ2VsbFJlZiIsInN0eWxlIiwidHlwZSIsInZhbHVlIiwiZ2V0SXRlbVZhbHVlIiwib25CbHVyIiwib25DZWxsQmx1ciIsImVkaXRGb3JtYXR0ZXIiLCJvbkNoYW5nZSIsIm9uQ2VsbFZhbHVlQ2hhbmdlIiwiZWRpdENvbXBvbmVudFByb3BzIiwiY2VsbENyZWF0ZSIsImNyZWF0ZVZhbHVlUGFyc2VyIiwiY3JlYXRlQ29tcG9uZW50UHJvcHMiLCJjZWxsRmlsdGVyIiwiZmlsdGVyVmFsdWVQYXJzZXIiLCJmaWx0ZXJDb21wb25lbnRQcm9wcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7Ozs7O0FBRU8sSUFBTUEsZUFBZSxHQUFHLFNBQWxCQSxlQUFrQixDQUFBQyxtQkFBbUI7QUFBQSxTQUNoRCxn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QUF0QyxFQUEyQ3lDLGlCQUEzQztBQWRRLE9BZWZ6QyxHQUFHLENBQUMwQyxvQkFmVyxDQUFwQjs7QUFpQkEsV0FBTzdDLGVBQWUsY0FBTXFCLGNBQU4sRUFBdEI7QUFDRCxHQTdFWTtBQThFYjtBQUNBeUIsRUFBQUEsVUEvRWEsc0JBK0VGM0MsR0EvRUUsRUErRUdVLE1BL0VILEVBK0VXQyxRQS9FWCxFQStFcUJDLE1BL0VyQixFQStFNkJnQyxpQkEvRTdCLEVBK0VnRDlCLGVBL0VoRCxFQStFaUVDLFNBL0VqRSxFQStFNEU7QUFDdkYsUUFBTUcsY0FBYztBQUNsQkMsTUFBQUEsU0FBUyxFQUFFLGNBRE87QUFFbEJDLE1BQUFBLFVBQVUsRUFBRTtBQUNWVCxRQUFBQSxRQUFRLEVBQVJBLFFBRFU7QUFFVlcsUUFBQUEsRUFBRSw2QkFBMkJWLE1BQTNCLFNBQXFDRixNQUFNLENBQUNhLFNBRnBDO0FBR1ZPLFFBQUFBLEtBQUssRUFBRXBCLE1BQU0sQ0FBQ29CLEtBSEo7QUFJVkMsUUFBQUEsSUFBSSxFQUFFakI7QUFKSSxPQUZNO0FBUWxCa0IsTUFBQUEsS0FBSyxFQUFFakIsU0FBUyxDQUFDa0IsWUFBVixDQUF1QmpDLEdBQXZCLENBUlc7QUFTbEJxQyxNQUFBQSxRQUFRLEVBQUV0QixTQUFTLENBQUN1QixpQkFBVixDQUE0QnRDLEdBQTVCLEVBQWlDNEMsaUJBQWpDO0FBVFEsT0FVZjVDLEdBQUcsQ0FBQzZDLG9CQVZXLENBQXBCOztBQVlBLFdBQU9oRCxlQUFlLGNBQU1xQixjQUFOLEVBQXRCO0FBQ0Q7QUE3RlksQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgRm9ybWF0dGVkSW5wdXQgZnJvbSAnQG9wdXNjYXBpdGEvcmVhY3QtZm9ybWF0dGVkLWlucHV0JztcbmltcG9ydCB7IGZvcm1hdE51bWJlciB9IGZyb20gJ0BvcHVzY2FwaXRhL2Zvcm1hdC11dGlscyc7XG5cbmV4cG9ydCBjb25zdCBwcmltaXRpdmVSZW5kZXIgPSBmb3JtYXR0ZWRJbnB1dFByb3BzID0+IChcbiAgPEZvcm1hdHRlZElucHV0IHsuLi5mb3JtYXR0ZWRJbnB1dFByb3BzfSAvPlxuKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAvLyBwcmltaXRpdmVOdW1iZXJWYWx1ZVJlbmRlclxuICBudW1iZXJWYWxSZW5kZXIoY29sLCByb3dJbmRleCwgdGhvdXNhbmRTZXBhcmF0b3IsIGRlY2ltYWxTZXBhcmF0b3IsIHZhbHVlUmVuZGVyKSB7XG4gICAgY29uc3QgZGVjaW1hbHMgPSBjb2wuY29tcG9uZW50VHlwZSA9PT0gJ251bWJlcicgPyAwIDogMjtcbiAgICByZXR1cm4gdmFsdWVSZW5kZXIocm93SW5kZXgsIHYgPT4gZm9ybWF0TnVtYmVyKHYsIHtcbiAgICAgIGRlY2ltYWxzOiAoY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLmRlY2ltYWxzKSB8fCBkZWNpbWFscyxcbiAgICAgIHRob3VzYW5kU2VwYXJhdG9yOlxuICAgICAgICAgIChjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMudGhvdXNhbmRTZXBhcmF0b3IpIHx8IHRob3VzYW5kU2VwYXJhdG9yLFxuICAgICAgZGVjaW1hbFNlcGFyYXRvcjpcbiAgICAgICAgICAoY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLmRlY2ltYWxTZXBhcmF0b3IpIHx8IGRlY2ltYWxTZXBhcmF0b3IsXG4gICAgfSkpO1xuICB9LFxuICAvLyBwcmltaXRpdmVDZWxsRWRpdFxuICBjZWxsRWRpdChcbiAgICBjb2wsXG4gICAgY29sdW1uLFxuICAgIHJvd0luZGV4LFxuICAgIHRhYkluZGV4LFxuICAgIGdyaWRJZCxcbiAgICBlZGl0VmFsdWVQYXJzZXIsXG4gICAgZm9ybUNvbnRyb2xUeXBlLFxuICAgIGZ1bmN0aW9ucyxcbiAgICBnZXRDb21wb25lbnREaXNhYmxlZFN0YXRlLFxuICApIHtcbiAgICBjb25zdCBjZWxsTmFtZSA9ICdlZGl0JztcbiAgICBjb25zdCBwcmltaXRpdmVQcm9wcyA9IHtcbiAgICAgIGNsYXNzTmFtZTogJ2Zvcm0tY29udHJvbCcsXG4gICAgICBpbnB1dFByb3BzOiB7XG4gICAgICAgIHRhYkluZGV4LFxuICAgICAgICBkaXNhYmxlZDogZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZShyb3dJbmRleCwgY29sLCBjZWxsTmFtZSksXG4gICAgICAgIGlkOiBgb2NEYXRhZ3JpZEVkaXRJbnB1dC0ke2dyaWRJZH0tJHtjb2x1bW4uY29sdW1uS2V5fS0ke3Jvd0luZGV4fWAsXG4gICAgICAgIG9uRm9jdXM6IGZ1bmN0aW9ucy5vbkNlbGxGb2N1cyhjZWxsTmFtZSwgY29sLmNvbXBvbmVudFR5cGUsIHJvd0luZGV4LCBjb2x1bW4uY29sdW1uS2V5KSxcbiAgICAgICAgb25LZXlEb3duOiBmdW5jdGlvbnMub25DZWxsS2V5RG93bihyb3dJbmRleCwgY29sKSxcbiAgICAgICAgcmVmOiBmdW5jdGlvbnMuaGFuZGxlQ2VsbFJlZihyb3dJbmRleCwgY29sKSxcbiAgICAgICAgc3R5bGU6IGNvbHVtbi5zdHlsZSxcbiAgICAgICAgdHlwZTogZm9ybUNvbnRyb2xUeXBlLFxuICAgICAgfSxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbnMuZ2V0SXRlbVZhbHVlKHJvd0luZGV4LCBjb2wpLFxuICAgICAgb25CbHVyOiBmdW5jdGlvbnMub25DZWxsQmx1cihyb3dJbmRleCwgY29sKSxcbiAgICAgIGVkaXRGb3JtYXR0ZXI6IGVkaXRWYWx1ZVBhcnNlcixcbiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbnMub25DZWxsVmFsdWVDaGFuZ2Uocm93SW5kZXgsIGNvbCwgZWRpdFZhbHVlUGFyc2VyKSxcbiAgICAgIC4uLmNvbC5lZGl0Q29tcG9uZW50UHJvcHMsXG4gICAgfTtcblxuICAgIHJldHVybiBwcmltaXRpdmVSZW5kZXIoeyAuLi5wcmltaXRpdmVQcm9wcyB9KTtcbiAgfSxcbiAgLy8gcHJpbWl0aXZlQ2VsbENyZWF0ZVxuICBjZWxsQ3JlYXRlKFxuICAgIGNvbCxcbiAgICBjb2x1bW4sXG4gICAgcm93SW5kZXgsXG4gICAgdGFiSW5kZXgsXG4gICAgZ3JpZElkLFxuICAgIGNyZWF0ZVZhbHVlUGFyc2VyLFxuICAgIGZvcm1Db250cm9sVHlwZSxcbiAgICBmdW5jdGlvbnMsXG4gICAgZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZSxcbiAgKSB7XG4gICAgY29uc3QgY2VsbE5hbWUgPSAnY3JlYXRlJztcbiAgICBjb25zdCBwcmltaXRpdmVQcm9wcyA9IHtcbiAgICAgIGNsYXNzTmFtZTogJ2Zvcm0tY29udHJvbCcsXG4gICAgICBpbnB1dFByb3BzOiB7XG4gICAgICAgIHRhYkluZGV4LFxuICAgICAgICBkaXNhYmxlZDogZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZShyb3dJbmRleCwgY29sLCBjZWxsTmFtZSksXG4gICAgICAgIGlkOiBgb2NEYXRhZ3JpZENyZWF0ZUlucHV0LSR7Z3JpZElkfS0ke2NvbHVtbi5jb2x1bW5LZXl9LSR7cm93SW5kZXh9YCxcbiAgICAgICAgb25Gb2N1czogZnVuY3Rpb25zLm9uQ2VsbEZvY3VzKGNlbGxOYW1lLCBjb2wuY29tcG9uZW50VHlwZSwgcm93SW5kZXgsIGNvbHVtbi5jb2x1bW5LZXkpLFxuICAgICAgICBvbktleURvd246IGZ1bmN0aW9ucy5vbkNlbGxLZXlEb3duKHJvd0luZGV4LCBjb2wsIGZhbHNlKSxcbiAgICAgICAgcmVmOiBmdW5jdGlvbnMuaGFuZGxlQ2VsbFJlZihyb3dJbmRleCwgY29sKSxcbiAgICAgICAgc3R5bGU6IGNvbHVtbi5zdHlsZSxcbiAgICAgICAgdHlwZTogZm9ybUNvbnRyb2xUeXBlIHx8IGNvbC5jb21wb25lbnRUeXBlLFxuICAgICAgfSxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbnMuZ2V0SXRlbVZhbHVlKHJvd0luZGV4LCBjb2wpLFxuICAgICAgb25CbHVyOiBmdW5jdGlvbnMub25DZWxsQmx1cihyb3dJbmRleCwgY29sKSxcbiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbnMub25DZWxsVmFsdWVDaGFuZ2Uocm93SW5kZXgsIGNvbCwgY3JlYXRlVmFsdWVQYXJzZXIpLFxuICAgICAgLi4uY29sLmNyZWF0ZUNvbXBvbmVudFByb3BzLFxuICAgIH07XG4gICAgcmV0dXJuIHByaW1pdGl2ZVJlbmRlcih7IC4uLnByaW1pdGl2ZVByb3BzIH0pO1xuICB9LFxuICAvLyBwcmltaXRpdmVDZWxsRmlsdGVyXG4gIGNlbGxGaWx0ZXIoY29sLCBjb2x1bW4sIHRhYkluZGV4LCBncmlkSWQsIGZpbHRlclZhbHVlUGFyc2VyLCBmb3JtQ29udHJvbFR5cGUsIGZ1bmN0aW9ucykge1xuICAgIGNvbnN0IHByaW1pdGl2ZVByb3BzID0ge1xuICAgICAgY2xhc3NOYW1lOiAnZm9ybS1jb250cm9sJyxcbiAgICAgIGlucHV0UHJvcHM6IHtcbiAgICAgICAgdGFiSW5kZXgsXG4gICAgICAgIGlkOiBgb2NEYXRhZ3JpZEZpbHRlcklucHV0LSR7Z3JpZElkfS0ke2NvbHVtbi5jb2x1bW5LZXl9YCxcbiAgICAgICAgc3R5bGU6IGNvbHVtbi5zdHlsZSxcbiAgICAgICAgdHlwZTogZm9ybUNvbnRyb2xUeXBlLFxuICAgICAgfSxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbnMuZ2V0SXRlbVZhbHVlKGNvbCksXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb25zLm9uQ2VsbFZhbHVlQ2hhbmdlKGNvbCwgZmlsdGVyVmFsdWVQYXJzZXIpLFxuICAgICAgLi4uY29sLmZpbHRlckNvbXBvbmVudFByb3BzLFxuICAgIH07XG4gICAgcmV0dXJuIHByaW1pdGl2ZVJlbmRlcih7IC4uLnByaW1pdGl2ZVByb3BzIH0pO1xuICB9LFxufTtcbiJdfQ==