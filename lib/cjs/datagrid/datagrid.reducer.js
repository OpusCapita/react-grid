'use strict';

exports.__esModule = true;
exports.default = datagridReducer;

var _immutable = require('immutable');

var _immutable2 = _interopRequireDefault(_immutable);

var _datagrid = require('./datagrid.actions');

var _datagrid2 = require('./datagrid.constants');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function datagridReducer() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _datagrid2.INITIAL_STATE;
  var action = arguments[1];

  switch (action.type) {
    case _datagrid.TYPES.PLATFORM_DATAGRID_INVALIDATE:
      return state.deleteIn([action.id, 'data']).deleteIn([action.id, 'allData']).deleteIn([action.id, 'session']).deleteIn([action.id, 'selectedCell']).deleteIn([action.id, 'editData']).deleteIn([action.id, 'createData']).deleteIn([action.id, 'createCellMessages']).deleteIn([action.id, 'cellMessages']);

    case _datagrid.TYPES.PLATFORM_DATAGRID_FORCE_REFRESH:
      // no need to alter redux state on force refesh
      return state;

    case _datagrid.TYPES.PLATFORM_DATAGRID_SET_DATA:
      return state.setIn([action.id, 'data'], action.data).setIn([action.id, 'allData'], action.data).setIn([action.id, 'config'], _immutable2.default.fromJS(action.config)).setIn([action.id, 'selectedItems'], _immutable2.default.fromJS(action.selectedItems)).mergeIn([action.id, 'session'], {
        isEditing: false,
        isCreating: false,
        isBusy: false
      }).deleteIn([action.id, 'selectedCell']).deleteIn([action.id, 'editData']).deleteIn([action.id, 'createData']).deleteIn([action.id, 'createCellMessages']).deleteIn([action.id, 'cellMessages']);

    case _datagrid.TYPES.PLATFORM_DATAGRID_BUSY:
      return state.setIn([action.id, 'session', 'isBusy'], true);

    case _datagrid.TYPES.PLATFORM_DATAGRID_READY:
      return state.setIn([action.id, 'session', 'isBusy'], false);

    case _datagrid.TYPES.PLATFORM_DATAGRID_APPLY_SORT:
      return state.setIn([action.id, 'data'], action.data).setIn([action.id, 'allData'], action.allData);

    case _datagrid.TYPES.PLATFORM_DATAGRID_SORT_CHANGE:
      return state.setIn([action.id, 'config', 'sortingData'], (0, _immutable.Map)({
        sortColumn: action.sortColumn,
        sortOrder: action.sortOrder
      }));

    case _datagrid.TYPES.PLATFORM_DATAGRID_RESIZE_COLUMN:
      return state.setIn([action.id, 'config', 'columnWidths'], action.columnWidths);

    case _datagrid.TYPES.PLATFORM_DATAGRID_EDIT:
      return state.setIn([action.id, 'session', 'isEditing'], true);

    case _datagrid.TYPES.PLATFORM_DATAGRID_CREATE:
      return state.setIn([action.id, 'createData'], (0, _immutable.List)([_immutable2.default.fromJS(action.columnDefaultValues)])).deleteIn([action.id, 'selectedCell']).mergeIn([action.id, 'session'], {
        isCreating: true
      });

    case _datagrid.TYPES.PLATFORM_DATAGRID_ADD_NEW_ITEM:
      return state.updateIn([action.id, 'createData'], (0, _immutable.List)(), function (items) {
        return items.push(_immutable2.default.fromJS(action.columnDefaultValues));
      });

    case _datagrid.TYPES.PLATFORM_DATAGRID_REMOVE_ITEM:
      {
        var allDataIndex = state.getIn([action.id, 'allData'], (0, _immutable.List)()).findIndex(function (item) {
          return item.getIn(action.idKeyPath) === action.rowId;
        });
        var dataIndex = state.getIn([action.id, 'data'], (0, _immutable.List)()).findIndex(function (item) {
          return item.getIn(action.idKeyPath) === action.rowId;
        });
        return state.deleteIn([action.id, 'data', dataIndex]).deleteIn([action.id, 'allData', allDataIndex]).deleteIn([action.id, 'editData', action.rowId]).deleteIn([action.id, 'cellMessages', 'error', action.rowId]).deleteIn([action.id, 'cellMessages', 'info', action.rowId]).deleteIn([action.id, 'cellMessages', 'warning', action.rowId]);
      }

    case _datagrid.TYPES.PLATFORM_DATAGRID_SET_FOCUS_TO:
      {
        // focus type is saved as a immutable Map to make it easier to detect changes
        // when requesting same type of focus several times
        return state.setIn([action.id, 'session', 'focusType'], (0, _immutable.Map)({ type: action.focusTo, focusToLastRow: action.focusToLastRow }));
      }

    case _datagrid.TYPES.PLATFORM_DATAGRID_REMOVE_NEW_ITEM:
      return state.deleteIn([action.id, 'createData', action.index]);

    case _datagrid.TYPES.PLATFORM_DATAGRID_REMOVE_NEW_ITEMS:
      return state.setIn([action.id, 'createData'], state.getIn([action.id, 'createData'], (0, _immutable.List)()).filter(function (val, idx) {
        return action.indexes.indexOf(idx) === -1;
      }));

    case _datagrid.TYPES.PLATFORM_DATAGRID_CANCEL:
      return state.mergeIn([action.id, 'session'], (0, _immutable.Map)({
        isEditing: false,
        isCreating: false
      })).deleteIn([action.id, 'editData']).deleteIn([action.id, 'createData']).deleteIn([action.id, 'createCellMessages', 'error']).deleteIn([action.id, 'cellMessages', 'error']);

    case _datagrid.TYPES.PLATFORM_DATAGRID_SAVE:
      return state.setIn([action.id, 'session', 'isBusy'], true);

    case _datagrid.TYPES.PLATFORM_DATAGRID_EXTEND_DATA:
      {
        var allData = state.getIn([action.id, 'allData']);
        var extendedData = action.prepend ? action.data.concat(allData) : allData.concat(action.data);

        return state.setIn([action.id, 'data'], extendedData).setIn([action.id, 'allData'], extendedData);
      }

    case _datagrid.TYPES.PLATFORM_DATAGRID_SAVE_SUCCESS:
      {
        var _allData = state.getIn([action.id, 'allData']);
        action.savedItems.forEach(function (savedItemJS) {
          var savedItem = _immutable2.default.fromJS(savedItemJS);
          var foundIndex = _allData.findIndex(function (d) {
            return d.getIn(action.idKeyPath) === savedItem.getIn(action.idKeyPath);
          });
          if (foundIndex === -1) {
            _allData = _allData.push(savedItem);
          } else {
            _allData = _allData.mergeDeepIn([foundIndex], savedItem);
          }
        });
        return state.setIn([action.id, 'data'], _allData).setIn([action.id, 'allData'], _allData).mergeIn([action.id, 'session'], {
          isBusy: false,
          isEditing: false,
          isCreating: false
        }).deleteIn([action.id, 'editData']).deleteIn([action.id, 'createData']).deleteIn([action.id, 'createCellMessages', 'error']).deleteIn([action.id, 'cellMessages', 'error']);
      }

    case _datagrid.TYPES.PLATFORM_DATAGRID_SAVE_PARTIAL_SUCCESS:
      {
        var _allData2 = state.getIn([action.id, 'allData']);
        var createData = state.getIn([action.id, 'createData']);
        var editData = state.getIn([action.id, 'editData']);
        var isCreating = state.getIn([action.id, 'session', 'isCreating']);
        action.savedItems.forEach(function (savedItemJS) {
          var savedItem = _immutable2.default.fromJS(savedItemJS);
          var foundIndex = _allData2.findIndex(function (d) {
            return d.getIn(action.idKeyPath) === savedItem.getIn(action.idKeyPath);
          });
          if (foundIndex === -1) {
            _allData2 = _allData2.push(savedItem);
          } else {
            _allData2 = _allData2.mergeDeepIn([foundIndex], savedItem);
          }
          if (isCreating) {
            foundIndex = savedItem.get('rowIndex');
            if (foundIndex !== undefined && foundIndex !== null) {
              createData = createData.delete(foundIndex);
            }
          } else {
            editData = editData.delete(savedItem.getIn(action.idKeyPath));
          }
        });
        return state.setIn([action.id, 'data'], _allData2).setIn([action.id, 'allData'], _allData2).setIn([action.id, 'createData'], createData).setIn([action.id, 'editData'], editData).setIn([action.id, 'session', 'isBusy'], false);
      }

    case _datagrid.TYPES.PLATFORM_DATAGRID_SAVE_FAIL:
      return state.setIn([action.id, 'session', 'isBusy'], false);

    case _datagrid.TYPES.PLATFORM_DATAGRID_REMOVE:
      return state.setIn([action.id, 'session', 'isBusy'], true);

    case _datagrid.TYPES.PLATFORM_DATAGRID_REMOVE_SUCCESS:
      return state.setIn([action.id, 'session', 'isBusy'], false).updateIn([action.id, 'data'], function (data) {
        return data.filterNot(function (item) {
          return action.removedIds.indexOf(item.getIn(action.idKeyPath)) > -1;
        });
      }).updateIn([action.id, 'allData'], function (data) {
        return data.filterNot(function (item) {
          return action.removedIds.indexOf(item.getIn(action.idKeyPath)) > -1;
        });
      }).deleteIn([action.id, 'selectedItems']);

    case _datagrid.TYPES.PLATFORM_DATAGRID_REMOVE_FAIL:
      return state.setIn([action.id, 'session', 'isBusy'], false);

    case _datagrid.TYPES.PLATFORM_DATAGRID_EDIT_CELL_VALUE_CHANGE:
      return state.setIn([action.id, 'editData', action.dataId].concat(action.keyPath), action.value);

    case _datagrid.TYPES.PLATFORM_DATAGRID_CREATE_CELL_VALUE_CHANGE:
      return state.setIn([action.id, 'createData', action.rowIndex].concat(action.keyPath), action.value);

    case _datagrid.TYPES.PLATFORM_DATAGRID_CELL_SHOW_MESSAGE:
      return state.setIn([action.id, 'cellMessages', action.messageType, action.dataId].concat(action.keyPath), { id: action.messageId, values: action.messageValues });

    case _datagrid.TYPES.PLATFORM_DATAGRID_CELL_SHOW_MESSAGES:
      return state.mergeIn([action.id, 'cellMessages'], _immutable2.default.fromJS(action.messages));

    case _datagrid.TYPES.PLATFORM_DATAGRID_CELL_HIDE_MESSAGE:
      {
        if (action.messageType === null) {
          return state.deleteIn([action.id, 'cellMessages']);
        }
        if (action.dataId === null) {
          return state.deleteIn([action.id, 'cellMessages', action.messageType]);
        }
        var rowMessage = state.getIn([action.id, 'cellMessages', action.messageType, action.dataId]);
        if (rowMessage) {
          if (action.keyPath) {
            rowMessage = rowMessage.deleteIn(action.keyPath);
          }
          if (rowMessage.size === 0 || !action.keyPath) {
            return state.deleteIn([action.id, 'cellMessages', action.messageType, action.dataId]);
          }
          return state.setIn([action.id, 'cellMessages', action.messageType, action.dataId], rowMessage);
        }
        return state;
      }

    case _datagrid.TYPES.PLATFORM_DATAGRID_CREATE_CELL_SHOW_MESSAGE:
      return state.setIn([action.id, 'createCellMessages', action.messageType, action.rowIndex].concat(action.keyPath), { id: action.messageId, values: action.messageValues });

    case _datagrid.TYPES.PLATFORM_DATAGRID_CREATE_CELL_HIDE_MESSAGE:
      {
        if (action.messageType === null) {
          return state.deleteIn([action.id, 'createCellMessages']);
        }
        if (action.rowIndex === null) {
          return state.deleteIn([action.id, 'createCellMessages', action.messageType]);
        }
        var _rowMessage = state.getIn([action.id, 'createCellMessages', action.messageType, action.rowIndex]);
        if (_rowMessage) {
          if (action.keyPath) {
            _rowMessage = _rowMessage.deleteIn(action.keyPath);
          }
          if (_rowMessage.size === 0 || !action.keyPath) {
            return state.deleteIn([action.id, 'createCellMessages', action.messageType, action.rowIndex]);
          }
          return state.setIn([action.id, 'createCellMessages', action.messageType, action.rowIndex], _rowMessage);
        }
        return state;
      }

    case _datagrid.TYPES.PLATFORM_DATAGRID_CELL_SELECTION_CHANGE:
      return state.setIn([action.id, 'selectedCell'], action.selectedCell);

    case _datagrid.TYPES.PLATFORM_DATAGRID_ITEM_SELECTION_CHANGE:
      {
        var newState = state.setIn([action.id, 'session', 'lastClickedRowIndex'], action.rowIndex);

        // Handle case where shift key is pressed
        // Select all rows from lastClickedRow to currently clicked row
        if (action.shiftPressed) {
          var lastRowIndex = state.getIn([action.id, 'session', 'lastClickedRowIndex'], false);
          if (lastRowIndex !== false) {
            var selectRowIds = [];
            if (lastRowIndex < action.rowIndex) {
              for (var i = lastRowIndex; i <= action.rowIndex; i += 1) {
                var _dataId = state.getIn([action.id, 'data', i].concat(action.idKeyPath));
                if (_dataId) {
                  selectRowIds.push(_dataId);
                }
              }
            } else {
              for (var _i = action.rowIndex; _i <= lastRowIndex; _i += 1) {
                var _dataId2 = state.getIn([action.id, 'data', _i].concat(action.idKeyPath));
                if (_dataId2) {
                  selectRowIds.push(_dataId2);
                }
              }
            }
            return newState.setIn([action.id, 'selectedItems'], (0, _immutable.List)(selectRowIds));
          }
        }

        var dataId = state.getIn([action.id, 'data', action.rowIndex].concat(action.idKeyPath));
        var foundIndex = state.getIn([action.id, 'selectedItems'], (0, _immutable.List)()).indexOf(dataId);
        if (foundIndex === -1) {
          if (action.ctrlPressed) {
            return newState.updateIn([action.id, 'selectedItems'], (0, _immutable.List)(), function (items) {
              return items.push(dataId);
            });
          }
          return newState.setIn([action.id, 'selectedItems'], (0, _immutable.List)([dataId]));
        }
        if (action.ctrlPressed) {
          return newState.updateIn([action.id, 'selectedItems'], function (items) {
            return items.delete(foundIndex);
          });
        }
        return newState.setIn([action.id, 'selectedItems'], (0, _immutable.List)([dataId]));
      }

    case _datagrid.TYPES.PLATFORM_DATAGRID_SELECT_ALL_ITEMS_CHANGE:
      if (state.getIn([action.id, 'selectedItems'], (0, _immutable.List)()).size === state.getIn([action.id, 'data'], (0, _immutable.List)()).size) {
        return state.deleteIn([action.id, 'selectedItems']);
      }
      return state.setIn([action.id, 'selectedItems'], state.getIn([action.id, 'data'], (0, _immutable.List)()).map(function (item) {
        return item.getIn(action.idKeyPath);
      }));

    case _datagrid.TYPES.PLATFORM_DATAGRID_CLEAR_SELECTED_ITEMS:
      return state.deleteIn([action.id, 'selectedItems']);

    case _datagrid.TYPES.PLATFORM_DATAGRID_TOGGLE_FILTERING:
      {
        if (!action.isFiltering) {
          return state.setIn([action.id, 'config', 'filteringData'], (0, _immutable.Map)({ isFiltering: false })).setIn([action.id, 'data'], state.getIn([action.id, 'allData']));
        }
        return state.setIn([action.id, 'config', 'filteringData'], (0, _immutable.Map)({ isFiltering: true }));
      }

    case _datagrid.TYPES.PLATFORM_DATAGRID_FILTER_DATA_CHANGE:
      return state.setIn([action.id, 'config', 'filteringData', 'filterData'], action.filterData);

    case _datagrid.TYPES.PLATFORM_DATAGRID_APPLY_FILTERS:
      return state.setIn([action.id, 'data'], action.data);

    case _datagrid.TYPES.PLATFORM_DATAGRID_SET_FILTERS:
      return state.setIn([action.id, 'config', 'filteringData'], action.filteringData);

    case _datagrid.TYPES.PLATFORM_DATAGRID_UPDATE_EXISTING_CELL_VALUE:
      {
        var _newState = state.setIn([action.id, 'allData', action.dataId].concat(action.keyPath), action.value);
        if (state.hasIn([action.id, 'data', action.dataId].concat(action.keyPath))) {
          return _newState.setIn([action.id, 'data', action.dataId].concat(action.keyPath), action.value);
        }
        return _newState;
      }

    case _datagrid.TYPES.PLATFORM_DATAGRID_SET_EDIT_DATA:
      return state.setIn([action.id, 'session', 'isEditing'], true).setIn([action.id, 'editData'], action.data).setIn([action.id, 'cellMessages'], action.cellMessages);

    case _datagrid.TYPES.PLATFORM_DATAGRID_COLUMN_SETTINGS_MODAL_OPEN:
      return state.setIn([action.id, 'session', 'columnSettingsModal', 'open'], true);

    case _datagrid.TYPES.PLATFORM_DATAGRID_COLUMN_SETTINGS_MODAL_CLOSE:
      return state.deleteIn([action.id, 'session', 'columnSettingsModal']);

    case _datagrid.TYPES.PLATFORM_DATAGRID_COLUMN_SETTINGS_SAVE:
      return state.setIn([action.id, 'config', 'visibleColumns'], _immutable2.default.fromJS(action.columnOrder));

    default:
      return state;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9kYXRhZ3JpZC9kYXRhZ3JpZC5yZWR1Y2VyLmpzIl0sIm5hbWVzIjpbImRhdGFncmlkUmVkdWNlciIsInN0YXRlIiwiSU5JVElBTF9TVEFURSIsImFjdGlvbiIsInR5cGUiLCJUWVBFUyIsIlBMQVRGT1JNX0RBVEFHUklEX0lOVkFMSURBVEUiLCJkZWxldGVJbiIsImlkIiwiUExBVEZPUk1fREFUQUdSSURfRk9SQ0VfUkVGUkVTSCIsIlBMQVRGT1JNX0RBVEFHUklEX1NFVF9EQVRBIiwic2V0SW4iLCJkYXRhIiwiSW1tdXRhYmxlIiwiZnJvbUpTIiwiY29uZmlnIiwic2VsZWN0ZWRJdGVtcyIsIm1lcmdlSW4iLCJpc0VkaXRpbmciLCJpc0NyZWF0aW5nIiwiaXNCdXN5IiwiUExBVEZPUk1fREFUQUdSSURfQlVTWSIsIlBMQVRGT1JNX0RBVEFHUklEX1JFQURZIiwiUExBVEZPUk1fREFUQUdSSURfQVBQTFlfU09SVCIsImFsbERhdGEiLCJQTEFURk9STV9EQVRBR1JJRF9TT1JUX0NIQU5HRSIsInNvcnRDb2x1bW4iLCJzb3J0T3JkZXIiLCJQTEFURk9STV9EQVRBR1JJRF9SRVNJWkVfQ09MVU1OIiwiY29sdW1uV2lkdGhzIiwiUExBVEZPUk1fREFUQUdSSURfRURJVCIsIlBMQVRGT1JNX0RBVEFHUklEX0NSRUFURSIsImNvbHVtbkRlZmF1bHRWYWx1ZXMiLCJQTEFURk9STV9EQVRBR1JJRF9BRERfTkVXX0lURU0iLCJ1cGRhdGVJbiIsIml0ZW1zIiwicHVzaCIsIlBMQVRGT1JNX0RBVEFHUklEX1JFTU9WRV9JVEVNIiwiYWxsRGF0YUluZGV4IiwiZ2V0SW4iLCJmaW5kSW5kZXgiLCJpdGVtIiwiaWRLZXlQYXRoIiwicm93SWQiLCJkYXRhSW5kZXgiLCJQTEFURk9STV9EQVRBR1JJRF9TRVRfRk9DVVNfVE8iLCJmb2N1c1RvIiwiZm9jdXNUb0xhc3RSb3ciLCJQTEFURk9STV9EQVRBR1JJRF9SRU1PVkVfTkVXX0lURU0iLCJpbmRleCIsIlBMQVRGT1JNX0RBVEFHUklEX1JFTU9WRV9ORVdfSVRFTVMiLCJmaWx0ZXIiLCJ2YWwiLCJpZHgiLCJpbmRleGVzIiwiaW5kZXhPZiIsIlBMQVRGT1JNX0RBVEFHUklEX0NBTkNFTCIsIlBMQVRGT1JNX0RBVEFHUklEX1NBVkUiLCJQTEFURk9STV9EQVRBR1JJRF9FWFRFTkRfREFUQSIsImV4dGVuZGVkRGF0YSIsInByZXBlbmQiLCJjb25jYXQiLCJQTEFURk9STV9EQVRBR1JJRF9TQVZFX1NVQ0NFU1MiLCJzYXZlZEl0ZW1zIiwiZm9yRWFjaCIsInNhdmVkSXRlbUpTIiwic2F2ZWRJdGVtIiwiZm91bmRJbmRleCIsImQiLCJtZXJnZURlZXBJbiIsIlBMQVRGT1JNX0RBVEFHUklEX1NBVkVfUEFSVElBTF9TVUNDRVNTIiwiY3JlYXRlRGF0YSIsImVkaXREYXRhIiwiZ2V0IiwidW5kZWZpbmVkIiwiZGVsZXRlIiwiUExBVEZPUk1fREFUQUdSSURfU0FWRV9GQUlMIiwiUExBVEZPUk1fREFUQUdSSURfUkVNT1ZFIiwiUExBVEZPUk1fREFUQUdSSURfUkVNT1ZFX1NVQ0NFU1MiLCJmaWx0ZXJOb3QiLCJyZW1vdmVkSWRzIiwiUExBVEZPUk1fREFUQUdSSURfUkVNT1ZFX0ZBSUwiLCJQTEFURk9STV9EQVRBR1JJRF9FRElUX0NFTExfVkFMVUVfQ0hBTkdFIiwiZGF0YUlkIiwia2V5UGF0aCIsInZhbHVlIiwiUExBVEZPUk1fREFUQUdSSURfQ1JFQVRFX0NFTExfVkFMVUVfQ0hBTkdFIiwicm93SW5kZXgiLCJQTEFURk9STV9EQVRBR1JJRF9DRUxMX1NIT1dfTUVTU0FHRSIsIm1lc3NhZ2VUeXBlIiwibWVzc2FnZUlkIiwidmFsdWVzIiwibWVzc2FnZVZhbHVlcyIsIlBMQVRGT1JNX0RBVEFHUklEX0NFTExfU0hPV19NRVNTQUdFUyIsIm1lc3NhZ2VzIiwiUExBVEZPUk1fREFUQUdSSURfQ0VMTF9ISURFX01FU1NBR0UiLCJyb3dNZXNzYWdlIiwic2l6ZSIsIlBMQVRGT1JNX0RBVEFHUklEX0NSRUFURV9DRUxMX1NIT1dfTUVTU0FHRSIsIlBMQVRGT1JNX0RBVEFHUklEX0NSRUFURV9DRUxMX0hJREVfTUVTU0FHRSIsIlBMQVRGT1JNX0RBVEFHUklEX0NFTExfU0VMRUNUSU9OX0NIQU5HRSIsInNlbGVjdGVkQ2VsbCIsIlBMQVRGT1JNX0RBVEFHUklEX0lURU1fU0VMRUNUSU9OX0NIQU5HRSIsIm5ld1N0YXRlIiwic2hpZnRQcmVzc2VkIiwibGFzdFJvd0luZGV4Iiwic2VsZWN0Um93SWRzIiwiaSIsImN0cmxQcmVzc2VkIiwiUExBVEZPUk1fREFUQUdSSURfU0VMRUNUX0FMTF9JVEVNU19DSEFOR0UiLCJtYXAiLCJQTEFURk9STV9EQVRBR1JJRF9DTEVBUl9TRUxFQ1RFRF9JVEVNUyIsIlBMQVRGT1JNX0RBVEFHUklEX1RPR0dMRV9GSUxURVJJTkciLCJpc0ZpbHRlcmluZyIsIlBMQVRGT1JNX0RBVEFHUklEX0ZJTFRFUl9EQVRBX0NIQU5HRSIsImZpbHRlckRhdGEiLCJQTEFURk9STV9EQVRBR1JJRF9BUFBMWV9GSUxURVJTIiwiUExBVEZPUk1fREFUQUdSSURfU0VUX0ZJTFRFUlMiLCJmaWx0ZXJpbmdEYXRhIiwiUExBVEZPUk1fREFUQUdSSURfVVBEQVRFX0VYSVNUSU5HX0NFTExfVkFMVUUiLCJoYXNJbiIsIlBMQVRGT1JNX0RBVEFHUklEX1NFVF9FRElUX0RBVEEiLCJjZWxsTWVzc2FnZXMiLCJQTEFURk9STV9EQVRBR1JJRF9DT0xVTU5fU0VUVElOR1NfTU9EQUxfT1BFTiIsIlBMQVRGT1JNX0RBVEFHUklEX0NPTFVNTl9TRVRUSU5HU19NT0RBTF9DTE9TRSIsIlBMQVRGT1JNX0RBVEFHUklEX0NPTFVNTl9TRVRUSU5HU19TQVZFIiwiY29sdW1uT3JkZXIiXSwibWFwcGluZ3MiOiI7OztrQkFJd0JBLGU7O0FBSnhCOzs7O0FBQ0E7O0FBQ0E7Ozs7QUFFZSxTQUFTQSxlQUFULEdBQXdEO0FBQUEsTUFBL0JDLEtBQStCLHVFQUF2QkMsd0JBQXVCO0FBQUEsTUFBUkMsTUFBUTs7QUFDckUsVUFBUUEs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QixDQURGLEVBQ3VDLElBRHZDLEVBRUpHLEtBRkksQ0FFRSxDQUFDUixPQUFPSyxFQUFSLEVBQVksVUFBWixDQUZGLEVBRTJCTCxPQUFPUyxJQUZsQyxFQUdKRCxLQUhJLENBR0UsQ0FBQ1IsT0FBT0ssRUFBUixFQUFZLGNBQVosQ0FIRixFQUcrQkwsT0FBT3VILFlBSHRDLENBQVA7O0FBS0YsU0FBS3JILGdCQUFNc0gsNENBQVg7QUFDRSxhQUFPMUgsTUFBTVUsS0FBTixDQUFZLENBQUNSLE9BQU9LLEVBQVIsRUFBWSxTQUFaLEVBQXVCLHFCQUF2QixFQUE4QyxNQUE5QyxDQUFaLEVBQW1FLElBQW5FLENBQVA7O0FBRUYsU0FBS0gsZ0JBQU11SCw2Q0FBWDtBQUNFLGFBQU8zSCxNQUFNTSxRQUFOLENBQWUsQ0FBQ0osT0FBT0ssRUFBUixFQUFZLFNBQVosRUFBdUIscUJBQXZCLENBQWYsQ0FBUDs7QUFFRixTQUFLSCxnQkFBTXdILHNDQUFYO0FBQ0UsYUFBTzVILE1BQ0pVLEtBREksQ0FDRSxDQUFDUixPQUFPSyxFQUFSLEVBQVksUUFBWixFQUFzQixnQkFBdEIsQ0FERixFQUMyQ0ssb0JBQVVDLE1BQVYsQ0FBaUJYLE9BQU8ySCxXQUF4QixDQUQzQyxDQUFQOztBQUdGO0FBQ0UsYUFBTzdILEtBQVA7QUE3Yko7QUErYkQiLCJmaWxlIjoiZGF0YWdyaWQucmVkdWNlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBJbW11dGFibGUsIHsgTWFwLCBMaXN0IH0gZnJvbSAnaW1tdXRhYmxlJztcbmltcG9ydCB7IFRZUEVTIH0gZnJvbSAnLi9kYXRhZ3JpZC5hY3Rpb25zJztcbmltcG9ydCB7IElOSVRJQUxfU1RBVEUgfSBmcm9tICcuL2RhdGFncmlkLmNvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRhdGFncmlkUmVkdWNlcihzdGF0ZSA9IElOSVRJQUxfU1RBVEUsIGFjdGlvbikge1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBUWVBFUy5QTEFURk9STV9EQVRBR1JJRF9JTlZBTElEQVRFOlxuICAgICAgcmV0dXJuIHN0YXRlXG4gICAgICAgIC5kZWxldGVJbihbYWN0aW9uLmlkLCAnZGF0YSddKVxuICAgICAgICAuZGVsZXRlSW4oW2FjdGlvbi5pZCwgJ2FsbERhdGEnXSlcbiAgICAgICAgLmRlbGV0ZUluKFthY3Rpb24uaWQsICdzZXNzaW9uJ10pXG4gICAgICAgIC5kZWxldGVJbihbYWN0aW9uLmlkLCAnc2VsZWN0ZWRDZWxsJ10pXG4gICAgICAgIC5kZWxldGVJbihbYWN0aW9uLmlkLCAnZWRpdERhdGEnXSlcbiAgICAgICAgLmRlbGV0ZUluKFthY3Rpb24uaWQsICdjcmVhdGVEYXRhJ10pXG4gICAgICAgIC5kZWxldGVJbihbYWN0aW9uLmlkLCAnY3JlYXRlQ2VsbE1lc3NhZ2VzJ10pXG4gICAgICAgIC5kZWxldGVJbihbYWN0aW9uLmlkLCAnY2VsbE1lc3NhZ2VzJ10pO1xuXG4gICAgY2FzZSBUWVBFUy5QTEFURk9STV9EQVRBR1JJRF9GT1JDRV9SRUZSRVNIOlxuICAgICAgLy8gbm8gbmVlZCB0byBhbHRlciByZWR1eCBzdGF0ZSBvbiBmb3JjZSByZWZlc2hcbiAgICAgIHJldHVybiBzdGF0ZTtcblxuICAgIGNhc2UgVFlQRVMuUExBVEZPUk1fREFUQUdSSURfU0VUX0RBVEE6XG4gICAgICByZXR1cm4gc3RhdGVcbiAgICAgICAgLnNldEluKFthY3Rpb24uaWQsICdkYXRhJ10sIGFjdGlvbi5kYXRhKVxuICAgICAgICAuc2V0SW4oW2FjdGlvbi5pZCwgJ2FsbERhdGEnXSwgYWN0aW9uLmRhdGEpXG4gICAgICAgIC5zZXRJbihbYWN0aW9uLmlkLCAnY29uZmlnJ10sIEltbXV0YWJsZS5mcm9tSlMoYWN0aW9uLmNvbmZpZykpXG4gICAgICAgIC5zZXRJbihbYWN0aW9uLmlkLCAnc2VsZWN0ZWRJdGVtcyddLCBJbW11dGFibGUuZnJvbUpTKGFjdGlvbi5zZWxlY3RlZEl0ZW1zKSlcbiAgICAgICAgLm1lcmdlSW4oW2FjdGlvbi5pZCwgJ3Nlc3Npb24nXSwge1xuICAgICAgICAgIGlzRWRpdGluZzogZmFsc2UsXG4gICAgICAgICAgaXNDcmVhdGluZzogZmFsc2UsXG4gICAgICAgICAgaXNCdXN5OiBmYWxzZSxcbiAgICAgICAgfSlcbiAgICAgICAgLmRlbGV0ZUluKFthY3Rpb24uaWQsICdzZWxlY3RlZENlbGwnXSlcbiAgICAgICAgLmRlbGV0ZUluKFthY3Rpb24uaWQsICdlZGl0RGF0YSddKVxuICAgICAgICAuZGVsZXRlSW4oW2FjdGlvbi5pZCwgJ2NyZWF0ZURhdGEnXSlcbiAgICAgICAgLmRlbGV0ZUluKFthY3Rpb24uaWQsICdjcmVhdGVDZWxsTWVzc2FnZXMnXSlcbiAgICAgICAgLmRlbGV0ZUluKFthY3Rpb24uaWQsICdjZWxsTWVzc2FnZXMnXSk7XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX0JVU1k6XG4gICAgICByZXR1cm4gc3RhdGUuc2V0SW4oW2FjdGlvbi5pZCwgJ3Nlc3Npb24nLCAnaXNCdXN5J10sIHRydWUpO1xuXG4gICAgY2FzZSBUWVBFUy5QTEFURk9STV9EQVRBR1JJRF9SRUFEWTpcbiAgICAgIHJldHVybiBzdGF0ZS5zZXRJbihbYWN0aW9uLmlkLCAnc2Vzc2lvbicsICdpc0J1c3knXSwgZmFsc2UpO1xuXG4gICAgY2FzZSBUWVBFUy5QTEFURk9STV9EQVRBR1JJRF9BUFBMWV9TT1JUOlxuICAgICAgcmV0dXJuIHN0YXRlXG4gICAgICAgIC5zZXRJbihbYWN0aW9uLmlkLCAnZGF0YSddLCBhY3Rpb24uZGF0YSlcbiAgICAgICAgLnNldEluKFthY3Rpb24uaWQsICdhbGxEYXRhJ10sIGFjdGlvbi5hbGxEYXRhKTtcblxuICAgIGNhc2UgVFlQRVMuUExBVEZPUk1fREFUQUdSSURfU09SVF9DSEFOR0U6XG4gICAgICByZXR1cm4gc3RhdGVcbiAgICAgICAgLnNldEluKFthY3Rpb24uaWQsICdjb25maWcnLCAnc29ydGluZ0RhdGEnXSwgTWFwKHtcbiAgICAgICAgICBzb3J0Q29sdW1uOiBhY3Rpb24uc29ydENvbHVtbixcbiAgICAgICAgICBzb3J0T3JkZXI6IGFjdGlvbi5zb3J0T3JkZXIsXG4gICAgICAgIH0pKTtcblxuICAgIGNhc2UgVFlQRVMuUExBVEZPUk1fREFUQUdSSURfUkVTSVpFX0NPTFVNTjpcbiAgICAgIHJldHVybiBzdGF0ZS5zZXRJbihbYWN0aW9uLmlkLCAnY29uZmlnJywgJ2NvbHVtbldpZHRocyddLCBhY3Rpb24uY29sdW1uV2lkdGhzKTtcblxuICAgIGNhc2UgVFlQRVMuUExBVEZPUk1fREFUQUdSSURfRURJVDpcbiAgICAgIHJldHVybiBzdGF0ZS5zZXRJbihbYWN0aW9uLmlkLCAnc2Vzc2lvbicsICdpc0VkaXRpbmcnXSwgdHJ1ZSk7XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX0NSRUFURTpcbiAgICAgIHJldHVybiBzdGF0ZVxuICAgICAgICAuc2V0SW4oW2FjdGlvbi5pZCwgJ2NyZWF0ZURhdGEnXSwgTGlzdChbSW1tdXRhYmxlLmZyb21KUyhhY3Rpb24uY29sdW1uRGVmYXVsdFZhbHVlcyldKSlcbiAgICAgICAgLmRlbGV0ZUluKFthY3Rpb24uaWQsICdzZWxlY3RlZENlbGwnXSlcbiAgICAgICAgLm1lcmdlSW4oW2FjdGlvbi5pZCwgJ3Nlc3Npb24nXSwge1xuICAgICAgICAgIGlzQ3JlYXRpbmc6IHRydWUsXG4gICAgICAgIH0pO1xuXG4gICAgY2FzZSBUWVBFUy5QTEFURk9STV9EQVRBR1JJRF9BRERfTkVXX0lURU06XG4gICAgICByZXR1cm4gc3RhdGVcbiAgICAgICAgLnVwZGF0ZUluKFtcbiAgICAgICAgICBhY3Rpb24uaWQsXG4gICAgICAgICAgJ2NyZWF0ZURhdGEnLFxuICAgICAgICBdLCBMaXN0KCksIGl0ZW1zID0+IGl0ZW1zLnB1c2goSW1tdXRhYmxlLmZyb21KUyhhY3Rpb24uY29sdW1uRGVmYXVsdFZhbHVlcykpKTtcblxuICAgIGNhc2UgVFlQRVMuUExBVEZPUk1fREFUQUdSSURfUkVNT1ZFX0lURU06IHtcbiAgICAgIGNvbnN0IGFsbERhdGFJbmRleCA9IHN0YXRlLmdldEluKFthY3Rpb24uaWQsICdhbGxEYXRhJ10sIExpc3QoKSlcbiAgICAgICAgLmZpbmRJbmRleChpdGVtID0+IChpdGVtLmdldEluKGFjdGlvbi5pZEtleVBhdGgpID09PSBhY3Rpb24ucm93SWQpKTtcbiAgICAgIGNvbnN0IGRhdGFJbmRleCA9IHN0YXRlLmdldEluKFthY3Rpb24uaWQsICdkYXRhJ10sIExpc3QoKSlcbiAgICAgICAgLmZpbmRJbmRleChpdGVtID0+IChpdGVtLmdldEluKGFjdGlvbi5pZEtleVBhdGgpID09PSBhY3Rpb24ucm93SWQpKTtcbiAgICAgIHJldHVybiBzdGF0ZVxuICAgICAgICAuZGVsZXRlSW4oW2FjdGlvbi5pZCwgJ2RhdGEnLCBkYXRhSW5kZXhdKVxuICAgICAgICAuZGVsZXRlSW4oW2FjdGlvbi5pZCwgJ2FsbERhdGEnLCBhbGxEYXRhSW5kZXhdKVxuICAgICAgICAuZGVsZXRlSW4oW2FjdGlvbi5pZCwgJ2VkaXREYXRhJywgYWN0aW9uLnJvd0lkXSlcbiAgICAgICAgLmRlbGV0ZUluKFthY3Rpb24uaWQsICdjZWxsTWVzc2FnZXMnLCAnZXJyb3InLCBhY3Rpb24ucm93SWRdKVxuICAgICAgICAuZGVsZXRlSW4oW2FjdGlvbi5pZCwgJ2NlbGxNZXNzYWdlcycsICdpbmZvJywgYWN0aW9uLnJvd0lkXSlcbiAgICAgICAgLmRlbGV0ZUluKFthY3Rpb24uaWQsICdjZWxsTWVzc2FnZXMnLCAnd2FybmluZycsIGFjdGlvbi5yb3dJZF0pO1xuICAgIH1cblxuICAgIGNhc2UgVFlQRVMuUExBVEZPUk1fREFUQUdSSURfU0VUX0ZPQ1VTX1RPOiB7XG4gICAgICAvLyBmb2N1cyB0eXBlIGlzIHNhdmVkIGFzIGEgaW1tdXRhYmxlIE1hcCB0byBtYWtlIGl0IGVhc2llciB0byBkZXRlY3QgY2hhbmdlc1xuICAgICAgLy8gd2hlbiByZXF1ZXN0aW5nIHNhbWUgdHlwZSBvZiBmb2N1cyBzZXZlcmFsIHRpbWVzXG4gICAgICByZXR1cm4gc3RhdGUuc2V0SW4oXG4gICAgICAgIFthY3Rpb24uaWQsICdzZXNzaW9uJywgJ2ZvY3VzVHlwZSddLFxuICAgICAgICBNYXAoeyB0eXBlOiBhY3Rpb24uZm9jdXNUbywgZm9jdXNUb0xhc3RSb3c6IGFjdGlvbi5mb2N1c1RvTGFzdFJvdyB9KSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY2FzZSBUWVBFUy5QTEFURk9STV9EQVRBR1JJRF9SRU1PVkVfTkVXX0lURU06XG4gICAgICByZXR1cm4gc3RhdGUuZGVsZXRlSW4oW2FjdGlvbi5pZCwgJ2NyZWF0ZURhdGEnLCBhY3Rpb24uaW5kZXhdKTtcblxuICAgIGNhc2UgVFlQRVMuUExBVEZPUk1fREFUQUdSSURfUkVNT1ZFX05FV19JVEVNUzpcbiAgICAgIHJldHVybiBzdGF0ZVxuICAgICAgICAuc2V0SW4oXG4gICAgICAgICAgW2FjdGlvbi5pZCwgJ2NyZWF0ZURhdGEnXSxcbiAgICAgICAgICBzdGF0ZVxuICAgICAgICAgICAgLmdldEluKFthY3Rpb24uaWQsICdjcmVhdGVEYXRhJ10sIExpc3QoKSlcbiAgICAgICAgICAgIC5maWx0ZXIoKHZhbCwgaWR4KSA9PiBhY3Rpb24uaW5kZXhlcy5pbmRleE9mKGlkeCkgPT09IC0xKSxcbiAgICAgICAgKTtcblxuICAgIGNhc2UgVFlQRVMuUExBVEZPUk1fREFUQUdSSURfQ0FOQ0VMOlxuICAgICAgcmV0dXJuIHN0YXRlXG4gICAgICAgIC5tZXJnZUluKFthY3Rpb24uaWQsICdzZXNzaW9uJ10sIE1hcCh7XG4gICAgICAgICAgaXNFZGl0aW5nOiBmYWxzZSxcbiAgICAgICAgICBpc0NyZWF0aW5nOiBmYWxzZSxcbiAgICAgICAgfSkpXG4gICAgICAgIC5kZWxldGVJbihbYWN0aW9uLmlkLCAnZWRpdERhdGEnXSlcbiAgICAgICAgLmRlbGV0ZUluKFthY3Rpb24uaWQsICdjcmVhdGVEYXRhJ10pXG4gICAgICAgIC5kZWxldGVJbihbYWN0aW9uLmlkLCAnY3JlYXRlQ2VsbE1lc3NhZ2VzJywgJ2Vycm9yJ10pXG4gICAgICAgIC5kZWxldGVJbihbYWN0aW9uLmlkLCAnY2VsbE1lc3NhZ2VzJywgJ2Vycm9yJ10pO1xuXG4gICAgY2FzZSBUWVBFUy5QTEFURk9STV9EQVRBR1JJRF9TQVZFOlxuICAgICAgcmV0dXJuIHN0YXRlLnNldEluKFthY3Rpb24uaWQsICdzZXNzaW9uJywgJ2lzQnVzeSddLCB0cnVlKTtcblxuICAgIGNhc2UgVFlQRVMuUExBVEZPUk1fREFUQUdSSURfRVhURU5EX0RBVEE6IHtcbiAgICAgIGNvbnN0IGFsbERhdGEgPSBzdGF0ZS5nZXRJbihbYWN0aW9uLmlkLCAnYWxsRGF0YSddKTtcbiAgICAgIGNvbnN0IGV4dGVuZGVkRGF0YSA9IGFjdGlvbi5wcmVwZW5kID9cbiAgICAgICAgYWN0aW9uLmRhdGEuY29uY2F0KGFsbERhdGEpIDogYWxsRGF0YS5jb25jYXQoYWN0aW9uLmRhdGEpO1xuXG4gICAgICByZXR1cm4gc3RhdGVcbiAgICAgICAgLnNldEluKFthY3Rpb24uaWQsICdkYXRhJ10sIGV4dGVuZGVkRGF0YSlcbiAgICAgICAgLnNldEluKFthY3Rpb24uaWQsICdhbGxEYXRhJ10sIGV4dGVuZGVkRGF0YSk7XG4gICAgfVxuXG4gICAgY2FzZSBUWVBFUy5QTEFURk9STV9EQVRBR1JJRF9TQVZFX1NVQ0NFU1M6IHtcbiAgICAgIGxldCBhbGxEYXRhID0gc3RhdGUuZ2V0SW4oW2FjdGlvbi5pZCwgJ2FsbERhdGEnXSk7XG4gICAgICBhY3Rpb24uc2F2ZWRJdGVtcy5mb3JFYWNoKChzYXZlZEl0ZW1KUykgPT4ge1xuICAgICAgICBjb25zdCBzYXZlZEl0ZW0gPSBJbW11dGFibGUuZnJvbUpTKHNhdmVkSXRlbUpTKTtcbiAgICAgICAgY29uc3QgZm91bmRJbmRleCA9IGFsbERhdGEuZmluZEluZGV4KGQgPT4gKFxuICAgICAgICAgIGQuZ2V0SW4oYWN0aW9uLmlkS2V5UGF0aCkgPT09IHNhdmVkSXRlbS5nZXRJbihhY3Rpb24uaWRLZXlQYXRoKVxuICAgICAgICApKTtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgYWxsRGF0YSA9IGFsbERhdGEucHVzaChzYXZlZEl0ZW0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFsbERhdGEgPSBhbGxEYXRhLm1lcmdlRGVlcEluKFtmb3VuZEluZGV4XSwgc2F2ZWRJdGVtKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gc3RhdGVcbiAgICAgICAgLnNldEluKFthY3Rpb24uaWQsICdkYXRhJ10sIGFsbERhdGEpXG4gICAgICAgIC5zZXRJbihbYWN0aW9uLmlkLCAnYWxsRGF0YSddLCBhbGxEYXRhKVxuICAgICAgICAubWVyZ2VJbihbYWN0aW9uLmlkLCAnc2Vzc2lvbiddLCB7XG4gICAgICAgICAgaXNCdXN5OiBmYWxzZSxcbiAgICAgICAgICBpc0VkaXRpbmc6IGZhbHNlLFxuICAgICAgICAgIGlzQ3JlYXRpbmc6IGZhbHNlLFxuICAgICAgICB9KVxuICAgICAgICAuZGVsZXRlSW4oW2FjdGlvbi5pZCwgJ2VkaXREYXRhJ10pXG4gICAgICAgIC5kZWxldGVJbihbYWN0aW9uLmlkLCAnY3JlYXRlRGF0YSddKVxuICAgICAgICAuZGVsZXRlSW4oW2FjdGlvbi5pZCwgJ2NyZWF0ZUNlbGxNZXNzYWdlcycsICdlcnJvciddKVxuICAgICAgICAuZGVsZXRlSW4oW2FjdGlvbi5pZCwgJ2NlbGxNZXNzYWdlcycsICdlcnJvciddKTtcbiAgICB9XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX1NBVkVfUEFSVElBTF9TVUNDRVNTOiB7XG4gICAgICBsZXQgYWxsRGF0YSA9IHN0YXRlLmdldEluKFthY3Rpb24uaWQsICdhbGxEYXRhJ10pO1xuICAgICAgbGV0IGNyZWF0ZURhdGEgPSBzdGF0ZS5nZXRJbihbYWN0aW9uLmlkLCAnY3JlYXRlRGF0YSddKTtcbiAgICAgIGxldCBlZGl0RGF0YSA9IHN0YXRlLmdldEluKFthY3Rpb24uaWQsICdlZGl0RGF0YSddKTtcbiAgICAgIGNvbnN0IGlzQ3JlYXRpbmcgPSBzdGF0ZS5nZXRJbihbYWN0aW9uLmlkLCAnc2Vzc2lvbicsICdpc0NyZWF0aW5nJ10pO1xuICAgICAgYWN0aW9uLnNhdmVkSXRlbXMuZm9yRWFjaCgoc2F2ZWRJdGVtSlMpID0+IHtcbiAgICAgICAgY29uc3Qgc2F2ZWRJdGVtID0gSW1tdXRhYmxlLmZyb21KUyhzYXZlZEl0ZW1KUyk7XG4gICAgICAgIGxldCBmb3VuZEluZGV4ID0gYWxsRGF0YS5maW5kSW5kZXgoZCA9PiAoXG4gICAgICAgICAgZC5nZXRJbihhY3Rpb24uaWRLZXlQYXRoKSA9PT0gc2F2ZWRJdGVtLmdldEluKGFjdGlvbi5pZEtleVBhdGgpXG4gICAgICAgICkpO1xuICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICBhbGxEYXRhID0gYWxsRGF0YS5wdXNoKHNhdmVkSXRlbSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxsRGF0YSA9IGFsbERhdGEubWVyZ2VEZWVwSW4oW2ZvdW5kSW5kZXhdLCBzYXZlZEl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0NyZWF0aW5nKSB7XG4gICAgICAgICAgZm91bmRJbmRleCA9IHNhdmVkSXRlbS5nZXQoJ3Jvd0luZGV4Jyk7XG4gICAgICAgICAgaWYgKGZvdW5kSW5kZXggIT09IHVuZGVmaW5lZCAmJiBmb3VuZEluZGV4ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjcmVhdGVEYXRhID0gY3JlYXRlRGF0YS5kZWxldGUoZm91bmRJbmRleCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVkaXREYXRhID0gZWRpdERhdGEuZGVsZXRlKHNhdmVkSXRlbS5nZXRJbihhY3Rpb24uaWRLZXlQYXRoKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHN0YXRlXG4gICAgICAgIC5zZXRJbihbYWN0aW9uLmlkLCAnZGF0YSddLCBhbGxEYXRhKVxuICAgICAgICAuc2V0SW4oW2FjdGlvbi5pZCwgJ2FsbERhdGEnXSwgYWxsRGF0YSlcbiAgICAgICAgLnNldEluKFthY3Rpb24uaWQsICdjcmVhdGVEYXRhJ10sIGNyZWF0ZURhdGEpXG4gICAgICAgIC5zZXRJbihbYWN0aW9uLmlkLCAnZWRpdERhdGEnXSwgZWRpdERhdGEpXG4gICAgICAgIC5zZXRJbihbYWN0aW9uLmlkLCAnc2Vzc2lvbicsICdpc0J1c3knXSwgZmFsc2UpO1xuICAgIH1cblxuICAgIGNhc2UgVFlQRVMuUExBVEZPUk1fREFUQUdSSURfU0FWRV9GQUlMOlxuICAgICAgcmV0dXJuIHN0YXRlLnNldEluKFthY3Rpb24uaWQsICdzZXNzaW9uJywgJ2lzQnVzeSddLCBmYWxzZSk7XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX1JFTU9WRTpcbiAgICAgIHJldHVybiBzdGF0ZS5zZXRJbihbYWN0aW9uLmlkLCAnc2Vzc2lvbicsICdpc0J1c3knXSwgdHJ1ZSk7XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX1JFTU9WRV9TVUNDRVNTOlxuICAgICAgcmV0dXJuIHN0YXRlXG4gICAgICAgIC5zZXRJbihbYWN0aW9uLmlkLCAnc2Vzc2lvbicsICdpc0J1c3knXSwgZmFsc2UpXG4gICAgICAgIC51cGRhdGVJbihbYWN0aW9uLmlkLCAnZGF0YSddLCBkYXRhID0+IGRhdGEuZmlsdGVyTm90KGl0ZW0gPT4gKFxuICAgICAgICAgIGFjdGlvbi5yZW1vdmVkSWRzLmluZGV4T2YoaXRlbS5nZXRJbihhY3Rpb24uaWRLZXlQYXRoKSkgPiAtMVxuICAgICAgICApKSlcbiAgICAgICAgLnVwZGF0ZUluKFthY3Rpb24uaWQsICdhbGxEYXRhJ10sIGRhdGEgPT4gZGF0YS5maWx0ZXJOb3QoaXRlbSA9PiAoXG4gICAgICAgICAgYWN0aW9uLnJlbW92ZWRJZHMuaW5kZXhPZihpdGVtLmdldEluKGFjdGlvbi5pZEtleVBhdGgpKSA+IC0xXG4gICAgICAgICkpKVxuICAgICAgICAuZGVsZXRlSW4oW2FjdGlvbi5pZCwgJ3NlbGVjdGVkSXRlbXMnXSk7XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX1JFTU9WRV9GQUlMOlxuICAgICAgcmV0dXJuIHN0YXRlLnNldEluKFthY3Rpb24uaWQsICdzZXNzaW9uJywgJ2lzQnVzeSddLCBmYWxzZSk7XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX0VESVRfQ0VMTF9WQUxVRV9DSEFOR0U6XG4gICAgICByZXR1cm4gc3RhdGVcbiAgICAgICAgLnNldEluKFxuICAgICAgICAgIFthY3Rpb24uaWQsICdlZGl0RGF0YScsIGFjdGlvbi5kYXRhSWQsIC4uLmFjdGlvbi5rZXlQYXRoXSxcbiAgICAgICAgICBhY3Rpb24udmFsdWUsXG4gICAgICAgICk7XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX0NSRUFURV9DRUxMX1ZBTFVFX0NIQU5HRTpcbiAgICAgIHJldHVybiBzdGF0ZVxuICAgICAgICAuc2V0SW4oXG4gICAgICAgICAgW2FjdGlvbi5pZCwgJ2NyZWF0ZURhdGEnLCBhY3Rpb24ucm93SW5kZXgsIC4uLmFjdGlvbi5rZXlQYXRoXSxcbiAgICAgICAgICBhY3Rpb24udmFsdWUsXG4gICAgICAgICk7XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX0NFTExfU0hPV19NRVNTQUdFOlxuICAgICAgcmV0dXJuIHN0YXRlXG4gICAgICAgIC5zZXRJbihcbiAgICAgICAgICBbYWN0aW9uLmlkLCAnY2VsbE1lc3NhZ2VzJywgYWN0aW9uLm1lc3NhZ2VUeXBlLCBhY3Rpb24uZGF0YUlkLCAuLi5hY3Rpb24ua2V5UGF0aF0sXG4gICAgICAgICAgeyBpZDogYWN0aW9uLm1lc3NhZ2VJZCwgdmFsdWVzOiBhY3Rpb24ubWVzc2FnZVZhbHVlcyB9LFxuICAgICAgICApO1xuXG4gICAgY2FzZSBUWVBFUy5QTEFURk9STV9EQVRBR1JJRF9DRUxMX1NIT1dfTUVTU0FHRVM6XG4gICAgICByZXR1cm4gc3RhdGUubWVyZ2VJbihbYWN0aW9uLmlkLCAnY2VsbE1lc3NhZ2VzJ10sIEltbXV0YWJsZS5mcm9tSlMoYWN0aW9uLm1lc3NhZ2VzKSk7XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX0NFTExfSElERV9NRVNTQUdFOiB7XG4gICAgICBpZiAoYWN0aW9uLm1lc3NhZ2VUeXBlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZS5kZWxldGVJbihbYWN0aW9uLmlkLCAnY2VsbE1lc3NhZ2VzJ10pO1xuICAgICAgfVxuICAgICAgaWYgKGFjdGlvbi5kYXRhSWQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlLmRlbGV0ZUluKFthY3Rpb24uaWQsICdjZWxsTWVzc2FnZXMnLCBhY3Rpb24ubWVzc2FnZVR5cGVdKTtcbiAgICAgIH1cbiAgICAgIGxldCByb3dNZXNzYWdlID0gc3RhdGUuZ2V0SW4oW2FjdGlvbi5pZCwgJ2NlbGxNZXNzYWdlcycsIGFjdGlvbi5tZXNzYWdlVHlwZSwgYWN0aW9uLmRhdGFJZF0pO1xuICAgICAgaWYgKHJvd01lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGFjdGlvbi5rZXlQYXRoKSB7XG4gICAgICAgICAgcm93TWVzc2FnZSA9IHJvd01lc3NhZ2UuZGVsZXRlSW4oYWN0aW9uLmtleVBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyb3dNZXNzYWdlLnNpemUgPT09IDAgfHwgIWFjdGlvbi5rZXlQYXRoKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlLmRlbGV0ZUluKFthY3Rpb24uaWQsICdjZWxsTWVzc2FnZXMnLCBhY3Rpb24ubWVzc2FnZVR5cGUsIGFjdGlvbi5kYXRhSWRdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGUuc2V0SW4oXG4gICAgICAgICAgW2FjdGlvbi5pZCwgJ2NlbGxNZXNzYWdlcycsIGFjdGlvbi5tZXNzYWdlVHlwZSwgYWN0aW9uLmRhdGFJZF0sXG4gICAgICAgICAgcm93TWVzc2FnZSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX0NSRUFURV9DRUxMX1NIT1dfTUVTU0FHRTpcbiAgICAgIHJldHVybiBzdGF0ZVxuICAgICAgICAuc2V0SW4oXG4gICAgICAgICAgW2FjdGlvbi5pZCwgJ2NyZWF0ZUNlbGxNZXNzYWdlcycsIGFjdGlvbi5tZXNzYWdlVHlwZSwgYWN0aW9uLnJvd0luZGV4LCAuLi5hY3Rpb24ua2V5UGF0aF0sXG4gICAgICAgICAgeyBpZDogYWN0aW9uLm1lc3NhZ2VJZCwgdmFsdWVzOiBhY3Rpb24ubWVzc2FnZVZhbHVlcyB9LFxuICAgICAgICApO1xuXG4gICAgY2FzZSBUWVBFUy5QTEFURk9STV9EQVRBR1JJRF9DUkVBVEVfQ0VMTF9ISURFX01FU1NBR0U6IHtcbiAgICAgIGlmIChhY3Rpb24ubWVzc2FnZVR5cGUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlLmRlbGV0ZUluKFthY3Rpb24uaWQsICdjcmVhdGVDZWxsTWVzc2FnZXMnXSk7XG4gICAgICB9XG4gICAgICBpZiAoYWN0aW9uLnJvd0luZGV4ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZS5kZWxldGVJbihbYWN0aW9uLmlkLCAnY3JlYXRlQ2VsbE1lc3NhZ2VzJywgYWN0aW9uLm1lc3NhZ2VUeXBlXSk7XG4gICAgICB9XG4gICAgICBsZXQgcm93TWVzc2FnZSA9IHN0YXRlLmdldEluKFtcbiAgICAgICAgYWN0aW9uLmlkLFxuICAgICAgICAnY3JlYXRlQ2VsbE1lc3NhZ2VzJyxcbiAgICAgICAgYWN0aW9uLm1lc3NhZ2VUeXBlLFxuICAgICAgICBhY3Rpb24ucm93SW5kZXgsXG4gICAgICBdKTtcbiAgICAgIGlmIChyb3dNZXNzYWdlKSB7XG4gICAgICAgIGlmIChhY3Rpb24ua2V5UGF0aCkge1xuICAgICAgICAgIHJvd01lc3NhZ2UgPSByb3dNZXNzYWdlLmRlbGV0ZUluKGFjdGlvbi5rZXlQYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocm93TWVzc2FnZS5zaXplID09PSAwIHx8ICFhY3Rpb24ua2V5UGF0aCkge1xuICAgICAgICAgIHJldHVybiBzdGF0ZS5kZWxldGVJbihbXG4gICAgICAgICAgICBhY3Rpb24uaWQsXG4gICAgICAgICAgICAnY3JlYXRlQ2VsbE1lc3NhZ2VzJyxcbiAgICAgICAgICAgIGFjdGlvbi5tZXNzYWdlVHlwZSxcbiAgICAgICAgICAgIGFjdGlvbi5yb3dJbmRleCxcbiAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGUuc2V0SW4oXG4gICAgICAgICAgW2FjdGlvbi5pZCwgJ2NyZWF0ZUNlbGxNZXNzYWdlcycsIGFjdGlvbi5tZXNzYWdlVHlwZSwgYWN0aW9uLnJvd0luZGV4XSxcbiAgICAgICAgICByb3dNZXNzYWdlLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cblxuICAgIGNhc2UgVFlQRVMuUExBVEZPUk1fREFUQUdSSURfQ0VMTF9TRUxFQ1RJT05fQ0hBTkdFOlxuICAgICAgcmV0dXJuIHN0YXRlLnNldEluKFthY3Rpb24uaWQsICdzZWxlY3RlZENlbGwnXSwgYWN0aW9uLnNlbGVjdGVkQ2VsbCk7XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX0lURU1fU0VMRUNUSU9OX0NIQU5HRToge1xuICAgICAgY29uc3QgbmV3U3RhdGUgPSBzdGF0ZS5zZXRJbihbYWN0aW9uLmlkLCAnc2Vzc2lvbicsICdsYXN0Q2xpY2tlZFJvd0luZGV4J10sIGFjdGlvbi5yb3dJbmRleCk7XG5cbiAgICAgIC8vIEhhbmRsZSBjYXNlIHdoZXJlIHNoaWZ0IGtleSBpcyBwcmVzc2VkXG4gICAgICAvLyBTZWxlY3QgYWxsIHJvd3MgZnJvbSBsYXN0Q2xpY2tlZFJvdyB0byBjdXJyZW50bHkgY2xpY2tlZCByb3dcbiAgICAgIGlmIChhY3Rpb24uc2hpZnRQcmVzc2VkKSB7XG4gICAgICAgIGNvbnN0IGxhc3RSb3dJbmRleCA9IHN0YXRlLmdldEluKFthY3Rpb24uaWQsICdzZXNzaW9uJywgJ2xhc3RDbGlja2VkUm93SW5kZXgnXSwgZmFsc2UpO1xuICAgICAgICBpZiAobGFzdFJvd0luZGV4ICE9PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnN0IHNlbGVjdFJvd0lkcyA9IFtdO1xuICAgICAgICAgIGlmIChsYXN0Um93SW5kZXggPCBhY3Rpb24ucm93SW5kZXgpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBsYXN0Um93SW5kZXg7IGkgPD0gYWN0aW9uLnJvd0luZGV4OyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgY29uc3QgZGF0YUlkID0gc3RhdGUuZ2V0SW4oW2FjdGlvbi5pZCwgJ2RhdGEnLCBpLCAuLi5hY3Rpb24uaWRLZXlQYXRoXSk7XG4gICAgICAgICAgICAgIGlmIChkYXRhSWQpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RSb3dJZHMucHVzaChkYXRhSWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBhY3Rpb24ucm93SW5kZXg7IGkgPD0gbGFzdFJvd0luZGV4OyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgY29uc3QgZGF0YUlkID0gc3RhdGUuZ2V0SW4oW2FjdGlvbi5pZCwgJ2RhdGEnLCBpLCAuLi5hY3Rpb24uaWRLZXlQYXRoXSk7XG4gICAgICAgICAgICAgIGlmIChkYXRhSWQpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RSb3dJZHMucHVzaChkYXRhSWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBuZXdTdGF0ZVxuICAgICAgICAgICAgLnNldEluKFxuICAgICAgICAgICAgICBbYWN0aW9uLmlkLCAnc2VsZWN0ZWRJdGVtcyddLFxuICAgICAgICAgICAgICBMaXN0KHNlbGVjdFJvd0lkcyksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGFJZCA9IHN0YXRlLmdldEluKFthY3Rpb24uaWQsICdkYXRhJywgYWN0aW9uLnJvd0luZGV4LCAuLi5hY3Rpb24uaWRLZXlQYXRoXSk7XG4gICAgICBjb25zdCBmb3VuZEluZGV4ID0gc3RhdGVcbiAgICAgICAgLmdldEluKFthY3Rpb24uaWQsICdzZWxlY3RlZEl0ZW1zJ10sIExpc3QoKSkuaW5kZXhPZihkYXRhSWQpO1xuICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSB7XG4gICAgICAgIGlmIChhY3Rpb24uY3RybFByZXNzZWQpIHtcbiAgICAgICAgICByZXR1cm4gbmV3U3RhdGVcbiAgICAgICAgICAgIC51cGRhdGVJbihcbiAgICAgICAgICAgICAgW2FjdGlvbi5pZCwgJ3NlbGVjdGVkSXRlbXMnXSxcbiAgICAgICAgICAgICAgTGlzdCgpLCBpdGVtcyA9PiBpdGVtcy5wdXNoKGRhdGFJZCksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdTdGF0ZVxuICAgICAgICAgIC5zZXRJbihcbiAgICAgICAgICAgIFthY3Rpb24uaWQsICdzZWxlY3RlZEl0ZW1zJ10sXG4gICAgICAgICAgICBMaXN0KFtkYXRhSWRdKSxcbiAgICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKGFjdGlvbi5jdHJsUHJlc3NlZCkge1xuICAgICAgICByZXR1cm4gbmV3U3RhdGVcbiAgICAgICAgICAudXBkYXRlSW4oXG4gICAgICAgICAgICBbYWN0aW9uLmlkLCAnc2VsZWN0ZWRJdGVtcyddLFxuICAgICAgICAgICAgaXRlbXMgPT4gaXRlbXMuZGVsZXRlKGZvdW5kSW5kZXgpLFxuICAgICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3U3RhdGVcbiAgICAgICAgLnNldEluKFxuICAgICAgICAgIFthY3Rpb24uaWQsICdzZWxlY3RlZEl0ZW1zJ10sXG4gICAgICAgICAgTGlzdChbZGF0YUlkXSksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgY2FzZSBUWVBFUy5QTEFURk9STV9EQVRBR1JJRF9TRUxFQ1RfQUxMX0lURU1TX0NIQU5HRTpcbiAgICAgIGlmIChcbiAgICAgICAgc3RhdGUuZ2V0SW4oW2FjdGlvbi5pZCwgJ3NlbGVjdGVkSXRlbXMnXSwgTGlzdCgpKS5zaXplXG4gICAgICAgID09PSBzdGF0ZS5nZXRJbihbYWN0aW9uLmlkLCAnZGF0YSddLCBMaXN0KCkpLnNpemVcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gc3RhdGUuZGVsZXRlSW4oW2FjdGlvbi5pZCwgJ3NlbGVjdGVkSXRlbXMnXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RhdGVcbiAgICAgICAgLnNldEluKFxuICAgICAgICAgIFthY3Rpb24uaWQsICdzZWxlY3RlZEl0ZW1zJ10sXG4gICAgICAgICAgc3RhdGVcbiAgICAgICAgICAgIC5nZXRJbihbYWN0aW9uLmlkLCAnZGF0YSddLCBMaXN0KCkpXG4gICAgICAgICAgICAubWFwKGl0ZW0gPT4gaXRlbS5nZXRJbihhY3Rpb24uaWRLZXlQYXRoKSksXG4gICAgICAgICk7XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX0NMRUFSX1NFTEVDVEVEX0lURU1TOlxuICAgICAgcmV0dXJuIHN0YXRlLmRlbGV0ZUluKFthY3Rpb24uaWQsICdzZWxlY3RlZEl0ZW1zJ10pO1xuXG4gICAgY2FzZSBUWVBFUy5QTEFURk9STV9EQVRBR1JJRF9UT0dHTEVfRklMVEVSSU5HOiB7XG4gICAgICBpZiAoIWFjdGlvbi5pc0ZpbHRlcmluZykge1xuICAgICAgICByZXR1cm4gc3RhdGVcbiAgICAgICAgICAuc2V0SW4oW2FjdGlvbi5pZCwgJ2NvbmZpZycsICdmaWx0ZXJpbmdEYXRhJ10sIE1hcCh7IGlzRmlsdGVyaW5nOiBmYWxzZSB9KSlcbiAgICAgICAgICAuc2V0SW4oW2FjdGlvbi5pZCwgJ2RhdGEnXSwgc3RhdGUuZ2V0SW4oW2FjdGlvbi5pZCwgJ2FsbERhdGEnXSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0YXRlXG4gICAgICAgIC5zZXRJbihbYWN0aW9uLmlkLCAnY29uZmlnJywgJ2ZpbHRlcmluZ0RhdGEnXSwgTWFwKHsgaXNGaWx0ZXJpbmc6IHRydWUgfSkpO1xuICAgIH1cblxuICAgIGNhc2UgVFlQRVMuUExBVEZPUk1fREFUQUdSSURfRklMVEVSX0RBVEFfQ0hBTkdFOlxuICAgICAgcmV0dXJuIHN0YXRlXG4gICAgICAgIC5zZXRJbihcbiAgICAgICAgICBbYWN0aW9uLmlkLCAnY29uZmlnJywgJ2ZpbHRlcmluZ0RhdGEnLCAnZmlsdGVyRGF0YSddLFxuICAgICAgICAgIGFjdGlvbi5maWx0ZXJEYXRhLFxuICAgICAgICApO1xuXG4gICAgY2FzZSBUWVBFUy5QTEFURk9STV9EQVRBR1JJRF9BUFBMWV9GSUxURVJTOlxuICAgICAgcmV0dXJuIHN0YXRlXG4gICAgICAgIC5zZXRJbihcbiAgICAgICAgICBbYWN0aW9uLmlkLCAnZGF0YSddLFxuICAgICAgICAgIGFjdGlvbi5kYXRhLFxuICAgICAgICApO1xuXG4gICAgY2FzZSBUWVBFUy5QTEFURk9STV9EQVRBR1JJRF9TRVRfRklMVEVSUzpcbiAgICAgIHJldHVybiBzdGF0ZVxuICAgICAgICAuc2V0SW4oXG4gICAgICAgICAgW2FjdGlvbi5pZCwgJ2NvbmZpZycsICdmaWx0ZXJpbmdEYXRhJ10sXG4gICAgICAgICAgYWN0aW9uLmZpbHRlcmluZ0RhdGEsXG4gICAgICAgICk7XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX1VQREFURV9FWElTVElOR19DRUxMX1ZBTFVFOiB7XG4gICAgICBjb25zdCBuZXdTdGF0ZSA9IHN0YXRlXG4gICAgICAgIC5zZXRJbihcbiAgICAgICAgICBbYWN0aW9uLmlkLCAnYWxsRGF0YScsIGFjdGlvbi5kYXRhSWQsIC4uLmFjdGlvbi5rZXlQYXRoXSxcbiAgICAgICAgICBhY3Rpb24udmFsdWUsXG4gICAgICAgICk7XG4gICAgICBpZiAoc3RhdGUuaGFzSW4oW2FjdGlvbi5pZCwgJ2RhdGEnLCBhY3Rpb24uZGF0YUlkLCAuLi5hY3Rpb24ua2V5UGF0aF0pKSB7XG4gICAgICAgIHJldHVybiBuZXdTdGF0ZVxuICAgICAgICAgIC5zZXRJbihcbiAgICAgICAgICAgIFthY3Rpb24uaWQsICdkYXRhJywgYWN0aW9uLmRhdGFJZCwgLi4uYWN0aW9uLmtleVBhdGhdLFxuICAgICAgICAgICAgYWN0aW9uLnZhbHVlLFxuICAgICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgfVxuXG4gICAgY2FzZSBUWVBFUy5QTEFURk9STV9EQVRBR1JJRF9TRVRfRURJVF9EQVRBOlxuICAgICAgcmV0dXJuIHN0YXRlXG4gICAgICAgIC5zZXRJbihbYWN0aW9uLmlkLCAnc2Vzc2lvbicsICdpc0VkaXRpbmcnXSwgdHJ1ZSlcbiAgICAgICAgLnNldEluKFthY3Rpb24uaWQsICdlZGl0RGF0YSddLCBhY3Rpb24uZGF0YSlcbiAgICAgICAgLnNldEluKFthY3Rpb24uaWQsICdjZWxsTWVzc2FnZXMnXSwgYWN0aW9uLmNlbGxNZXNzYWdlcyk7XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX0NPTFVNTl9TRVRUSU5HU19NT0RBTF9PUEVOOlxuICAgICAgcmV0dXJuIHN0YXRlLnNldEluKFthY3Rpb24uaWQsICdzZXNzaW9uJywgJ2NvbHVtblNldHRpbmdzTW9kYWwnLCAnb3BlbiddLCB0cnVlKTtcblxuICAgIGNhc2UgVFlQRVMuUExBVEZPUk1fREFUQUdSSURfQ09MVU1OX1NFVFRJTkdTX01PREFMX0NMT1NFOlxuICAgICAgcmV0dXJuIHN0YXRlLmRlbGV0ZUluKFthY3Rpb24uaWQsICdzZXNzaW9uJywgJ2NvbHVtblNldHRpbmdzTW9kYWwnXSk7XG5cbiAgICBjYXNlIFRZUEVTLlBMQVRGT1JNX0RBVEFHUklEX0NPTFVNTl9TRVRUSU5HU19TQVZFOlxuICAgICAgcmV0dXJuIHN0YXRlXG4gICAgICAgIC5zZXRJbihbYWN0aW9uLmlkLCAnY29uZmlnJywgJ3Zpc2libGVDb2x1bW5zJ10sIEltbXV0YWJsZS5mcm9tSlMoYWN0aW9uLmNvbHVtbk9yZGVyKSk7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHN0YXRlO1xuICB9XG59XG4iXX0=