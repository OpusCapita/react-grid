function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

import { formatCurrencyAmount } from '@opuscapita/format-utils';
import { FormattedInputCurrency } from '@opuscapita/react-formatted-input';
import React from 'react';
export var inputRender = function inputRender(formattedInputProps) {
  return React.createElement(FormattedInputCurrency, formattedInputProps);
};

var getCurrencyKeyPath = function getCurrencyKeyPath(col) {
  return col.valueOptions && col.valueOptions.currencyKeyPath || ['currency'];
};

export default {
  // currencyValueRender
  valRender: function valRender(col, gridData, rowIndex, thousandSeparator, decimalSeparator, valueRender) {
    return valueRender(rowIndex, function (v) {
      return formatCurrencyAmount(v, {
        currency: gridData.getIn([rowIndex].concat(getCurrencyKeyPath(col))) || col.valueOptions && col.valueOptions.currency,
        decimals: col.valueOptions && col.valueOptions.decimals,
        thousandSeparator: col.valueOptions && col.valueOptions.thousandSeparator || thousandSeparator,
        decimalSeparator: col.valueOptions && col.valueOptions.decimalSeparator || decimalSeparator,
        multiplier: col.valueOptions && col.valueOptions.multiplier
      });
    });
  },
  cellEdit: function cellEdit(col, column, tabIndex, rowIndex, gridId, functions, editValueParser, getDisabledState, gridData, thousandSeparator, decimalSeparator) {
    var props = _extends({
      className: 'form-control',
      value: functions.getItemValue(rowIndex, col),
      onChange: functions.onCellValueChange(rowIndex, col, function (val) {
        return val;
      }),
      inputProps: {
        id: "ocDatagridEditInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        name: "ocDatagridEditInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        onKeyDown: functions.onCellKeyDown(rowIndex, col),
        ref: functions.handleCellRef(rowIndex, col)
      },
      currency: gridData.getIn([rowIndex].concat(getCurrencyKeyPath(col))) || col.valueOptions && col.valueOptions.currency,
      decimalSeparator: col.valueOptions && col.valueOptions.decimalSeparator || decimalSeparator,
      thousandSeparator: col.valueOptions && col.valueOptions.thousandSeparator || thousandSeparator,
      decimals: col.valueOptions && col.valueOptions.decimals,
      tabIndex: tabIndex,
      onBlur: functions.onCellBlur(rowIndex, col)
    }, col.editComponentProps);

    return inputRender(_extends({}, props));
  },
  cellCreate: function cellCreate(col, column, tabIndex, rowIndex, gridId, functions, editValueParser, getDisabledState, gridData, thousandSeparator, decimalSeparator) {
    var props = _extends({
      className: 'form-control',
      value: functions.getItemValue(rowIndex, col),
      onChange: functions.onCellValueChange(rowIndex, col, function (val) {
        return val;
      }),
      inputProps: {
        id: "ocDatagridCreateInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        name: "ocDatagridCreateInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        onKeyDown: functions.onCellKeyDown(rowIndex, col),
        ref: functions.handleCellRef(rowIndex, col)
      },
      currency: gridData.getIn([rowIndex].concat(getCurrencyKeyPath(col))) || col.valueOptions && col.valueOptions.currency,
      decimalSeparator: col.valueOptions && col.valueOptions.decimalSeparator || decimalSeparator,
      thousandSeparator: col.valueOptions && col.valueOptions.thousandSeparator || thousandSeparator,
      decimals: col.valueOptions && col.valueOptions.decimals,
      tabIndex: tabIndex,
      onBlur: functions.onCellBlur(rowIndex, col)
    }, col.createComponentProps);

    return inputRender(_extends({}, props));
  } // Cell filtering is handled by primitive-renderers cellFilter function
  // Check column-service.jsx

};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9kYXRhZ3JpZC9jb2x1bW4tc2VydmljZS9jb2x1bW4tdHlwZXMvY3VycmVuY3ktcmVuZGVyZXJzLmpzeCJdLCJuYW1lcyI6WyJmb3JtYXRDdXJyZW5jeUFtb3VudCIsIkZvcm1hdHRlZElucHV0Q3VycmVuY3kiLCJSZWFjdCIsImlucHV0UmVuZGVyIiwiZm9ybWF0dGVkSW5wdXRQcm9wcyIsImdldEN1cnJlbmN5S2V5UGF0aCIsImNvbCIsInZhbHVlT3B0aW9ucyIsImN1cnJlbmN5S2V5UGF0aCIsInZhbFJlbmRlciIsImdyaWREYXRhIiwicm93SW5kZXgiLCJ0aG91c2FuZFNlcGFyYXRvciIsImRlY2ltYWxTZXBhcmF0b3IiLCJ2YWx1ZVJlbmRlciIsInYiLCJjdXJyZW5jeSIsImdldEluIiwiZGVjaW1hbHMiLCJtdWx0aXBsaWVyIiwiY2VsbEVkaXQiLCJjb2x1bW4iLCJ0YWJJbmRleCIsImdyaWRJZCIsImZ1bmN0aW9ucyIsImVkaXRWYWx1ZVBhcnNlciIsImdldERpc2FibGVkU3RhdGUiLCJwcm9wcyIsImNsYXNzTmFtZSIsInZhbHVlIiwiZ2V0SXRlbVZhbHVlIiwib25DaGFuZ2UiLCJvbkNlbGxWYWx1ZUNoYW5nZSIsInZhbCIsImlucHV0UHJvcHMiLCJpZCIsImNvbHVtbktleSIsIm5hbWUiLCJvbktleURvd24iLCJvbkNlbGxLZXlEb3duIiwicmVmIiwiaGFuZGxlQ2VsbFJlZiIsIm9uQmx1ciIsIm9uQ2VsbEJsdXIiLCJlZGl0Q29tcG9uZW50UHJvcHMiLCJjZWxsQ3JlYXRlIiwiY3JlYXRlQ29tcG9uZW50UHJvcHMiXSwibWFwcGluZ3MiOiI7O0FBQUEsU0FBU0Esb0JBQVQsUUFBcUMsMEJBQXJDO0FBQ0EsU0FBU0Msc0JBQVQsUUFBdUMsbUNBQXZDO0FBQ0EsT0FBT0MsS0FBUCxNQUFrQixPQUFsQjtBQUVBLE9BQU8sSUFBTUMsV0FBVyxHQUFHLFNBQWRBLFdBQWMsQ0FBQUMsbUJBQW1CO0FBQUEsU0FDNUMs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QSxJQUFJLDZCQUEyQmQsTUFBM0IsU0FBcUNGLE1BQU0sQ0FBQ2UsU0FBNUMsU0FBeUR6QixRQUZuRDtBQUdWMkIsUUFBQUEsU0FBUyxFQUFFZCxTQUFTLENBQUNlLGFBQVYsQ0FBd0I1QixRQUF4QixFQUFrQ0wsR0FBbEMsQ0FIRDtBQUlWa0MsUUFBQUEsR0FBRyxFQUFFaEIsU0FBUyxDQUFDaUIsYUFBVixDQUF3QjlCLFFBQXhCLEVBQWtDTCxHQUFsQztBQUpLLE9BSkg7QUFVVFUsTUFBQUEsUUFBUSxFQUFFTixRQUFRLENBQUNPLEtBQVQsRUFBZ0JOLFFBQWhCLFNBQTZCTixrQkFBa0IsQ0FBQ0MsR0FBRCxDQUEvQyxNQUNKQSxHQUFHLENBQUNDLFlBQUosSUFBb0JELEdBQUcsQ0FBQ0MsWUFBSixDQUFpQlMsUUFYbEM7QUFZVEgsTUFBQUEsZ0JBQWdCLEVBQUdQLEdBQUcsQ0FBQ0MsWUFBSixJQUFvQkQsR0FBRyxDQUFDQyxZQUFKLENBQWlCTSxnQkFBdEMsSUFBMkRBLGdCQVpwRTtBQWFURCxNQUFBQSxpQkFBaUIsRUFBR04sR0FBRyxDQUFDQyxZQUFKLElBQW9CRCxHQUFHLENBQUNDLFlBQUosQ0FBaUJLLGlCQUF0QyxJQUNkQSxpQkFkSTtBQWVUTSxNQUFBQSxRQUFRLEVBQUVaLEdBQUcsQ0FBQ0MsWUFBSixJQUFvQkQsR0FBRyxDQUFDQyxZQUFKLENBQWlCVyxRQWZ0QztBQWdCVEksTUFBQUEsUUFBUSxFQUFSQSxRQWhCUztBQWlCVG9CLE1BQUFBLE1BQU0sRUFBRWxCLFNBQVMsQ0FBQ21CLFVBQVYsQ0FBcUJoQyxRQUFyQixFQUErQkwsR0FBL0I7QUFqQkMsT0FrQk5BLEdBQUcsQ0FBQ3dDLG9CQWxCRSxDQUFYOztBQXFCQSxXQUFPM0MsV0FBVyxjQUFNd0IsS0FBTixFQUFsQjtBQUNELEdBdEZZLENBdUZiO0FBQ0E7O0FBeEZhLENBQWYiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmb3JtYXRDdXJyZW5jeUFtb3VudCB9IGZyb20gJ0BvcHVzY2FwaXRhL2Zvcm1hdC11dGlscyc7XG5pbXBvcnQgeyBGb3JtYXR0ZWRJbnB1dEN1cnJlbmN5IH0gZnJvbSAnQG9wdXNjYXBpdGEvcmVhY3QtZm9ybWF0dGVkLWlucHV0JztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmV4cG9ydCBjb25zdCBpbnB1dFJlbmRlciA9IGZvcm1hdHRlZElucHV0UHJvcHMgPT4gKFxuICA8Rm9ybWF0dGVkSW5wdXRDdXJyZW5jeSB7Li4uZm9ybWF0dGVkSW5wdXRQcm9wc30gLz5cbik7XG5cbmNvbnN0IGdldEN1cnJlbmN5S2V5UGF0aCA9IGNvbCA9PiAoY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLmN1cnJlbmN5S2V5UGF0aCkgfHwgWydjdXJyZW5jeSddO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8vIGN1cnJlbmN5VmFsdWVSZW5kZXJcbiAgdmFsUmVuZGVyKGNvbCwgZ3JpZERhdGEsIHJvd0luZGV4LCB0aG91c2FuZFNlcGFyYXRvciwgZGVjaW1hbFNlcGFyYXRvciwgdmFsdWVSZW5kZXIpIHtcbiAgICByZXR1cm4gdmFsdWVSZW5kZXIocm93SW5kZXgsIHYgPT4gZm9ybWF0Q3VycmVuY3lBbW91bnQodiwge1xuICAgICAgY3VycmVuY3k6IGdyaWREYXRhLmdldEluKFtyb3dJbmRleCwgLi4uZ2V0Q3VycmVuY3lLZXlQYXRoKGNvbCldKVxuICAgICAgICB8fCAoY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLmN1cnJlbmN5KSxcbiAgICAgIGRlY2ltYWxzOiBjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMuZGVjaW1hbHMsXG4gICAgICB0aG91c2FuZFNlcGFyYXRvcjpcbiAgICAgICAgKGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy50aG91c2FuZFNlcGFyYXRvcikgfHwgdGhvdXNhbmRTZXBhcmF0b3IsXG4gICAgICBkZWNpbWFsU2VwYXJhdG9yOlxuICAgICAgICAoY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLmRlY2ltYWxTZXBhcmF0b3IpIHx8IGRlY2ltYWxTZXBhcmF0b3IsXG4gICAgICBtdWx0aXBsaWVyOlxuICAgICAgICAoY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLm11bHRpcGxpZXIpLFxuICAgIH0pKTtcbiAgfSxcbiAgY2VsbEVkaXQoXG4gICAgY29sLFxuICAgIGNvbHVtbixcbiAgICB0YWJJbmRleCxcbiAgICByb3dJbmRleCxcbiAgICBncmlkSWQsXG4gICAgZnVuY3Rpb25zLFxuICAgIGVkaXRWYWx1ZVBhcnNlcixcbiAgICBnZXREaXNhYmxlZFN0YXRlLFxuICAgIGdyaWREYXRhLFxuICAgIHRob3VzYW5kU2VwYXJhdG9yLFxuICAgIGRlY2ltYWxTZXBhcmF0b3IsXG4gICkge1xuICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgY2xhc3NOYW1lOiAnZm9ybS1jb250cm9sJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbnMuZ2V0SXRlbVZhbHVlKHJvd0luZGV4LCBjb2wpLFxuICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9ucy5vbkNlbGxWYWx1ZUNoYW5nZShyb3dJbmRleCwgY29sLCB2YWwgPT4gdmFsKSxcbiAgICAgIGlucHV0UHJvcHM6IHtcbiAgICAgICAgaWQ6IGBvY0RhdGFncmlkRWRpdElucHV0LSR7Z3JpZElkfS0ke2NvbHVtbi5jb2x1bW5LZXl9LSR7cm93SW5kZXh9YCxcbiAgICAgICAgbmFtZTogYG9jRGF0YWdyaWRFZGl0SW5wdXQtJHtncmlkSWR9LSR7Y29sdW1uLmNvbHVtbktleX0tJHtyb3dJbmRleH1gLFxuICAgICAgICBvbktleURvd246IGZ1bmN0aW9ucy5vbkNlbGxLZXlEb3duKHJvd0luZGV4LCBjb2wpLFxuICAgICAgICByZWY6IGZ1bmN0aW9ucy5oYW5kbGVDZWxsUmVmKHJvd0luZGV4LCBjb2wpLFxuICAgICAgfSxcbiAgICAgIGN1cnJlbmN5OiBncmlkRGF0YS5nZXRJbihbcm93SW5kZXgsIC4uLmdldEN1cnJlbmN5S2V5UGF0aChjb2wpXSlcbiAgICAgICAgfHwgKGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy5jdXJyZW5jeSksXG4gICAgICBkZWNpbWFsU2VwYXJhdG9yOiAoY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLmRlY2ltYWxTZXBhcmF0b3IpIHx8IGRlY2ltYWxTZXBhcmF0b3IsXG4gICAgICB0aG91c2FuZFNlcGFyYXRvcjogKGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy50aG91c2FuZFNlcGFyYXRvcilcbiAgICAgICAgfHwgdGhvdXNhbmRTZXBhcmF0b3IsXG4gICAgICBkZWNpbWFsczogY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLmRlY2ltYWxzLFxuICAgICAgdGFiSW5kZXgsXG4gICAgICBvbkJsdXI6IGZ1bmN0aW9ucy5vbkNlbGxCbHVyKHJvd0luZGV4LCBjb2wpLFxuICAgICAgLi4uY29sLmVkaXRDb21wb25lbnRQcm9wcyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGlucHV0UmVuZGVyKHsgLi4ucHJvcHMgfSk7XG4gIH0sXG4gIGNlbGxDcmVhdGUoXG4gICAgY29sLFxuICAgIGNvbHVtbixcbiAgICB0YWJJbmRleCxcbiAgICByb3dJbmRleCxcbiAgICBncmlkSWQsXG4gICAgZnVuY3Rpb25zLFxuICAgIGVkaXRWYWx1ZVBhcnNlcixcbiAgICBnZXREaXNhYmxlZFN0YXRlLFxuICAgIGdyaWREYXRhLFxuICAgIHRob3VzYW5kU2VwYXJhdG9yLFxuICAgIGRlY2ltYWxTZXBhcmF0b3IsXG4gICkge1xuICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgY2xhc3NOYW1lOiAnZm9ybS1jb250cm9sJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbnMuZ2V0SXRlbVZhbHVlKHJvd0luZGV4LCBjb2wpLFxuICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9ucy5vbkNlbGxWYWx1ZUNoYW5nZShyb3dJbmRleCwgY29sLCB2YWwgPT4gdmFsKSxcbiAgICAgIGlucHV0UHJvcHM6IHtcbiAgICAgICAgaWQ6IGBvY0RhdGFncmlkQ3JlYXRlSW5wdXQtJHtncmlkSWR9LSR7Y29sdW1uLmNvbHVtbktleX0tJHtyb3dJbmRleH1gLFxuICAgICAgICBuYW1lOiBgb2NEYXRhZ3JpZENyZWF0ZUlucHV0LSR7Z3JpZElkfS0ke2NvbHVtbi5jb2x1bW5LZXl9LSR7cm93SW5kZXh9YCxcbiAgICAgICAgb25LZXlEb3duOiBmdW5jdGlvbnMub25DZWxsS2V5RG93bihyb3dJbmRleCwgY29sKSxcbiAgICAgICAgcmVmOiBmdW5jdGlvbnMuaGFuZGxlQ2VsbFJlZihyb3dJbmRleCwgY29sKSxcbiAgICAgIH0sXG4gICAgICBjdXJyZW5jeTogZ3JpZERhdGEuZ2V0SW4oW3Jvd0luZGV4LCAuLi5nZXRDdXJyZW5jeUtleVBhdGgoY29sKV0pXG4gICAgICAgIHx8IChjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMuY3VycmVuY3kpLFxuICAgICAgZGVjaW1hbFNlcGFyYXRvcjogKGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy5kZWNpbWFsU2VwYXJhdG9yKSB8fCBkZWNpbWFsU2VwYXJhdG9yLFxuICAgICAgdGhvdXNhbmRTZXBhcmF0b3I6IChjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMudGhvdXNhbmRTZXBhcmF0b3IpXG4gICAgICAgIHx8IHRob3VzYW5kU2VwYXJhdG9yLFxuICAgICAgZGVjaW1hbHM6IGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy5kZWNpbWFscyxcbiAgICAgIHRhYkluZGV4LFxuICAgICAgb25CbHVyOiBmdW5jdGlvbnMub25DZWxsQmx1cihyb3dJbmRleCwgY29sKSxcbiAgICAgIC4uLmNvbC5jcmVhdGVDb21wb25lbnRQcm9wcyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGlucHV0UmVuZGVyKHsgLi4ucHJvcHMgfSk7XG4gIH0sXG4gIC8vIENlbGwgZmlsdGVyaW5nIGlzIGhhbmRsZWQgYnkgcHJpbWl0aXZlLXJlbmRlcmVycyBjZWxsRmlsdGVyIGZ1bmN0aW9uXG4gIC8vIENoZWNrIGNvbHVtbi1zZXJ2aWNlLmpzeFxufTtcbiJdfQ==