function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

import { formatCurrencyAmount } from '@opuscapita/format-utils';
import { FormattedInputCurrency } from '@opuscapita/react-formatted-input';
import React from 'react';
export var inputRender = function inputRender(formattedInputProps) {
  return React.createElement(FormattedInputCurrency, formattedInputProps);
};

var getCurrencyKeyPath = function getCurrencyKeyPath(col) {
  return col.valueOptions && col.valueOptions.currencyKeyPath || ['currency'];
};

export default {
  // currencyValueRender
  valRender: function valRender(col, gridData, rowIndex, thousandSeparator, decimalSeparator, valueRender) {
    return valueRender(rowIndex, function (v) {
      return formatCurrencyAmount(v, {
        currency: gridData.getIn([rowIndex].concat(getCurrencyKeyPath(col))) || col.valueOptions && col.valueOptions.currency,
        decimals: col.valueOptions && col.valueOptions.decimals,
        thousandSeparator: col.valueOptions && col.valueOptions.thousandSeparator || thousandSeparator,
        decimalSeparator: col.valueOptions && col.valueOptions.decimalSeparator || decimalSeparator,
        multiplier: col.valueOptions && col.valueOptions.multiplier
      });
    });
  },
  cellEdit: function cellEdit(col, column, tabIndex, rowIndex, gridId, functions, editValueParser, getComponentDisabledState, gridData, thousandSeparator, decimalSeparator) {
    var cellName = 'edit';

    var props = _extends({
      className: 'form-control',
      value: functions.getItemValue(rowIndex, col),
      onChange: functions.onCellValueChange(rowIndex, col, function (val) {
        return val;
      }),
      inputProps: {
        disabled: getComponentDisabledState(rowIndex, col, cellName),
        id: "ocDatagridEditInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        name: "ocDatagridEditInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        onFocus: functions.onCellFocus(cellName, col.componentType, rowIndex, column.columnKey),
        onKeyDown: functions.onCellKeyDown(rowIndex, col),
        ref: functions.handleCellRef(rowIndex, col),
        style: column.style
      },
      currency: gridData.getIn([rowIndex].concat(getCurrencyKeyPath(col))) || col.valueOptions && col.valueOptions.currency,
      decimalSeparator: col.valueOptions && col.valueOptions.decimalSeparator || decimalSeparator,
      thousandSeparator: col.valueOptions && col.valueOptions.thousandSeparator || thousandSeparator,
      decimals: col.valueOptions && col.valueOptions.decimals,
      tabIndex: tabIndex,
      onBlur: functions.onCellBlur(rowIndex, col)
    }, col.editComponentProps);

    return inputRender(_extends({}, props));
  },
  cellCreate: function cellCreate(col, column, tabIndex, rowIndex, gridId, functions, editValueParser, getComponentDisabledState, gridData, thousandSeparator, decimalSeparator) {
    var cellName = 'create';

    var props = _extends({
      className: 'form-control',
      value: functions.getItemValue(rowIndex, col),
      onChange: functions.onCellValueChange(rowIndex, col, function (val) {
        return val;
      }),
      inputProps: {
        disabled: getComponentDisabledState(rowIndex, col, cellName),
        id: "ocDatagridCreateInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        name: "ocDatagridCreateInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        onFocus: functions.onCellFocus(cellName, col.componentType, rowIndex, column.columnKey),
        onKeyDown: functions.onCellKeyDown(rowIndex, col),
        ref: functions.handleCellRef(rowIndex, col),
        style: column.style
      },
      currency: gridData.getIn([rowIndex].concat(getCurrencyKeyPath(col))) || col.valueOptions && col.valueOptions.currency,
      decimalSeparator: col.valueOptions && col.valueOptions.decimalSeparator || decimalSeparator,
      thousandSeparator: col.valueOptions && col.valueOptions.thousandSeparator || thousandSeparator,
      decimals: col.valueOptions && col.valueOptions.decimals,
      tabIndex: tabIndex,
      onBlur: functions.onCellBlur(rowIndex, col)
    }, col.createComponentProps);

    return inputRender(_extends({}, props));
  } // Cell filtering is handled by primitive-renderers cellFilter function
  // Check column-service.jsx

};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9kYXRhZ3JpZC9jb2x1bW4tc2VydmljZS9jb2x1bW4tdHlwZXMvY3VycmVuY3ktcmVuZGVyZXJzLmpzeCJdLCJuYW1lcyI6WyJmb3JtYXRDdXJyZW5jeUFtb3VudCIsIkZvcm1hdHRlZElucHV0Q3VycmVuY3kiLCJSZWFjdCIsImlucHV0UmVuZGVyIiwiZm9ybWF0dGVkSW5wdXRQcm9wcyIsImdldEN1cnJlbmN5S2V5UGF0aCIsImNvbCIsInZhbHVlT3B0aW9ucyIsImN1cnJlbmN5S2V5UGF0aCIsInZhbFJlbmRlciIsImdyaWREYXRhIiwicm93SW5kZXgiLCJ0aG91c2FuZFNlcGFyYXRvciIsImRlY2ltYWxTZXBhcmF0b3IiLCJ2YWx1ZVJlbmRlciIsInYiLCJjdXJyZW5jeSIsImdldEluIiwiZGVjaW1hbHMiLCJtdWx0aXBsaWVyIiwiY2VsbEVkaXQiLCJjb2x1bW4iLCJ0YWJJbmRleCIsImdyaWRJZCIsImZ1bmN0aW9ucyIsImVkaXRWYWx1ZVBhcnNlciIsImdldENvbXBvbmVudERpc2FibGVkU3RhdGUiLCJjZWxsTmFtZSIsInByb3BzIiwiY2xhc3NOYW1lIiwidmFsdWUiLCJnZXRJdGVtVmFsdWUiLCJvbkNoYW5nZSIsIm9uQ2VsbFZhbHVlQ2hhbmdlIiwidmFsIiwiaW5wdXRQcm9wcyIsImRpc2FibGVkIiwiaWQiLCJjb2x1bW5LZXkiLCJuYW1lIiwib25Gb2N1cyIsIm9uQ2VsbEZvY3VzIiwiY29tcG9uZW50VHlwZSIsIm9uS2V5RG93biIsIm9uQ2VsbEtleURvd24iLCJyZWYiLCJoYW5kbGVDZWxsUmVmIiwic3R5bGUiLCJvbkJsdXIiLCJvbkNlbGxCbHVyIiwiZWRpdENvbXBvbmVudFByb3BzIiwiY2VsbENyZWF0ZSIsImNyZWF0ZUNvbXBvbmVudFByb3BzIl0sIm1hcHBpbmdzIjoiOztBQUFBLFNBQVNBLG9CQUFULFFBQXFDLDBCQUFyQztBQUNBLFNBQVNDLHNCQUFULFFBQXVDLG1DQUF2QztBQUNBLE9BQU9D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a0IsQ0FBQ0MsR0FBRCxDQUEvQyxNQUNKQSxHQUFHLENBQUNDLFlBQUosSUFBb0JELEdBQUcsQ0FBQ0MsWUFBSixDQUFpQlMsUUFkbEM7QUFlVEgsTUFBQUEsZ0JBQWdCLEVBQUdQLEdBQUcsQ0FBQ0MsWUFBSixJQUFvQkQsR0FBRyxDQUFDQyxZQUFKLENBQWlCTSxnQkFBdEMsSUFBMkRBLGdCQWZwRTtBQWdCVEQsTUFBQUEsaUJBQWlCLEVBQUdOLEdBQUcsQ0FBQ0MsWUFBSixJQUFvQkQsR0FBRyxDQUFDQyxZQUFKLENBQWlCSyxpQkFBdEMsSUFDZEEsaUJBakJJO0FBa0JUTSxNQUFBQSxRQUFRLEVBQUVaLEdBQUcsQ0FBQ0MsWUFBSixJQUFvQkQsR0FBRyxDQUFDQyxZQUFKLENBQWlCVyxRQWxCdEM7QUFtQlRJLE1BQUFBLFFBQVEsRUFBUkEsUUFuQlM7QUFvQlQwQixNQUFBQSxNQUFNLEVBQUV4QixTQUFTLENBQUN5QixVQUFWLENBQXFCdEMsUUFBckIsRUFBK0JMLEdBQS9CO0FBcEJDLE9BcUJOQSxHQUFHLENBQUM4QyxvQkFyQkUsQ0FBWDs7QUF3QkEsV0FBT2pELFdBQVcsY0FBTXlCLEtBQU4sRUFBbEI7QUFDRCxHQTlGWSxDQStGYjtBQUNBOztBQWhHYSxDQUFmIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZm9ybWF0Q3VycmVuY3lBbW91bnQgfSBmcm9tICdAb3B1c2NhcGl0YS9mb3JtYXQtdXRpbHMnO1xuaW1wb3J0IHsgRm9ybWF0dGVkSW5wdXRDdXJyZW5jeSB9IGZyb20gJ0BvcHVzY2FwaXRhL3JlYWN0LWZvcm1hdHRlZC1pbnB1dCc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgY29uc3QgaW5wdXRSZW5kZXIgPSBmb3JtYXR0ZWRJbnB1dFByb3BzID0+IChcbiAgPEZvcm1hdHRlZElucHV0Q3VycmVuY3kgey4uLmZvcm1hdHRlZElucHV0UHJvcHN9IC8+XG4pO1xuXG5jb25zdCBnZXRDdXJyZW5jeUtleVBhdGggPSBjb2wgPT4gKGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy5jdXJyZW5jeUtleVBhdGgpIHx8IFsnY3VycmVuY3knXTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAvLyBjdXJyZW5jeVZhbHVlUmVuZGVyXG4gIHZhbFJlbmRlcihjb2wsIGdyaWREYXRhLCByb3dJbmRleCwgdGhvdXNhbmRTZXBhcmF0b3IsIGRlY2ltYWxTZXBhcmF0b3IsIHZhbHVlUmVuZGVyKSB7XG4gICAgcmV0dXJuIHZhbHVlUmVuZGVyKHJvd0luZGV4LCB2ID0+IGZvcm1hdEN1cnJlbmN5QW1vdW50KHYsIHtcbiAgICAgIGN1cnJlbmN5OiBncmlkRGF0YS5nZXRJbihbcm93SW5kZXgsIC4uLmdldEN1cnJlbmN5S2V5UGF0aChjb2wpXSlcbiAgICAgICAgfHwgKGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy5jdXJyZW5jeSksXG4gICAgICBkZWNpbWFsczogY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLmRlY2ltYWxzLFxuICAgICAgdGhvdXNhbmRTZXBhcmF0b3I6XG4gICAgICAgIChjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMudGhvdXNhbmRTZXBhcmF0b3IpIHx8IHRob3VzYW5kU2VwYXJhdG9yLFxuICAgICAgZGVjaW1hbFNlcGFyYXRvcjpcbiAgICAgICAgKGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy5kZWNpbWFsU2VwYXJhdG9yKSB8fCBkZWNpbWFsU2VwYXJhdG9yLFxuICAgICAgbXVsdGlwbGllcjpcbiAgICAgICAgKGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy5tdWx0aXBsaWVyKSxcbiAgICB9KSk7XG4gIH0sXG4gIGNlbGxFZGl0KFxuICAgIGNvbCxcbiAgICBjb2x1bW4sXG4gICAgdGFiSW5kZXgsXG4gICAgcm93SW5kZXgsXG4gICAgZ3JpZElkLFxuICAgIGZ1bmN0aW9ucyxcbiAgICBlZGl0VmFsdWVQYXJzZXIsXG4gICAgZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZSxcbiAgICBncmlkRGF0YSxcbiAgICB0aG91c2FuZFNlcGFyYXRvcixcbiAgICBkZWNpbWFsU2VwYXJhdG9yLFxuICApIHtcbiAgICBjb25zdCBjZWxsTmFtZSA9ICdlZGl0JztcbiAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgIGNsYXNzTmFtZTogJ2Zvcm0tY29udHJvbCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb25zLmdldEl0ZW1WYWx1ZShyb3dJbmRleCwgY29sKSxcbiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbnMub25DZWxsVmFsdWVDaGFuZ2Uocm93SW5kZXgsIGNvbCwgdmFsID0+IHZhbCksXG4gICAgICBpbnB1dFByb3BzOiB7XG4gICAgICAgIGRpc2FibGVkOiBnZXRDb21wb25lbnREaXNhYmxlZFN0YXRlKHJvd0luZGV4LCBjb2wsIGNlbGxOYW1lKSxcbiAgICAgICAgaWQ6IGBvY0RhdGFncmlkRWRpdElucHV0LSR7Z3JpZElkfS0ke2NvbHVtbi5jb2x1bW5LZXl9LSR7cm93SW5kZXh9YCxcbiAgICAgICAgbmFtZTogYG9jRGF0YWdyaWRFZGl0SW5wdXQtJHtncmlkSWR9LSR7Y29sdW1uLmNvbHVtbktleX0tJHtyb3dJbmRleH1gLFxuICAgICAgICBvbkZvY3VzOiBmdW5jdGlvbnMub25DZWxsRm9jdXMoY2VsbE5hbWUsIGNvbC5jb21wb25lbnRUeXBlLCByb3dJbmRleCwgY29sdW1uLmNvbHVtbktleSksXG4gICAgICAgIG9uS2V5RG93bjogZnVuY3Rpb25zLm9uQ2VsbEtleURvd24ocm93SW5kZXgsIGNvbCksXG4gICAgICAgIHJlZjogZnVuY3Rpb25zLmhhbmRsZUNlbGxSZWYocm93SW5kZXgsIGNvbCksXG4gICAgICAgIHN0eWxlOiBjb2x1bW4uc3R5bGUsXG4gICAgICB9LFxuICAgICAgY3VycmVuY3k6IGdyaWREYXRhLmdldEluKFtyb3dJbmRleCwgLi4uZ2V0Q3VycmVuY3lLZXlQYXRoKGNvbCldKVxuICAgICAgICB8fCAoY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLmN1cnJlbmN5KSxcbiAgICAgIGRlY2ltYWxTZXBhcmF0b3I6IChjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMuZGVjaW1hbFNlcGFyYXRvcikgfHwgZGVjaW1hbFNlcGFyYXRvcixcbiAgICAgIHRob3VzYW5kU2VwYXJhdG9yOiAoY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLnRob3VzYW5kU2VwYXJhdG9yKVxuICAgICAgICB8fCB0aG91c2FuZFNlcGFyYXRvcixcbiAgICAgIGRlY2ltYWxzOiBjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMuZGVjaW1hbHMsXG4gICAgICB0YWJJbmRleCxcbiAgICAgIG9uQmx1cjogZnVuY3Rpb25zLm9uQ2VsbEJsdXIocm93SW5kZXgsIGNvbCksXG4gICAgICAuLi5jb2wuZWRpdENvbXBvbmVudFByb3BzLFxuICAgIH07XG5cbiAgICByZXR1cm4gaW5wdXRSZW5kZXIoeyAuLi5wcm9wcyB9KTtcbiAgfSxcbiAgY2VsbENyZWF0ZShcbiAgICBjb2wsXG4gICAgY29sdW1uLFxuICAgIHRhYkluZGV4LFxuICAgIHJvd0luZGV4LFxuICAgIGdyaWRJZCxcbiAgICBmdW5jdGlvbnMsXG4gICAgZWRpdFZhbHVlUGFyc2VyLFxuICAgIGdldENvbXBvbmVudERpc2FibGVkU3RhdGUsXG4gICAgZ3JpZERhdGEsXG4gICAgdGhvdXNhbmRTZXBhcmF0b3IsXG4gICAgZGVjaW1hbFNlcGFyYXRvcixcbiAgKSB7XG4gICAgY29uc3QgY2VsbE5hbWUgPSAnY3JlYXRlJztcbiAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgIGNsYXNzTmFtZTogJ2Zvcm0tY29udHJvbCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb25zLmdldEl0ZW1WYWx1ZShyb3dJbmRleCwgY29sKSxcbiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbnMub25DZWxsVmFsdWVDaGFuZ2Uocm93SW5kZXgsIGNvbCwgdmFsID0+IHZhbCksXG4gICAgICBpbnB1dFByb3BzOiB7XG4gICAgICAgIGRpc2FibGVkOiBnZXRDb21wb25lbnREaXNhYmxlZFN0YXRlKHJvd0luZGV4LCBjb2wsIGNlbGxOYW1lKSxcbiAgICAgICAgaWQ6IGBvY0RhdGFncmlkQ3JlYXRlSW5wdXQtJHtncmlkSWR9LSR7Y29sdW1uLmNvbHVtbktleX0tJHtyb3dJbmRleH1gLFxuICAgICAgICBuYW1lOiBgb2NEYXRhZ3JpZENyZWF0ZUlucHV0LSR7Z3JpZElkfS0ke2NvbHVtbi5jb2x1bW5LZXl9LSR7cm93SW5kZXh9YCxcbiAgICAgICAgb25Gb2N1czogZnVuY3Rpb25zLm9uQ2VsbEZvY3VzKGNlbGxOYW1lLCBjb2wuY29tcG9uZW50VHlwZSwgcm93SW5kZXgsIGNvbHVtbi5jb2x1bW5LZXkpLFxuICAgICAgICBvbktleURvd246IGZ1bmN0aW9ucy5vbkNlbGxLZXlEb3duKHJvd0luZGV4LCBjb2wpLFxuICAgICAgICByZWY6IGZ1bmN0aW9ucy5oYW5kbGVDZWxsUmVmKHJvd0luZGV4LCBjb2wpLFxuICAgICAgICBzdHlsZTogY29sdW1uLnN0eWxlLFxuICAgICAgfSxcbiAgICAgIGN1cnJlbmN5OiBncmlkRGF0YS5nZXRJbihbcm93SW5kZXgsIC4uLmdldEN1cnJlbmN5S2V5UGF0aChjb2wpXSlcbiAgICAgICAgfHwgKGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy5jdXJyZW5jeSksXG4gICAgICBkZWNpbWFsU2VwYXJhdG9yOiAoY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLmRlY2ltYWxTZXBhcmF0b3IpIHx8IGRlY2ltYWxTZXBhcmF0b3IsXG4gICAgICB0aG91c2FuZFNlcGFyYXRvcjogKGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy50aG91c2FuZFNlcGFyYXRvcilcbiAgICAgICAgfHwgdGhvdXNhbmRTZXBhcmF0b3IsXG4gICAgICBkZWNpbWFsczogY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLmRlY2ltYWxzLFxuICAgICAgdGFiSW5kZXgsXG4gICAgICBvbkJsdXI6IGZ1bmN0aW9ucy5vbkNlbGxCbHVyKHJvd0luZGV4LCBjb2wpLFxuICAgICAgLi4uY29sLmNyZWF0ZUNvbXBvbmVudFByb3BzLFxuICAgIH07XG5cbiAgICByZXR1cm4gaW5wdXRSZW5kZXIoeyAuLi5wcm9wcyB9KTtcbiAgfSxcbiAgLy8gQ2VsbCBmaWx0ZXJpbmcgaXMgaGFuZGxlZCBieSBwcmltaXRpdmUtcmVuZGVyZXJzIGNlbGxGaWx0ZXIgZnVuY3Rpb25cbiAgLy8gQ2hlY2sgY29sdW1uLXNlcnZpY2UuanN4XG59O1xuIl19