function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

import { formatCurrencyAmount } from '@opuscapita/format-utils';
import { FormattedInputCurrency } from '@opuscapita/react-formatted-input';
import React from 'react';
export var inputRender = function inputRender(formattedInputProps) {
  return /*#__PURE__*/React.createElement(FormattedInputCurrency, formattedInputProps);
};

var getCurrencyKeyPath = function getCurrencyKeyPath(col) {
  return col.valueOptions && col.valueOptions.currencyKeyPath || ['currency'];
};

export default {
  // currencyValueRender
  valRender: function valRender(col, gridData, rowIndex, thousandSeparator, decimalSeparator, valueRender) {
    return valueRender(rowIndex, function (v) {
      return formatCurrencyAmount(v, {
        currency: gridData.getIn([rowIndex].concat(getCurrencyKeyPath(col))) || col.valueOptions && col.valueOptions.currency,
        decimals: col.valueOptions && col.valueOptions.decimals,
        thousandSeparator: col.valueOptions && col.valueOptions.thousandSeparator || thousandSeparator,
        decimalSeparator: col.valueOptions && col.valueOptions.decimalSeparator || decimalSeparator,
        multiplier: col.valueOptions && col.valueOptions.multiplier
      });
    });
  },
  cellEdit: function cellEdit(col, column, tabIndex, rowIndex, gridId, functions, editValueParser, getComponentDisabledState, gridData, thousandSeparator, decimalSeparator) {
    var cellName = 'edit';

    var props = _extends({
      className: 'form-control',
      value: functions.getItemValue(rowIndex, col),
      onChange: functions.onCellValueChange(rowIndex, col, function (val) {
        return val;
      }),
      inputProps: {
        disabled: getComponentDisabledState(rowIndex, col, cellName),
        id: "ocDatagridEditInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        name: "ocDatagridEditInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        onFocus: functions.onCellFocus(cellName, col.componentType, rowIndex, column.columnKey),
        onKeyDown: functions.onCellKeyDown(rowIndex, col),
        ref: functions.handleCellRef(rowIndex, col),
        style: column.style
      },
      currency: gridData.getIn([rowIndex].concat(getCurrencyKeyPath(col))) || col.valueOptions && col.valueOptions.currency,
      decimalSeparator: col.valueOptions && col.valueOptions.decimalSeparator || decimalSeparator,
      thousandSeparator: col.valueOptions && col.valueOptions.thousandSeparator || thousandSeparator,
      decimals: col.valueOptions && col.valueOptions.decimals,
      tabIndex: tabIndex,
      onBlur: functions.onCellBlur(rowIndex, col)
    }, col.editComponentProps);

    return inputRender(_extends({}, props));
  },
  cellCreate: function cellCreate(col, column, tabIndex, rowIndex, gridId, functions, editValueParser, getComponentDisabledState, gridData, thousandSeparator, decimalSeparator) {
    var cellName = 'create';

    var props = _extends({
      className: 'form-control',
      value: functions.getItemValue(rowIndex, col),
      onChange: functions.onCellValueChange(rowIndex, col, function (val) {
        return val;
      }),
      inputProps: {
        disabled: getComponentDisabledState(rowIndex, col, cellName),
        id: "ocDatagridCreateInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        name: "ocDatagridCreateInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
        onFocus: functions.onCellFocus(cellName, col.componentType, rowIndex, column.columnKey),
        onKeyDown: functions.onCellKeyDown(rowIndex, col),
        ref: functions.handleCellRef(rowIndex, col),
        style: column.style
      },
      currency: gridData.getIn([rowIndex].concat(getCurrencyKeyPath(col))) || col.valueOptions && col.valueOptions.currency,
      decimalSeparator: col.valueOptions && col.valueOptions.decimalSeparator || decimalSeparator,
      thousandSeparator: col.valueOptions && col.valueOptions.thousandSeparator || thousandSeparator,
      decimals: col.valueOptions && col.valueOptions.decimals,
      tabIndex: tabIndex,
      onBlur: functions.onCellBlur(rowIndex, col)
    }, col.createComponentProps);

    return inputRender(_extends({}, props));
  } // Cell filtering is handled by primitive-renderers cellFilter function
  // Check column-service.jsx

};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9kYXRhZ3JpZC9jb2x1bW4tc2VydmljZS9jb2x1bW4tdHlwZXMvY3VycmVuY3ktcmVuZGVyZXJzLmpzeCJdLCJuYW1lcyI6WyJmb3JtYXRDdXJyZW5jeUFtb3VudCIsIkZvcm1hdHRlZElucHV0Q3VycmVuY3kiLCJSZWFjdCIsImlucHV0UmVuZGVyIiwiZm9ybWF0dGVkSW5wdXRQcm9wcyIsImdldEN1cnJlbmN5S2V5UGF0aCIsImNvbCIsInZhbHVlT3B0aW9ucyIsImN1cnJlbmN5S2V5UGF0aCIsInZhbFJlbmRlciIsImdyaWREYXRhIiwicm93SW5kZXgiLCJ0aG91c2FuZFNlcGFyYXRvciIsImRlY2ltYWxTZXBhcmF0b3IiLCJ2YWx1ZVJlbmRlciIsInYiLCJjdXJyZW5jeSIsImdldEluIiwiZGVjaW1hbHMiLCJtdWx0aXBsaWVyIiwiY2VsbEVkaXQiLCJjb2x1bW4iLCJ0YWJJbmRleCIsImdyaWRJZCIsImZ1bmN0aW9ucyIsImVkaXRWYWx1ZVBhcnNlciIsImdldENvbXBvbmVudERpc2FibGVkU3RhdGUiLCJjZWxsTmFtZSIsInByb3BzIiwiY2xhc3NOYW1lIiwidmFsdWUiLCJnZXRJdGVtVmFsdWUiLCJvbkNoYW5nZSIsIm9uQ2VsbFZhbHVlQ2hhbmdlIiwidmFsIiwiaW5wdXRQcm9wcyIsImRpc2FibGVkIiwiaWQiLCJjb2x1bW5LZXkiLCJuYW1lIiwib25Gb2N1cyIsIm9uQ2VsbEZvY3VzIiwiY29tcG9uZW50VHlwZSIsIm9uS2V5RG93biIsIm9uQ2VsbEtleURvd24iLCJyZWYiLCJoYW5kbGVDZWxsUmVmIiwic3R5bGUiLCJvbkJsdXIiLCJvbkNlbGxCbHVyIiwiZWRpdENvbXBvbmVudFByb3BzIiwiY2VsbENyZWF0ZSIsImNyZWF0ZUNvbXBvbmVudFByb3BzIl0sIm1hcHBpbmdzIjoiOztBQUFBLFNBQVNBLG9CQUFULFFBQXFDLDBCQUFyQztBQUNBLFNBQVNDLHNCQUFULFFBQXVDLG1DQUF2QztBQUNBLE9BQU9D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QWtCLENBQUNDLEdBQUQsQ0FBL0MsTUFDSkEsR0FBRyxDQUFDQyxZQUFKLElBQW9CRCxHQUFHLENBQUNDLFlBQUosQ0FBaUJTLFFBZGxDO0FBZVRILE1BQUFBLGdCQUFnQixFQUFHUCxHQUFHLENBQUNDLFlBQUosSUFBb0JELEdBQUcsQ0FBQ0MsWUFBSixDQUFpQk0sZ0JBQXRDLElBQTJEQSxnQkFmcEU7QUFnQlRELE1BQUFBLGlCQUFpQixFQUFHTixHQUFHLENBQUNDLFlBQUosSUFBb0JELEdBQUcsQ0FBQ0MsWUFBSixDQUFpQkssaUJBQXRDLElBQ2RBLGlCQWpCSTtBQWtCVE0sTUFBQUEsUUFBUSxFQUFFWixHQUFHLENBQUNDLFlBQUosSUFBb0JELEdBQUcsQ0FBQ0MsWUFBSixDQUFpQlcsUUFsQnRDO0FBbUJUSSxNQUFBQSxRQUFRLEVBQVJBLFFBbkJTO0FBb0JUMEIsTUFBQUEsTUFBTSxFQUFFeEIsU0FBUyxDQUFDeUIsVUFBVixDQUFxQnRDLFFBQXJCLEVBQStCTCxHQUEvQjtBQXBCQyxPQXFCTkEsR0FBRyxDQUFDOEMsb0JBckJFLENBQVg7O0FBd0JBLFdBQU9qRCxXQUFXLGNBQU15QixLQUFOLEVBQWxCO0FBQ0QsR0E5RlksQ0ErRmI7QUFDQTs7QUFoR2EsQ0FBZiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZvcm1hdEN1cnJlbmN5QW1vdW50IH0gZnJvbSAnQG9wdXNjYXBpdGEvZm9ybWF0LXV0aWxzJztcbmltcG9ydCB7IEZvcm1hdHRlZElucHV0Q3VycmVuY3kgfSBmcm9tICdAb3B1c2NhcGl0YS9yZWFjdC1mb3JtYXR0ZWQtaW5wdXQnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuZXhwb3J0IGNvbnN0IGlucHV0UmVuZGVyID0gZm9ybWF0dGVkSW5wdXRQcm9wcyA9PiAoXG4gIDxGb3JtYXR0ZWRJbnB1dEN1cnJlbmN5IHsuLi5mb3JtYXR0ZWRJbnB1dFByb3BzfSAvPlxuKTtcblxuY29uc3QgZ2V0Q3VycmVuY3lLZXlQYXRoID0gY29sID0+IChjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMuY3VycmVuY3lLZXlQYXRoKSB8fCBbJ2N1cnJlbmN5J107XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLy8gY3VycmVuY3lWYWx1ZVJlbmRlclxuICB2YWxSZW5kZXIoY29sLCBncmlkRGF0YSwgcm93SW5kZXgsIHRob3VzYW5kU2VwYXJhdG9yLCBkZWNpbWFsU2VwYXJhdG9yLCB2YWx1ZVJlbmRlcikge1xuICAgIHJldHVybiB2YWx1ZVJlbmRlcihyb3dJbmRleCwgdiA9PiBmb3JtYXRDdXJyZW5jeUFtb3VudCh2LCB7XG4gICAgICBjdXJyZW5jeTogZ3JpZERhdGEuZ2V0SW4oW3Jvd0luZGV4LCAuLi5nZXRDdXJyZW5jeUtleVBhdGgoY29sKV0pXG4gICAgICAgIHx8IChjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMuY3VycmVuY3kpLFxuICAgICAgZGVjaW1hbHM6IGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy5kZWNpbWFscyxcbiAgICAgIHRob3VzYW5kU2VwYXJhdG9yOlxuICAgICAgICAoY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLnRob3VzYW5kU2VwYXJhdG9yKSB8fCB0aG91c2FuZFNlcGFyYXRvcixcbiAgICAgIGRlY2ltYWxTZXBhcmF0b3I6XG4gICAgICAgIChjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMuZGVjaW1hbFNlcGFyYXRvcikgfHwgZGVjaW1hbFNlcGFyYXRvcixcbiAgICAgIG11bHRpcGxpZXI6XG4gICAgICAgIChjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMubXVsdGlwbGllciksXG4gICAgfSkpO1xuICB9LFxuICBjZWxsRWRpdChcbiAgICBjb2wsXG4gICAgY29sdW1uLFxuICAgIHRhYkluZGV4LFxuICAgIHJvd0luZGV4LFxuICAgIGdyaWRJZCxcbiAgICBmdW5jdGlvbnMsXG4gICAgZWRpdFZhbHVlUGFyc2VyLFxuICAgIGdldENvbXBvbmVudERpc2FibGVkU3RhdGUsXG4gICAgZ3JpZERhdGEsXG4gICAgdGhvdXNhbmRTZXBhcmF0b3IsXG4gICAgZGVjaW1hbFNlcGFyYXRvcixcbiAgKSB7XG4gICAgY29uc3QgY2VsbE5hbWUgPSAnZWRpdCc7XG4gICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICBjbGFzc05hbWU6ICdmb3JtLWNvbnRyb2wnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9ucy5nZXRJdGVtVmFsdWUocm93SW5kZXgsIGNvbCksXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb25zLm9uQ2VsbFZhbHVlQ2hhbmdlKHJvd0luZGV4LCBjb2wsIHZhbCA9PiB2YWwpLFxuICAgICAgaW5wdXRQcm9wczoge1xuICAgICAgICBkaXNhYmxlZDogZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZShyb3dJbmRleCwgY29sLCBjZWxsTmFtZSksXG4gICAgICAgIGlkOiBgb2NEYXRhZ3JpZEVkaXRJbnB1dC0ke2dyaWRJZH0tJHtjb2x1bW4uY29sdW1uS2V5fS0ke3Jvd0luZGV4fWAsXG4gICAgICAgIG5hbWU6IGBvY0RhdGFncmlkRWRpdElucHV0LSR7Z3JpZElkfS0ke2NvbHVtbi5jb2x1bW5LZXl9LSR7cm93SW5kZXh9YCxcbiAgICAgICAgb25Gb2N1czogZnVuY3Rpb25zLm9uQ2VsbEZvY3VzKGNlbGxOYW1lLCBjb2wuY29tcG9uZW50VHlwZSwgcm93SW5kZXgsIGNvbHVtbi5jb2x1bW5LZXkpLFxuICAgICAgICBvbktleURvd246IGZ1bmN0aW9ucy5vbkNlbGxLZXlEb3duKHJvd0luZGV4LCBjb2wpLFxuICAgICAgICByZWY6IGZ1bmN0aW9ucy5oYW5kbGVDZWxsUmVmKHJvd0luZGV4LCBjb2wpLFxuICAgICAgICBzdHlsZTogY29sdW1uLnN0eWxlLFxuICAgICAgfSxcbiAgICAgIGN1cnJlbmN5OiBncmlkRGF0YS5nZXRJbihbcm93SW5kZXgsIC4uLmdldEN1cnJlbmN5S2V5UGF0aChjb2wpXSlcbiAgICAgICAgfHwgKGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy5jdXJyZW5jeSksXG4gICAgICBkZWNpbWFsU2VwYXJhdG9yOiAoY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLmRlY2ltYWxTZXBhcmF0b3IpIHx8IGRlY2ltYWxTZXBhcmF0b3IsXG4gICAgICB0aG91c2FuZFNlcGFyYXRvcjogKGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy50aG91c2FuZFNlcGFyYXRvcilcbiAgICAgICAgfHwgdGhvdXNhbmRTZXBhcmF0b3IsXG4gICAgICBkZWNpbWFsczogY29sLnZhbHVlT3B0aW9ucyAmJiBjb2wudmFsdWVPcHRpb25zLmRlY2ltYWxzLFxuICAgICAgdGFiSW5kZXgsXG4gICAgICBvbkJsdXI6IGZ1bmN0aW9ucy5vbkNlbGxCbHVyKHJvd0luZGV4LCBjb2wpLFxuICAgICAgLi4uY29sLmVkaXRDb21wb25lbnRQcm9wcyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGlucHV0UmVuZGVyKHsgLi4ucHJvcHMgfSk7XG4gIH0sXG4gIGNlbGxDcmVhdGUoXG4gICAgY29sLFxuICAgIGNvbHVtbixcbiAgICB0YWJJbmRleCxcbiAgICByb3dJbmRleCxcbiAgICBncmlkSWQsXG4gICAgZnVuY3Rpb25zLFxuICAgIGVkaXRWYWx1ZVBhcnNlcixcbiAgICBnZXRDb21wb25lbnREaXNhYmxlZFN0YXRlLFxuICAgIGdyaWREYXRhLFxuICAgIHRob3VzYW5kU2VwYXJhdG9yLFxuICAgIGRlY2ltYWxTZXBhcmF0b3IsXG4gICkge1xuICAgIGNvbnN0IGNlbGxOYW1lID0gJ2NyZWF0ZSc7XG4gICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICBjbGFzc05hbWU6ICdmb3JtLWNvbnRyb2wnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9ucy5nZXRJdGVtVmFsdWUocm93SW5kZXgsIGNvbCksXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb25zLm9uQ2VsbFZhbHVlQ2hhbmdlKHJvd0luZGV4LCBjb2wsIHZhbCA9PiB2YWwpLFxuICAgICAgaW5wdXRQcm9wczoge1xuICAgICAgICBkaXNhYmxlZDogZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZShyb3dJbmRleCwgY29sLCBjZWxsTmFtZSksXG4gICAgICAgIGlkOiBgb2NEYXRhZ3JpZENyZWF0ZUlucHV0LSR7Z3JpZElkfS0ke2NvbHVtbi5jb2x1bW5LZXl9LSR7cm93SW5kZXh9YCxcbiAgICAgICAgbmFtZTogYG9jRGF0YWdyaWRDcmVhdGVJbnB1dC0ke2dyaWRJZH0tJHtjb2x1bW4uY29sdW1uS2V5fS0ke3Jvd0luZGV4fWAsXG4gICAgICAgIG9uRm9jdXM6IGZ1bmN0aW9ucy5vbkNlbGxGb2N1cyhjZWxsTmFtZSwgY29sLmNvbXBvbmVudFR5cGUsIHJvd0luZGV4LCBjb2x1bW4uY29sdW1uS2V5KSxcbiAgICAgICAgb25LZXlEb3duOiBmdW5jdGlvbnMub25DZWxsS2V5RG93bihyb3dJbmRleCwgY29sKSxcbiAgICAgICAgcmVmOiBmdW5jdGlvbnMuaGFuZGxlQ2VsbFJlZihyb3dJbmRleCwgY29sKSxcbiAgICAgICAgc3R5bGU6IGNvbHVtbi5zdHlsZSxcbiAgICAgIH0sXG4gICAgICBjdXJyZW5jeTogZ3JpZERhdGEuZ2V0SW4oW3Jvd0luZGV4LCAuLi5nZXRDdXJyZW5jeUtleVBhdGgoY29sKV0pXG4gICAgICAgIHx8IChjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMuY3VycmVuY3kpLFxuICAgICAgZGVjaW1hbFNlcGFyYXRvcjogKGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy5kZWNpbWFsU2VwYXJhdG9yKSB8fCBkZWNpbWFsU2VwYXJhdG9yLFxuICAgICAgdGhvdXNhbmRTZXBhcmF0b3I6IChjb2wudmFsdWVPcHRpb25zICYmIGNvbC52YWx1ZU9wdGlvbnMudGhvdXNhbmRTZXBhcmF0b3IpXG4gICAgICAgIHx8IHRob3VzYW5kU2VwYXJhdG9yLFxuICAgICAgZGVjaW1hbHM6IGNvbC52YWx1ZU9wdGlvbnMgJiYgY29sLnZhbHVlT3B0aW9ucy5kZWNpbWFscyxcbiAgICAgIHRhYkluZGV4LFxuICAgICAgb25CbHVyOiBmdW5jdGlvbnMub25DZWxsQmx1cihyb3dJbmRleCwgY29sKSxcbiAgICAgIC4uLmNvbC5jcmVhdGVDb21wb25lbnRQcm9wcyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGlucHV0UmVuZGVyKHsgLi4ucHJvcHMgfSk7XG4gIH0sXG4gIC8vIENlbGwgZmlsdGVyaW5nIGlzIGhhbmRsZWQgYnkgcHJpbWl0aXZlLXJlbmRlcmVycyBjZWxsRmlsdGVyIGZ1bmN0aW9uXG4gIC8vIENoZWNrIGNvbHVtbi1zZXJ2aWNlLmpzeFxufTtcbiJdfQ==