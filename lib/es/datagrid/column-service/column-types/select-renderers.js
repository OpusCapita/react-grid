var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

import React from 'react';
import { FloatingSelectPortal } from '@opuscapita/react-floating-select';

export var selectRender = function selectRender(selectProps) {
  return React.createElement(FloatingSelectPortal, selectProps);
};

export default {
  cellEdit: function cellEdit(col, column, rowIndex, tabIndex, gridId, selectOptions, selectTranslations, editValueParser, functions, getComponentDisabledState) {
    var cellName = 'edit';
    var opts = col.editSelectOptionsMod && selectOptions ? col.editSelectOptionsMod(selectOptions.slice(), rowIndex, col) : selectOptions;
    var fsProps = _extends({
      name: 'ocDatagridEditInput-' + gridId + '-' + column.columnKey + '-' + rowIndex,
      options: opts,
      value: functions.getItemValue(rowIndex, col),
      onChange: functions.onCellValueChange(rowIndex, col, editValueParser),
      onBlur: functions.onCellBlur(rowIndex, col),
      onFocus: functions.onCellFocus(cellName, col.componentType, rowIndex, column.columnKey),
      onKeyDown: functions.onCellKeyDown(rowIndex, col),
      isSearchable: selectOptions && selectOptions.length > 9,
      isClearable: !col.isRequired,
      backSpaceRemovesValue: false,
      tabSelectsValue: false,
      openMenuOnFocus: false,
      ref: functions.handleCellRef(rowIndex, col),
      isDisabled: getComponentDisabledState(rowIndex, col, cellName),
      tabIndex: tabIndex
    }, col.editComponentProps, selectTranslations);
    return selectRender(_extends({}, fsProps));
  },
  cellCreate: function cellCreate(col, column, rowIndex, tabIndex, gridId, selectOptions, selectTranslations, editValueParser, functions, getComponentDisabledState) {
    var cellName = 'create';
    var opts = col.createSelectOptionsMod && selectOptions ? col.createSelectOptionsMod(selectOptions.slice(), rowIndex, col) : selectOptions;

    var fsProps = _extends({
      name: 'ocDatagridCreateInput-' + gridId + '-' + column.columnKey + '-' + rowIndex,
      options: opts,
      value: functions.getItemValue(rowIndex, col),
      onChange: functions.onCellValueChange(rowIndex, col, editValueParser),
      onBlur: functions.onCellBlur(rowIndex, col),
      onKeyDown: functions.onCellKeyDown(rowIndex, col),
      onFocus: functions.onCellFocus(cellName, col.componentType, rowIndex, column.columnKey),
      isSearchable: selectOptions && selectOptions.length > 9,
      isClearable: !col.isRequired,
      backspaceRemovesValue: false,
      tabSelectsValue: false,
      openMenuOnFocus: false,
      ref: functions.handleCellRef(rowIndex, col),
      isDisabled: getComponentDisabledState(rowIndex, col, cellName),
      tabIndex: tabIndex
    }, col.createComponentProps, selectTranslations);
    return selectRender(_extends({}, fsProps));
  },
  cellFilter: function cellFilter(col, column, tabIndex, gridId, selectOptions, selectTranslations, editValueParser, functions) {
    var opts = col.filterSelectOptionsMod && selectOptions ? col.filterSelectOptionsMod(selectOptions.slice(), col) : selectOptions;
    var fsProps = _extends({
      name: 'ocDatagridFilterInput-' + gridId + '-' + column.columnKey,
      options: opts,
      value: functions.getItemValue(col),
      onChange: functions.onCellValueChange(col, editValueParser),
      isSearchable: selectOptions && selectOptions.length > 9,
      isClearable: true,
      tabSelectsValue: false,
      tabIndex: tabIndex
    }, col.filterComponentProps, selectTranslations);

    return selectRender(_extends({}, fsProps));
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9kYXRhZ3JpZC9jb2x1bW4tc2VydmljZS9jb2x1bW4tdHlwZXMvc2VsZWN0LXJlbmRlcmVycy5qc3giXSwibmFtZXMiOlsiUmVhY3QiLCJGbG9hdGluZ1NlbGVjdFBvcnRhbCIsInNlbGVjdFJlbmRlciIsInNlbGVjdFByb3BzIiwiY2VsbEVkaXQiLCJjb2wiLCJjb2x1bW4iLCJyb3dJbmRleCIsInRhYkluZGV4IiwiZ3JpZElkIiwic2VsZWN0T3B0aW9ucyIsInNlbGVjdFRyYW5zbGF0aW9ucyIsImVkaXRWYWx1ZVBhcnNlciIsImZ1bmN0aW9ucyIsImdldENvbXBvbmVudERpc2FibGVkU3RhdGUiLCJjZWxsTmFtZSIsIm9wdHMiLCJlZGl0U2VsZWN0T3B0aW9uc01vZCIsInNsaWNlIiwiZnNQcm9wcyIsIm5hbWUiLCJjb2x1bW5LZXkiLCJvcHRpb25zIiwidmFsdWUiLCJnZXRJdGVtVmFsdWUiLCJvbkNoYW5nZSIsIm9uQ2VsbFZhbHVlQ2hhbmdlIiwib25CbHVyIiwib25DZWxsQmx1ciIsIm9uRm9jdXMiLCJvbkNlbGxGb2N1cyIsImNvbXBvbmVudFR5cGUiLCJvbktleURvd24iLCJvbkNlbGxLZXlEb3duIiwiaXNTZWFyY2hhYmxlIiwibGVuZ3RoIiwiaXNDbGVhcmFibGUiLCJpc1JlcXVpcmVkIiwiYmFja1NwYWNlUmVtb3Zlc1ZhbHVlIiwidGFiU2VsZWN0c1ZhbHVlIiwib3Blbk1lbnVPbkZvY3VzIiwicmVmIiwiaGFuZGxlQ2VsbFJlZiIsImlzRGlzYWJsZWQiLCJlZGl0Q29tcG9uZW50UHJvcHMiLCJjZWxsQ3JlYXRlIiwiY3JlYXRlU2VsZWN0T3B0aW9uc01vZCIsImJhY2tzcGFjZVJlbW92ZXNWYWx1ZSIsImNyZWF0ZUNvbXBvbmVudFByb3BzIiwiY2VsbEZpbHRlciIsImZpbHRlclNlbGVjdE9wdGlvbnNNb2QiLCJmaWx0ZXJDb21wb25lbnRQcm9wcyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxPQUFPQSxLQUFQ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TG5EO0FBTUpDLG1CQUFhLElBTlQ7QUFPSkcsdUJBQWlCLEtBUGI7QUFRSi9CO0FBUkksT0FTREgsSUFBSThDLG9CQVRILEVBVUR4QyxrQkFWQyxDQUFOOztBQWFBLFdBQU9ULDBCQUFrQmlCLE9BQWxCLEVBQVA7QUFDRDtBQXpHWSxDQUFmIiwiZmlsZSI6InNlbGVjdC1yZW5kZXJlcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRmxvYXRpbmdTZWxlY3RQb3J0YWwgfSBmcm9tICdAb3B1c2NhcGl0YS9yZWFjdC1mbG9hdGluZy1zZWxlY3QnO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0UmVuZGVyID0gc2VsZWN0UHJvcHMgPT4gKFxuICA8RmxvYXRpbmdTZWxlY3RQb3J0YWwgey4uLnNlbGVjdFByb3BzfSAvPlxuKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBjZWxsRWRpdChcbiAgICBjb2wsXG4gICAgY29sdW1uLFxuICAgIHJvd0luZGV4LFxuICAgIHRhYkluZGV4LFxuICAgIGdyaWRJZCxcbiAgICBzZWxlY3RPcHRpb25zLFxuICAgIHNlbGVjdFRyYW5zbGF0aW9ucyxcbiAgICBlZGl0VmFsdWVQYXJzZXIsXG4gICAgZnVuY3Rpb25zLFxuICAgIGdldENvbXBvbmVudERpc2FibGVkU3RhdGUsXG4gICkge1xuICAgIGNvbnN0IGNlbGxOYW1lID0gJ2VkaXQnO1xuICAgIGNvbnN0IG9wdHMgPSBjb2wuZWRpdFNlbGVjdE9wdGlvbnNNb2QgJiYgc2VsZWN0T3B0aW9ucyA/XG4gICAgICBjb2wuZWRpdFNlbGVjdE9wdGlvbnNNb2Qoc2VsZWN0T3B0aW9ucy5zbGljZSgpLCByb3dJbmRleCwgY29sKSA6XG4gICAgICBzZWxlY3RPcHRpb25zO1xuICAgIGNvbnN0IGZzUHJvcHMgPSB7XG4gICAgICBuYW1lOiBgb2NEYXRhZ3JpZEVkaXRJbnB1dC0ke2dyaWRJZH0tJHtjb2x1bW4uY29sdW1uS2V5fS0ke3Jvd0luZGV4fWAsXG4gICAgICBvcHRpb25zOiBvcHRzLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9ucy5nZXRJdGVtVmFsdWUocm93SW5kZXgsIGNvbCksXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb25zLm9uQ2VsbFZhbHVlQ2hhbmdlKHJvd0luZGV4LCBjb2wsIGVkaXRWYWx1ZVBhcnNlciksXG4gICAgICBvbkJsdXI6IGZ1bmN0aW9ucy5vbkNlbGxCbHVyKHJvd0luZGV4LCBjb2wpLFxuICAgICAgb25Gb2N1czogZnVuY3Rpb25zLm9uQ2VsbEZvY3VzKGNlbGxOYW1lLCBjb2wuY29tcG9uZW50VHlwZSwgcm93SW5kZXgsIGNvbHVtbi5jb2x1bW5LZXkpLFxuICAgICAgb25LZXlEb3duOiBmdW5jdGlvbnMub25DZWxsS2V5RG93bihyb3dJbmRleCwgY29sKSxcbiAgICAgIGlzU2VhcmNoYWJsZTogc2VsZWN0T3B0aW9ucyAmJiAoc2VsZWN0T3B0aW9ucy5sZW5ndGggPiA5KSxcbiAgICAgIGlzQ2xlYXJhYmxlOiAhY29sLmlzUmVxdWlyZWQsXG4gICAgICBiYWNrU3BhY2VSZW1vdmVzVmFsdWU6IGZhbHNlLFxuICAgICAgdGFiU2VsZWN0c1ZhbHVlOiBmYWxzZSxcbiAgICAgIG9wZW5NZW51T25Gb2N1czogZmFsc2UsXG4gICAgICByZWY6IGZ1bmN0aW9ucy5oYW5kbGVDZWxsUmVmKHJvd0luZGV4LCBjb2wpLFxuICAgICAgaXNEaXNhYmxlZDogZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZShyb3dJbmRleCwgY29sLCBjZWxsTmFtZSksXG4gICAgICB0YWJJbmRleCxcbiAgICAgIC4uLmNvbC5lZGl0Q29tcG9uZW50UHJvcHMsXG4gICAgICAuLi5zZWxlY3RUcmFuc2xhdGlvbnMsXG4gICAgfTtcbiAgICByZXR1cm4gc2VsZWN0UmVuZGVyKHsgLi4uZnNQcm9wcyB9KTtcbiAgfSxcblxuICBjZWxsQ3JlYXRlKFxuICAgIGNvbCxcbiAgICBjb2x1bW4sXG4gICAgcm93SW5kZXgsXG4gICAgdGFiSW5kZXgsXG4gICAgZ3JpZElkLFxuICAgIHNlbGVjdE9wdGlvbnMsXG4gICAgc2VsZWN0VHJhbnNsYXRpb25zLFxuICAgIGVkaXRWYWx1ZVBhcnNlcixcbiAgICBmdW5jdGlvbnMsXG4gICAgZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZSxcbiAgKSB7XG4gICAgY29uc3QgY2VsbE5hbWUgPSAnY3JlYXRlJztcbiAgICBjb25zdCBvcHRzID0gY29sLmNyZWF0ZVNlbGVjdE9wdGlvbnNNb2QgJiYgc2VsZWN0T3B0aW9ucyA/XG4gICAgICBjb2wuY3JlYXRlU2VsZWN0T3B0aW9uc01vZChzZWxlY3RPcHRpb25zLnNsaWNlKCksIHJvd0luZGV4LCBjb2wpIDpcbiAgICAgIHNlbGVjdE9wdGlvbnM7XG5cbiAgICBjb25zdCBmc1Byb3BzID0ge1xuICAgICAgbmFtZTogYG9jRGF0YWdyaWRDcmVhdGVJbnB1dC0ke2dyaWRJZH0tJHtjb2x1bW4uY29sdW1uS2V5fS0ke3Jvd0luZGV4fWAsXG4gICAgICBvcHRpb25zOiBvcHRzLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9ucy5nZXRJdGVtVmFsdWUocm93SW5kZXgsIGNvbCksXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb25zLm9uQ2VsbFZhbHVlQ2hhbmdlKHJvd0luZGV4LCBjb2wsIGVkaXRWYWx1ZVBhcnNlciksXG4gICAgICBvbkJsdXI6IGZ1bmN0aW9ucy5vbkNlbGxCbHVyKHJvd0luZGV4LCBjb2wpLFxuICAgICAgb25LZXlEb3duOiBmdW5jdGlvbnMub25DZWxsS2V5RG93bihyb3dJbmRleCwgY29sKSxcbiAgICAgIG9uRm9jdXM6IGZ1bmN0aW9ucy5vbkNlbGxGb2N1cyhjZWxsTmFtZSwgY29sLmNvbXBvbmVudFR5cGUsIHJvd0luZGV4LCBjb2x1bW4uY29sdW1uS2V5KSxcbiAgICAgIGlzU2VhcmNoYWJsZTogc2VsZWN0T3B0aW9ucyAmJiAoc2VsZWN0T3B0aW9ucy5sZW5ndGggPiA5KSxcbiAgICAgIGlzQ2xlYXJhYmxlOiAhY29sLmlzUmVxdWlyZWQsXG4gICAgICBiYWNrc3BhY2VSZW1vdmVzVmFsdWU6IGZhbHNlLFxuICAgICAgdGFiU2VsZWN0c1ZhbHVlOiBmYWxzZSxcbiAgICAgIG9wZW5NZW51T25Gb2N1czogZmFsc2UsXG4gICAgICByZWY6IGZ1bmN0aW9ucy5oYW5kbGVDZWxsUmVmKHJvd0luZGV4LCBjb2wpLFxuICAgICAgaXNEaXNhYmxlZDogZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZShyb3dJbmRleCwgY29sLCBjZWxsTmFtZSksXG4gICAgICB0YWJJbmRleCxcbiAgICAgIC4uLmNvbC5jcmVhdGVDb21wb25lbnRQcm9wcyxcbiAgICAgIC4uLnNlbGVjdFRyYW5zbGF0aW9ucyxcbiAgICB9O1xuICAgIHJldHVybiBzZWxlY3RSZW5kZXIoeyAuLi5mc1Byb3BzIH0pO1xuICB9LFxuXG4gIGNlbGxGaWx0ZXIoXG4gICAgY29sLFxuICAgIGNvbHVtbixcbiAgICB0YWJJbmRleCxcbiAgICBncmlkSWQsXG4gICAgc2VsZWN0T3B0aW9ucyxcbiAgICBzZWxlY3RUcmFuc2xhdGlvbnMsXG4gICAgZWRpdFZhbHVlUGFyc2VyLFxuICAgIGZ1bmN0aW9ucyxcbiAgKSB7XG4gICAgY29uc3Qgb3B0cyA9IGNvbC5maWx0ZXJTZWxlY3RPcHRpb25zTW9kICYmIHNlbGVjdE9wdGlvbnMgP1xuICAgICAgY29sLmZpbHRlclNlbGVjdE9wdGlvbnNNb2Qoc2VsZWN0T3B0aW9ucy5zbGljZSgpLCBjb2wpIDpcbiAgICAgIHNlbGVjdE9wdGlvbnM7XG4gICAgY29uc3QgZnNQcm9wcyA9IHtcbiAgICAgIG5hbWU6IGBvY0RhdGFncmlkRmlsdGVySW5wdXQtJHtncmlkSWR9LSR7Y29sdW1uLmNvbHVtbktleX1gLFxuICAgICAgb3B0aW9uczogb3B0cyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbnMuZ2V0SXRlbVZhbHVlKGNvbCksXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb25zLm9uQ2VsbFZhbHVlQ2hhbmdlKGNvbCwgZWRpdFZhbHVlUGFyc2VyKSxcbiAgICAgIGlzU2VhcmNoYWJsZTogc2VsZWN0T3B0aW9ucyAmJiAoc2VsZWN0T3B0aW9ucy5sZW5ndGggPiA5KSxcbiAgICAgIGlzQ2xlYXJhYmxlOiB0cnVlLFxuICAgICAgdGFiU2VsZWN0c1ZhbHVlOiBmYWxzZSxcbiAgICAgIHRhYkluZGV4LFxuICAgICAgLi4uY29sLmZpbHRlckNvbXBvbmVudFByb3BzLFxuICAgICAgLi4uc2VsZWN0VHJhbnNsYXRpb25zLFxuICAgIH07XG5cbiAgICByZXR1cm4gc2VsZWN0UmVuZGVyKHsgLi4uZnNQcm9wcyB9KTtcbiAgfSxcblxufTtcbiJdfQ==