function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

import React from 'react';
import { FloatingSelectPortal, FloatingSelectPortalCreatable } from '@opuscapita/react-floating-select';
export var selectRender = function selectRender(selectProps) {
  return React.createElement(FloatingSelectPortal, selectProps);
};
export var creatableSelectRender = function creatableSelectRender(selectProps) {
  return React.createElement(FloatingSelectPortalCreatable, selectProps);
};
export default {
  valRender: function valRender(rowIndex, selectOptions, valueRender) {
    if (selectOptions === void 0) {
      selectOptions = [];
    }

    return valueRender(rowIndex, function (v) {
      var option = selectOptions.find(function (o) {
        return o.value === v;
      });
      return option ? option.label : null;
    });
  },
  cellEdit: function cellEdit(col, column, rowIndex, tabIndex, gridId, selectOptions, selectTranslations, editValueParser, functions, getComponentDisabledState) {
    var cellName = 'edit';
    var opts = col.editSelectOptionsMod && selectOptions ? col.editSelectOptionsMod(selectOptions.slice(), rowIndex, col) : selectOptions;

    var fsProps = _extends({
      name: "ocDatagridEditInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
      options: opts,
      value: functions.getItemValue(rowIndex, col, {
        selectOptions: selectOptions
      }),
      onChange: functions.onCellValueChange(rowIndex, col, editValueParser),
      onBlur: functions.onCellBlur(rowIndex, col),
      onFocus: functions.onCellFocus(cellName, col.componentType, rowIndex, column.columnKey),
      onKeyDown: functions.onCellKeyDown(rowIndex, col),
      isSearchable: selectOptions && selectOptions.length > 9,
      isClearable: !col.isRequired,
      backSpaceRemovesValue: false,
      tabSelectsValue: false,
      openMenuOnFocus: false,
      ref: functions.handleCellRef(rowIndex, col),
      isDisabled: getComponentDisabledState(rowIndex, col, cellName),
      tabIndex: tabIndex
    }, selectTranslations, {}, col.editComponentProps);

    if (col.isCreatableSelect) return creatableSelectRender(_extends({}, fsProps));
    return selectRender(_extends({}, fsProps));
  },
  cellCreate: function cellCreate(col, column, rowIndex, tabIndex, gridId, selectOptions, selectTranslations, editValueParser, functions, getComponentDisabledState) {
    var cellName = 'create';
    var opts = col.createSelectOptionsMod && selectOptions ? col.createSelectOptionsMod(selectOptions.slice(), rowIndex, col) : selectOptions;

    var fsProps = _extends({
      name: "ocDatagridCreateInput-" + gridId + "-" + column.columnKey + "-" + rowIndex,
      options: opts,
      value: functions.getItemValue(rowIndex, col, {
        selectOptions: selectOptions
      }),
      onChange: functions.onCellValueChange(rowIndex, col, editValueParser),
      onBlur: functions.onCellBlur(rowIndex, col),
      onKeyDown: functions.onCellKeyDown(rowIndex, col),
      onFocus: functions.onCellFocus(cellName, col.componentType, rowIndex, column.columnKey),
      isSearchable: selectOptions && selectOptions.length > 9,
      isClearable: !col.isRequired,
      backspaceRemovesValue: false,
      tabSelectsValue: false,
      openMenuOnFocus: false,
      ref: functions.handleCellRef(rowIndex, col),
      isDisabled: getComponentDisabledState(rowIndex, col, cellName),
      tabIndex: tabIndex
    }, selectTranslations, {}, col.createComponentProps);

    if (col.isCreatableSelect) return creatableSelectRender(_extends({}, fsProps));
    return selectRender(_extends({}, fsProps));
  },
  cellFilter: function cellFilter(col, column, tabIndex, gridId, selectOptions, selectTranslations, editValueParser, functions) {
    var opts = col.filterSelectOptionsMod && selectOptions ? col.filterSelectOptionsMod(selectOptions.slice(), col) : selectOptions;

    var fsProps = _extends({
      name: "ocDatagridFilterInput-" + gridId + "-" + column.columnKey,
      options: opts,
      value: functions.getItemValue(col, {
        selectOptions: selectOptions
      }),
      onChange: functions.onCellValueChange(col, editValueParser),
      isSearchable: selectOptions && selectOptions.length > 9,
      isClearable: true,
      tabSelectsValue: false,
      tabIndex: tabIndex
    }, selectTranslations, {}, col.filterComponentProps);

    return selectRender(_extends({}, fsProps));
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9kYXRhZ3JpZC9jb2x1bW4tc2VydmljZS9jb2x1bW4tdHlwZXMvc2VsZWN0LXJlbmRlcmVycy5qc3giXSwibmFtZXMiOlsiUmVhY3QiLCJGbG9hdGluZ1NlbGVjdFBvcnRhbCIsIkZsb2F0aW5nU2VsZWN0UG9ydGFsQ3JlYXRhYmxlIiwic2VsZWN0UmVuZGVyIiwic2VsZWN0UHJvcHMiLCJjcmVhdGFibGVTZWxlY3RSZW5kZXIiLCJ2YWxSZW5kZXIiLCJyb3dJbmRleCIsInNlbGVjdE9wdGlvbnMiLCJ2YWx1ZVJlbmRlciIsInYiLCJvcHRpb24iLCJmaW5kIiwibyIsInZhbHVlIiwibGFiZWwiLCJjZWxsRWRpdCIsImNvbCIsImNvbHVtbiIsInRhYkluZGV4IiwiZ3JpZElkIiwic2VsZWN0VHJhbnNsYXRpb25zIiwiZWRpdFZhbHVlUGFyc2VyIiwiZnVuY3Rpb25zIiwiZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZSIsImNlbGxOYW1lIiwib3B0cyIsImVkaXRTZWxlY3RPcHRpb25zTW9kIiwic2xpY2UiLCJmc1Byb3BzIiwibmFtZSIsImNvbHVtbktleSIsIm9wdGlvbnMiLCJnZXRJdGVtVmFsdWUiLCJvbkNoYW5nZSIsIm9uQ2VsbFZhbHVlQ2hhbmdlIiwib25CbHVyIiwib25DZWxsQmx1ciIsIm9uRm9jdXMiLCJvbkNlbGxGb2N1cyIsImNvbXBvbmVudFR5cGUiLCJvbktleURvd24iLCJvbkNlbGxLZXlEb3duIiwiaXNTZWFyY2hhYmxlIiwibGVuZ3RoIiwiaXNDbGVhcmFibGUiLCJpc1JlcXVpcmVkIiwiYmFja1NwYWNlUmVtb3Zlc1ZhbHVlIiwidGFiU2VsZWN0c1ZhbHVlIiwib3Blbk1lbnVPbkZvY3VzIiwicmVmIiwiaGFuZGxlQ2VsbFJlZiIsImlzRGlzYWJsZWQiLCJlZGl0Q29tcG9uZW50UHJvcHMiLCJpc0NyZWF0YWJsZVNlbGVjdCIsImNlbGxDcmVhdGUiLCJjcmVhdGVTZWxlY3RPcHRpb25zTW9kIiwiYmFja3NwYWNlUmVtb3Zlc1ZhbHVlIiwiY3JlYXRlQ29tcG9uZW50UHJvcHMiLCJjZWxsRmlsdGVyIiwiZmlsdGVyU2VsZWN0T3B0aW9uc01vZCIsImZpbHRlckNvbXBvbmVudFByb3BzIl0sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU9BLEtBQVAsTUFBa0IsT0FBbEI7QUFDQSxTQUNFQyxvQkFERixFQUVFQyw2QkFGRixRQUdPLG1DQUhQO0FBS0EsT0FBTyxJQUFNQyxZQUFZLEdBQUcsU0FBZkEsWUFBZSxDQUFBQyxXQUFXO0FBQUEsU0FBSSxvQkFBQyxvQkFBRCxFQUEwQkEsV0FBMUIsQ0FBSjtBQUFBLENBQWhDO0FBRVAsT0FBTyxJQUFNQyxxQkFBcUIsR0FBRyxTQUF4QkEscUJBQXdCLENBQUFELFdBQVc7QUFBQSxTQUM5QyxvQkFBQyw2QkFBRCxFQUFtQ0EsV0FBbkMsQ0FEOEM7QUFBQSxDQUF6QztBQUlQLGVBQWU7QUFDYkUsRUFBQUEsU0FEYSxxQkFFWEMsUUFGVyxFQUdYQyxhQUhXLEVBSVhDLFdBSlcsRUFLWDtBQUFBLFFBRkFELGFBRUE7QUFGQUEsTUFBQUEsYUFFQSxHQUZnQixFQUVoQjtBQUFBOztBQUNBLFdBQU9DLFdBQVcsQ0FBQ0YsUUFBRCxFQUFXLFVBQUNHLENBQUQsRUFBTztBQUNsQyxVQUFNQyxNQUFNLEdBQUdILGFBQWEsQ0FBQ0ksSUFBZCxDQUFtQixVQUFBQyxDQUFDO0FBQUEsZUFBSUEsQ0FBQyxDQUFDQyxLQUFGLEtBQVlKLENBQWhCO0FBQUEsT0FBcEIsQ0FBZjtBQUNBLGFBQU9DLE1BQU0sR0FBR0EsTUFBTSxDQUFDSSxLQUFWLEdBQWtCLElBQS9CO0FBQ0QsS0FIaUIsQ0FBbEI7QUFJRCxHQVZZO0FBV2JDLEVBQUFBLFFBWGEsb0JBWVhDLEdBWlcsRUFhWEMsTUFiVyxFQWNYWCxRQWRXLEVBZVhZLFFBZlcsRUFnQlhDLE1BaEJXLEVBaUJYWixhQWpCVyxFQWtCWGEsa0JBbEJXLEVBbUJYQyxlQW5CVyxFQW9CWEMsU0FwQlcsRUFxQlhDLHlCQXJCVyxFQXNCWDtBQUNBLFFB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Y0FBTTBCLE9BQU4sRUFBbkI7QUFDRCxHQXpGWTtBQTJGYjhCLEVBQUFBLFVBM0ZhLHNCQTRGWDFDLEdBNUZXLEVBNkZYQyxNQTdGVyxFQThGWEMsUUE5RlcsRUErRlhDLE1BL0ZXLEVBZ0dYWixhQWhHVyxFQWlHWGEsa0JBakdXLEVBa0dYQyxlQWxHVyxFQW1HWEMsU0FuR1csRUFvR1g7QUFDQSxRQUFNRyxJQUFJLEdBQUdULEdBQUcsQ0FBQzJDLHNCQUFKLElBQThCcEQsYUFBOUIsR0FDVFMsR0FBRyxDQUFDMkMsc0JBQUosQ0FBMkJwRCxhQUFhLENBQUNvQixLQUFkLEVBQTNCLEVBQWtEWCxHQUFsRCxDQURTLEdBRVRULGFBRko7O0FBR0EsUUFBTXFCLE9BQU87QUFDWEMsTUFBQUEsSUFBSSw2QkFBMkJWLE1BQTNCLFNBQXFDRixNQUFNLENBQUNhLFNBRHJDO0FBRVhDLE1BQUFBLE9BQU8sRUFBRU4sSUFGRTtBQUdYWixNQUFBQSxLQUFLLEVBQUVTLFNBQVMsQ0FBQ1UsWUFBVixDQUF1QmhCLEdBQXZCLEVBQTRCO0FBQUVULFFBQUFBLGFBQWEsRUFBYkE7QUFBRixPQUE1QixDQUhJO0FBSVgwQixNQUFBQSxRQUFRLEVBQUVYLFNBQVMsQ0FBQ1ksaUJBQVYsQ0FBNEJsQixHQUE1QixFQUFpQ0ssZUFBakMsQ0FKQztBQUtYcUIsTUFBQUEsWUFBWSxFQUFFbkMsYUFBYSxJQUFJQSxhQUFhLENBQUNvQyxNQUFkLEdBQXVCLENBTDNDO0FBTVhDLE1BQUFBLFdBQVcsRUFBRSxJQU5GO0FBT1hHLE1BQUFBLGVBQWUsRUFBRSxLQVBOO0FBUVg3QixNQUFBQSxRQUFRLEVBQVJBO0FBUlcsT0FTUkUsa0JBVFEsTUFVUkosR0FBRyxDQUFDNEMsb0JBVkksQ0FBYjs7QUFhQSxXQUFPMUQsWUFBWSxjQUFNMEIsT0FBTixFQUFuQjtBQUNEO0FBdEhZLENBQWYiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtcbiAgRmxvYXRpbmdTZWxlY3RQb3J0YWwsXG4gIEZsb2F0aW5nU2VsZWN0UG9ydGFsQ3JlYXRhYmxlLFxufSBmcm9tICdAb3B1c2NhcGl0YS9yZWFjdC1mbG9hdGluZy1zZWxlY3QnO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0UmVuZGVyID0gc2VsZWN0UHJvcHMgPT4gPEZsb2F0aW5nU2VsZWN0UG9ydGFsIHsuLi5zZWxlY3RQcm9wc30gLz47XG5cbmV4cG9ydCBjb25zdCBjcmVhdGFibGVTZWxlY3RSZW5kZXIgPSBzZWxlY3RQcm9wcyA9PiAoXG4gIDxGbG9hdGluZ1NlbGVjdFBvcnRhbENyZWF0YWJsZSB7Li4uc2VsZWN0UHJvcHN9IC8+XG4pO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHZhbFJlbmRlcihcbiAgICByb3dJbmRleCxcbiAgICBzZWxlY3RPcHRpb25zID0gW10sXG4gICAgdmFsdWVSZW5kZXIsXG4gICkge1xuICAgIHJldHVybiB2YWx1ZVJlbmRlcihyb3dJbmRleCwgKHYpID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdE9wdGlvbnMuZmluZChvID0+IG8udmFsdWUgPT09IHYpO1xuICAgICAgcmV0dXJuIG9wdGlvbiA/IG9wdGlvbi5sYWJlbCA6IG51bGw7XG4gICAgfSk7XG4gIH0sXG4gIGNlbGxFZGl0KFxuICAgIGNvbCxcbiAgICBjb2x1bW4sXG4gICAgcm93SW5kZXgsXG4gICAgdGFiSW5kZXgsXG4gICAgZ3JpZElkLFxuICAgIHNlbGVjdE9wdGlvbnMsXG4gICAgc2VsZWN0VHJhbnNsYXRpb25zLFxuICAgIGVkaXRWYWx1ZVBhcnNlcixcbiAgICBmdW5jdGlvbnMsXG4gICAgZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZSxcbiAgKSB7XG4gICAgY29uc3QgY2VsbE5hbWUgPSAnZWRpdCc7XG4gICAgY29uc3Qgb3B0cyA9IGNvbC5lZGl0U2VsZWN0T3B0aW9uc01vZCAmJiBzZWxlY3RPcHRpb25zXG4gICAgICA/IGNvbC5lZGl0U2VsZWN0T3B0aW9uc01vZChzZWxlY3RPcHRpb25zLnNsaWNlKCksIHJvd0luZGV4LCBjb2wpXG4gICAgICA6IHNlbGVjdE9wdGlvbnM7XG4gICAgY29uc3QgZnNQcm9wcyA9IHtcbiAgICAgIG5hbWU6IGBvY0RhdGFncmlkRWRpdElucHV0LSR7Z3JpZElkfS0ke2NvbHVtbi5jb2x1bW5LZXl9LSR7cm93SW5kZXh9YCxcbiAgICAgIG9wdGlvbnM6IG9wdHMsXG4gICAgICB2YWx1ZTogZnVuY3Rpb25zLmdldEl0ZW1WYWx1ZShyb3dJbmRleCwgY29sLCB7IHNlbGVjdE9wdGlvbnMgfSksXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb25zLm9uQ2VsbFZhbHVlQ2hhbmdlKHJvd0luZGV4LCBjb2wsIGVkaXRWYWx1ZVBhcnNlciksXG4gICAgICBvbkJsdXI6IGZ1bmN0aW9ucy5vbkNlbGxCbHVyKHJvd0luZGV4LCBjb2wpLFxuICAgICAgb25Gb2N1czogZnVuY3Rpb25zLm9uQ2VsbEZvY3VzKGNlbGxOYW1lLCBjb2wuY29tcG9uZW50VHlwZSwgcm93SW5kZXgsIGNvbHVtbi5jb2x1bW5LZXkpLFxuICAgICAgb25LZXlEb3duOiBmdW5jdGlvbnMub25DZWxsS2V5RG93bihyb3dJbmRleCwgY29sKSxcbiAgICAgIGlzU2VhcmNoYWJsZTogc2VsZWN0T3B0aW9ucyAmJiBzZWxlY3RPcHRpb25zLmxlbmd0aCA+IDksXG4gICAgICBpc0NsZWFyYWJsZTogIWNvbC5pc1JlcXVpcmVkLFxuICAgICAgYmFja1NwYWNlUmVtb3Zlc1ZhbHVlOiBmYWxzZSxcbiAgICAgIHRhYlNlbGVjdHNWYWx1ZTogZmFsc2UsXG4gICAgICBvcGVuTWVudU9uRm9jdXM6IGZhbHNlLFxuICAgICAgcmVmOiBmdW5jdGlvbnMuaGFuZGxlQ2VsbFJlZihyb3dJbmRleCwgY29sKSxcbiAgICAgIGlzRGlzYWJsZWQ6IGdldENvbXBvbmVudERpc2FibGVkU3RhdGUocm93SW5kZXgsIGNvbCwgY2VsbE5hbWUpLFxuICAgICAgdGFiSW5kZXgsXG4gICAgICAuLi5zZWxlY3RUcmFuc2xhdGlvbnMsXG4gICAgICAuLi5jb2wuZWRpdENvbXBvbmVudFByb3BzLFxuICAgIH07XG5cbiAgICBpZiAoY29sLmlzQ3JlYXRhYmxlU2VsZWN0KSByZXR1cm4gY3JlYXRhYmxlU2VsZWN0UmVuZGVyKHsgLi4uZnNQcm9wcyB9KTtcbiAgICByZXR1cm4gc2VsZWN0UmVuZGVyKHsgLi4uZnNQcm9wcyB9KTtcbiAgfSxcblxuICBjZWxsQ3JlYXRlKFxuICAgIGNvbCxcbiAgICBjb2x1bW4sXG4gICAgcm93SW5kZXgsXG4gICAgdGFiSW5kZXgsXG4gICAgZ3JpZElkLFxuICAgIHNlbGVjdE9wdGlvbnMsXG4gICAgc2VsZWN0VHJhbnNsYXRpb25zLFxuICAgIGVkaXRWYWx1ZVBhcnNlcixcbiAgICBmdW5jdGlvbnMsXG4gICAgZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZSxcbiAgKSB7XG4gICAgY29uc3QgY2VsbE5hbWUgPSAnY3JlYXRlJztcbiAgICBjb25zdCBvcHRzID0gY29sLmNyZWF0ZVNlbGVjdE9wdGlvbnNNb2QgJiYgc2VsZWN0T3B0aW9uc1xuICAgICAgPyBjb2wuY3JlYXRlU2VsZWN0T3B0aW9uc01vZChzZWxlY3RPcHRpb25zLnNsaWNlKCksIHJvd0luZGV4LCBjb2wpXG4gICAgICA6IHNlbGVjdE9wdGlvbnM7XG4gICAgY29uc3QgZnNQcm9wcyA9IHtcbiAgICAgIG5hbWU6IGBvY0RhdGFncmlkQ3JlYXRlSW5wdXQtJHtncmlkSWR9LSR7Y29sdW1uLmNvbHVtbktleX0tJHtyb3dJbmRleH1gLFxuICAgICAgb3B0aW9uczogb3B0cyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbnMuZ2V0SXRlbVZhbHVlKHJvd0luZGV4LCBjb2wsIHsgc2VsZWN0T3B0aW9ucyB9KSxcbiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbnMub25DZWxsVmFsdWVDaGFuZ2Uocm93SW5kZXgsIGNvbCwgZWRpdFZhbHVlUGFyc2VyKSxcbiAgICAgIG9uQmx1cjogZnVuY3Rpb25zLm9uQ2VsbEJsdXIocm93SW5kZXgsIGNvbCksXG4gICAgICBvbktleURvd246IGZ1bmN0aW9ucy5vbkNlbGxLZXlEb3duKHJvd0luZGV4LCBjb2wpLFxuICAgICAgb25Gb2N1czogZnVuY3Rpb25zLm9uQ2VsbEZvY3VzKGNlbGxOYW1lLCBjb2wuY29tcG9uZW50VHlwZSwgcm93SW5kZXgsIGNvbHVtbi5jb2x1bW5LZXkpLFxuICAgICAgaXNTZWFyY2hhYmxlOiBzZWxlY3RPcHRpb25zICYmIHNlbGVjdE9wdGlvbnMubGVuZ3RoID4gOSxcbiAgICAgIGlzQ2xlYXJhYmxlOiAhY29sLmlzUmVxdWlyZWQsXG4gICAgICBiYWNrc3BhY2VSZW1vdmVzVmFsdWU6IGZhbHNlLFxuICAgICAgdGFiU2VsZWN0c1ZhbHVlOiBmYWxzZSxcbiAgICAgIG9wZW5NZW51T25Gb2N1czogZmFsc2UsXG4gICAgICByZWY6IGZ1bmN0aW9ucy5oYW5kbGVDZWxsUmVmKHJvd0luZGV4LCBjb2wpLFxuICAgICAgaXNEaXNhYmxlZDogZ2V0Q29tcG9uZW50RGlzYWJsZWRTdGF0ZShyb3dJbmRleCwgY29sLCBjZWxsTmFtZSksXG4gICAgICB0YWJJbmRleCxcbiAgICAgIC4uLnNlbGVjdFRyYW5zbGF0aW9ucyxcbiAgICAgIC4uLmNvbC5jcmVhdGVDb21wb25lbnRQcm9wcyxcbiAgICB9O1xuXG4gICAgaWYgKGNvbC5pc0NyZWF0YWJsZVNlbGVjdCkgcmV0dXJuIGNyZWF0YWJsZVNlbGVjdFJlbmRlcih7IC4uLmZzUHJvcHMgfSk7XG4gICAgcmV0dXJuIHNlbGVjdFJlbmRlcih7IC4uLmZzUHJvcHMgfSk7XG4gIH0sXG5cbiAgY2VsbEZpbHRlcihcbiAgICBjb2wsXG4gICAgY29sdW1uLFxuICAgIHRhYkluZGV4LFxuICAgIGdyaWRJZCxcbiAgICBzZWxlY3RPcHRpb25zLFxuICAgIHNlbGVjdFRyYW5zbGF0aW9ucyxcbiAgICBlZGl0VmFsdWVQYXJzZXIsXG4gICAgZnVuY3Rpb25zLFxuICApIHtcbiAgICBjb25zdCBvcHRzID0gY29sLmZpbHRlclNlbGVjdE9wdGlvbnNNb2QgJiYgc2VsZWN0T3B0aW9uc1xuICAgICAgPyBjb2wuZmlsdGVyU2VsZWN0T3B0aW9uc01vZChzZWxlY3RPcHRpb25zLnNsaWNlKCksIGNvbClcbiAgICAgIDogc2VsZWN0T3B0aW9ucztcbiAgICBjb25zdCBmc1Byb3BzID0ge1xuICAgICAgbmFtZTogYG9jRGF0YWdyaWRGaWx0ZXJJbnB1dC0ke2dyaWRJZH0tJHtjb2x1bW4uY29sdW1uS2V5fWAsXG4gICAgICBvcHRpb25zOiBvcHRzLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9ucy5nZXRJdGVtVmFsdWUoY29sLCB7IHNlbGVjdE9wdGlvbnMgfSksXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb25zLm9uQ2VsbFZhbHVlQ2hhbmdlKGNvbCwgZWRpdFZhbHVlUGFyc2VyKSxcbiAgICAgIGlzU2VhcmNoYWJsZTogc2VsZWN0T3B0aW9ucyAmJiBzZWxlY3RPcHRpb25zLmxlbmd0aCA+IDksXG4gICAgICBpc0NsZWFyYWJsZTogdHJ1ZSxcbiAgICAgIHRhYlNlbGVjdHNWYWx1ZTogZmFsc2UsXG4gICAgICB0YWJJbmRleCxcbiAgICAgIC4uLnNlbGVjdFRyYW5zbGF0aW9ucyxcbiAgICAgIC4uLmNvbC5maWx0ZXJDb21wb25lbnRQcm9wcyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlbGVjdFJlbmRlcih7IC4uLmZzUHJvcHMgfSk7XG4gIH0sXG59O1xuIl19